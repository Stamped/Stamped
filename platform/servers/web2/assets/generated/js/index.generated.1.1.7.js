jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return -c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b}return -c/2*((--t)*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t+b
}return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b}return -c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t*t+b}return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return -c*Math.cos(t/d*(Math.PI/2))+c+b
},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return -c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0){return b}if(t==d){return b+c}if((t/=d/2)<1){return c/2*Math.pow(2,10*(t-1))+b}return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return -c*(Math.sqrt(1-(t/=d)*t)-1)+b
},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1){return -c/2*(Math.sqrt(1-t*t)-1)+b}return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d)==1){return b+c}if(!p){p=d*0.3}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}return -(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;
var a=c;if(t==0){return b}if((t/=d)==1){return b+c}if(!p){p=d*0.3}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d/2)==2){return b+c}if(!p){p=d*(0.3*1.5)}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}if(t<1){return -0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*0.5+c+b
},easeInBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}if((t/=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b}return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b
}else{if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b}else{if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b}else{return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b}}}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2){return jQuery.easing.easeInBounce(x,t*2,0,c,d)*0.5+b}return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*0.5+c*0.5+b}});(function(jQuery){jQuery.fn.__bind__=jQuery.fn.bind;jQuery.fn.__unbind__=jQuery.fn.unbind;jQuery.fn.__find__=jQuery.fn.find;var hotkeys={version:"0.7.9",override:/keypress|keydown|keyup/g,triggersMap:{},specialKeys:{27:"esc",9:"tab",32:"space",13:"return",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",109:"-",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},newTrigger:function(type,combi,callback){var result={};
result[type]={};result[type][combi]={cb:callback,disableInInput:false};return result}};hotkeys.specialKeys=jQuery.extend(hotkeys.specialKeys,{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/"});jQuery.fn.find=function(selector){this.query=selector;return jQuery.fn.__find__.apply(this,arguments)};jQuery.fn.unbind=function(type,combi,fn){if(jQuery.isFunction(combi)){fn=combi;combi=null}if(combi&&typeof combi==="string"){var selectorId=((this.prevObject&&this.prevObject.query)||(this[0].id&&this[0].id)||this[0]).toString();
var hkTypes=type.split(" ");for(var x=0;x<hkTypes.length;x++){delete hotkeys.triggersMap[selectorId][hkTypes[x]][combi]}}return this.__unbind__(type,fn)};jQuery.fn.bind=function(type,data,fn){var handle=type.match(hotkeys.override);if(jQuery.isFunction(data)||!handle){return this.__bind__(type,data,fn)}else{var result=null,pass2jq=jQuery.trim(type.replace(hotkeys.override,""));if(pass2jq){result=this.__bind__(pass2jq,data,fn)}if(typeof data==="string"){data={combi:data}}if(data.combi){for(var x=0;x<handle.length;
x++){var eventType=handle[x];var combi=data.combi.toLowerCase(),trigger=hotkeys.newTrigger(eventType,combi,fn),selectorId=((this.prevObject&&this.prevObject.query)||(this[0].id&&this[0].id)||this[0]).toString();trigger[eventType][combi].disableInInput=data.disableInInput;if(!hotkeys.triggersMap[selectorId]){hotkeys.triggersMap[selectorId]=trigger}else{if(!hotkeys.triggersMap[selectorId][eventType]){hotkeys.triggersMap[selectorId][eventType]=trigger[eventType]}}var mapPoint=hotkeys.triggersMap[selectorId][eventType][combi];
if(!mapPoint){hotkeys.triggersMap[selectorId][eventType][combi]=[trigger[eventType][combi]]}else{if(mapPoint.constructor!==Array){hotkeys.triggersMap[selectorId][eventType][combi]=[mapPoint]}else{hotkeys.triggersMap[selectorId][eventType][combi][mapPoint.length]=trigger[eventType][combi]}}this.each(function(){var jqElem=jQuery(this);if(jqElem.attr("hkId")&&jqElem.attr("hkId")!==selectorId){selectorId=jqElem.attr("hkId")+";"+selectorId}jqElem.attr("hkId",selectorId)});result=this.__bind__(handle.join(" "),data,hotkeys.handler)
}}return result}};hotkeys.findElement=function(elem){if(!jQuery(elem).attr("hkId")){if(jQuery.browser.opera||jQuery.browser.safari){while(!jQuery(elem).attr("hkId")&&elem.parentNode){elem=elem.parentNode}}}return elem};hotkeys.handler=function(event){var target=hotkeys.findElement(event.currentTarget),jTarget=jQuery(target),ids=jTarget.attr("hkId");if(ids){ids=ids.split(";");var code=event.which,type=event.type,special=hotkeys.specialKeys[code],character=!special&&String.fromCharCode(code).toLowerCase(),shift=event.shiftKey,ctrl=event.ctrlKey,alt=event.altKey||event.originalEvent.altKey,mapPoint=null;
for(var x=0;x<ids.length;x++){if(hotkeys.triggersMap[ids[x]][type]){mapPoint=hotkeys.triggersMap[ids[x]][type];break}}if(mapPoint){var trigger;if(!shift&&!ctrl&&!alt){trigger=mapPoint[special]||(character&&mapPoint[character])}else{var modif="";if(alt){modif+="alt+"}if(ctrl){modif+="ctrl+"}if(shift){modif+="shift+"}trigger=mapPoint[modif+special];if(!trigger){if(character){trigger=mapPoint[modif+character]||mapPoint[modif+hotkeys.shiftNums[character]]||(modif==="shift+"&&mapPoint[hotkeys.shiftNums[character]])
}}}if(trigger){var result=false;for(var x=0;x<trigger.length;x++){if(trigger[x].disableInInput){var elem=jQuery(event.target);if(jTarget.is("input")||jTarget.is("textarea")||jTarget.is("select")||elem.is("input")||elem.is("textarea")||elem.is("select")){return true}}result=result||trigger[x].cb.apply(this,[event])}return result}}}};window.hotkeys=hotkeys;return jQuery})(jQuery);
/*!
 * fancyBox - jQuery Plugin
 * version: 2.0.6 (16/04/2012)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 * 
 * NOTE: Stamped owns a single-domain commercial license to use the FancyBox library.
 */
(function(window,document,$,undefined){var W=$(window),D=$(document),F=$.fancybox=function(){F.open.apply(this,arguments)
},didResize=false,resizeTimer=null,isTouch=document.createTouch!==undefined,isString=function(str){return $.type(str)==="string"},isPercentage=function(str){return isString(str)&&str.indexOf("%")>0},getValue=function(value,dim){if(dim&&isPercentage(value)){value=F.getViewport()[dim]/100*parseInt(value,10)}return Math.round(value)+"px"};$.extend(F,{version:"2.0.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:true,autoResize:!isTouch,autoCenter:!isTouch,fitToView:true,aspectRatio:false,topRatio:0.5,fixed:false,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"'+($.browser.msie?' allowtransparency="true"':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">Whoops! Looks like we messed something up on our end. Our bad.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="close-button"><div class="close-button-inner"></div></a>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:300,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:300,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:0.8,css:{cursor:"pointer"},closeClick:true},title:{type:"float"}},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},coming:null,current:null,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(group,opts){F.close(true);
if(group&&!$.isArray(group)){group=group instanceof $?$(group).get():[group]}F.isActive=true;F.opts=$.extend(true,{},F.defaults,opts);if($.isPlainObject(opts)&&opts.keys!==undefined){F.opts.keys=opts.keys?$.extend({},F.defaults.keys,opts.keys):false}F.group=group;F._start(F.opts.index||0)},cancel:function(){if(F.coming&&false===F.trigger("onCancel")){return}F.coming=null;F.hideLoading();if(F.ajaxLoad){F.ajaxLoad.abort()}F.ajaxLoad=null;if(F.imgPreload){F.imgPreload.onload=F.imgPreload.onabort=F.imgPreload.onerror=null
}},close:function(a){F.cancel();if(!F.current||false===F.trigger("beforeClose")){return}F.unbindEvents();if(!F.isOpen||(a&&a[0]===true)){$(".fancybox-wrap").stop().trigger("onReset").remove();F._afterZoomOut()}else{F.isOpen=F.isOpened=false;$(".fancybox-item, .fancybox-nav").remove();F.wrap.stop(true).removeClass("fancybox-opened");F.inner.css("overflow","hidden");F.transitions[F.current.closeMethod]()}},play:function(a){var clear=function(){clearTimeout(F.player.timer)},set=function(){clear();if(F.current&&F.player.isActive){F.player.timer=setTimeout(F.next,F.current.playSpeed)
}},stop=function(){clear();$("body").unbind(".player");F.player.isActive=false;F.trigger("onPlayEnd")},start=function(){if(F.current&&(F.current.loop||F.current.index<F.group.length-1)){F.player.isActive=true;$("body").bind({"afterShow.player onUpdate.player":set,"onCancel.player beforeClose.player":stop,"beforeLoad.player":clear});set();F.trigger("onPlayStart")}};if(F.player.isActive||(a&&a[0]===false)){stop()}else{start()}},next:function(){if(F.current){F.jumpto(F.current.index+1)}},prev:function(){if(F.current){F.jumpto(F.current.index-1)
}},jumpto:function(index){if(!F.current){return}index=parseInt(index,10);if(F.group.length>1&&F.current.loop){if(index>=F.group.length){index=0}else{if(index<0){index=F.group.length-1}}}if(F.group[index]!==undefined){F.cancel();F._start(index)}},reposition:function(e,onlyAbsolute){var pos;if(F.isOpen){pos=F._getPosition(onlyAbsolute);if(e&&e.type==="scroll"){delete pos.position;F.wrap.stop(true,true).animate(pos,200)}else{F.wrap.css(pos)}}},update:function(e){if(!F.isOpen){return}if(!didResize){resizeTimer=setTimeout(function(){var current=F.current,anyway=!e||(e&&e.type==="orientationchange");
if(didResize){didResize=false;if(!current){return}if((!e||e.type!=="scroll")||anyway){if(current.autoSize&&current.type!=="iframe"){F.inner.height("auto");current.height=F.inner.height()}if(current.autoResize||anyway){F._setDimension()}if(current.canGrow&&current.type!=="iframe"){F.inner.height("auto")}}if(current.autoCenter||anyway){F.reposition(e)}F.trigger("onUpdate")}},200)}didResize=true},toggle:function(){if(F.isOpen){F.current.fitToView=!F.current.fitToView;F.update()}},hideLoading:function(){D.unbind("keypress.fb");
$("#fancybox-loading").remove()},showLoading:function(){F.hideLoading();D.bind("keypress.fb",function(e){if(e.keyCode===27){e.preventDefault();F.cancel()}});$('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo("body")},getViewport:function(){return{x:W.scrollLeft(),y:W.scrollTop(),w:isTouch&&window.innerWidth?window.innerWidth:W.width(),h:isTouch&&window.innerHeight?window.innerHeight:W.height()}},unbindEvents:function(){if(F.wrap){F.wrap.unbind(".fb")}D.unbind(".fb");W.unbind(".fb")},bindEvents:function(){var current=F.current,keys=current.keys;
if(!current){return}W.bind("resize.fb orientationchange.fb"+(current.autoCenter&&!current.fixed?" scroll.fb":""),F.update);if(keys){D.bind("keydown.fb",function(e){var code,target=e.target||e.srcElement;if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&!(target&&(target.type||$(target).is("[contenteditable]")))){code=e.keyCode;if($.inArray(code,keys.close)>-1){F.close();e.preventDefault()}else{if($.inArray(code,keys.next)>-1){F.next();e.preventDefault()}else{if($.inArray(code,keys.prev)>-1){F.prev();e.preventDefault()
}}}}})}if($.fn.mousewheel&&current.mouseWheel&&F.group.length>1){F.wrap.bind("mousewheel.fb",function(e,delta){var target=e.target||null;if(delta!==0&&(!target||target.clientHeight===0||(target.scrollHeight===target.clientHeight&&target.scrollWidth===target.clientWidth))){e.preventDefault();F[delta>0?"prev":"next"]()}})}},trigger:function(event,o){var ret,obj=o||F[$.inArray(event,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(!obj){return}if($.isFunction(obj[event])){ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1))
}if(ret===false){return false}if(obj.helpers){$.each(obj.helpers,function(helper,opts){if(opts&&$.isPlainObject(F.helpers[helper])&&$.isFunction(F.helpers[helper][event])){F.helpers[helper][event](opts,obj)}})}$.event.trigger(event+".fb")},isImage:function(str){return isString(str)&&str.match(/\.(jpe?g|gif|png|bmp)((\?|#).*)?$/i)},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i)},_start:function(index){var coming={},element=F.group[index]||null,isDom,href,type,rez,hrefParts;if(element&&(element.nodeType||element instanceof $)){isDom=true;
if($.metadata){coming=$(element).metadata()}}coming=$.extend(true,{},F.opts,{index:index,element:element},($.isPlainObject(element)?element:coming));$.each(["href","title","content","type"],function(i,v){coming[v]=F.opts[v]||(isDom&&$(element).attr(v))||coming[v]||null});if(typeof coming.margin==="number"){coming.margin=[coming.margin,coming.margin,coming.margin,coming.margin]}if(coming.modal){$.extend(true,coming,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:false}}})
}F.coming=coming;if(false===F.trigger("beforeLoad")){F.coming=null;return}type=coming.type;href=coming.href||element;if(!type){if(isDom){type=$(element).data("fancybox-type");if(!type){rez=element.className.match(/fancybox\.(\w+)/);type=rez?rez[1]:null}}if(!type&&isString(href)){if(F.isImage(href)){type="image"}else{if(F.isSWF(href)){type="swf"}else{if(href.match(/^#/)){type="inline"}}}}if(!type){type=isDom?"inline":"html"}coming.type=type}if(type==="inline"||type==="html"){if(!coming.content){if(type==="inline"){coming.content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,""):href)
}else{coming.content=element}}if(!coming.content||!coming.content.length){type=null}}else{if(!href){type=null}}if(type==="ajax"&&isString(href)){hrefParts=href.split(/\s+/,2);href=hrefParts.shift();coming.selector=hrefParts.shift()}coming.href=href;coming.group=F.group;coming.isDom=isDom;switch(type){case"image":F._loadImage();break;case"ajax":F._loadAjax();break;case"inline":case"iframe":case"swf":case"html":F._afterLoad();break;default:F._error("type")}},_error:function(type){F.hideLoading();$.extend(F.coming,{type:"html",autoSize:true,minWidth:0,minHeight:0,padding:15,hasError:type,content:F.coming.tpl.error});
F._afterLoad()},_loadImage:function(){var img=F.imgPreload=new Image();img.onload=function(){this.onload=this.onerror=null;F.coming.width=this.width;F.coming.height=this.height;F._afterLoad()};img.onerror=function(){this.onload=this.onerror=null;F._error("image")};img.src=F.coming.href;if(img.complete===undefined||!img.complete){F.showLoading()}},_loadAjax:function(){F.showLoading();F.ajaxLoad=$.ajax($.extend({},F.coming.ajax,{url:F.coming.href,error:function(jqXHR,textStatus){if(F.coming&&textStatus!=="abort"){F._error("ajax",jqXHR)
}else{F.hideLoading()}},success:function(data,textStatus){if(textStatus==="success"){F.coming.content=data;F._afterLoad()}}}))},_preloadImages:function(){var group=F.group,current=F.current,len=group.length,item,href,i,cnt=Math.min(current.preload,len-1);if(!current.preload||group.length<2){return}for(i=1;i<=cnt;i+=1){item=group[(current.index+i)%len];href=item.href||$(item).attr("href")||item;if(item.type==="image"||F.isImage(href)){new Image().src=href}}},_afterLoad:function(){F.hideLoading();if(!F.coming||false===F.trigger("afterLoad",F.current)){F.coming=false;
return}if(F.isOpened){$(".fancybox-item, .fancybox-nav").remove();F.wrap.stop(true).removeClass("fancybox-opened");F.inner.css("overflow","hidden");F.transitions[F.current.prevMethod]()}else{$(".fancybox-wrap").stop().trigger("onReset").remove();F.trigger("afterClose")}F.unbindEvents();F.isOpen=false;F.current=F.coming;F.wrap=$(F.current.tpl.wrap).addClass("fancybox-"+(isTouch?"mobile":"desktop")+" fancybox-type-"+F.current.type+" fancybox-tmp "+F.current.wrapCSS).appendTo("body");F.skin=$(".fancybox-skin",F.wrap).css("padding",getValue(F.current.padding));
F.outer=$(".fancybox-outer",F.wrap);F.inner=$(".fancybox-inner",F.wrap);F._setContent()},_setContent:function(){var current=F.current,content=current.content,type=current.type,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,loadingBay;switch(type){case"inline":case"ajax":case"html":if(current.selector){content=$("<div>").html(content).find(current.selector)}else{if(content instanceof $){if(content.parent().hasClass("fancybox-inner")){content.parents(".fancybox-wrap").unbind("onReset")
}content=content.show().detach();$(F.wrap).bind("onReset",function(){content.appendTo("body").hide()})}}if(current.autoSize){loadingBay=$('<div class="fancybox-wrap '+F.current.wrapCSS+' fancybox-tmp"></div>').appendTo("body").css({minWidth:getValue(minWidth,"w"),minHeight:getValue(minHeight,"h"),maxWidth:getValue(maxWidth,"w"),maxHeight:getValue(maxHeight,"h")}).append(content);current.width=loadingBay.width();current.height=loadingBay.height();loadingBay.width(F.current.width);if(loadingBay.height()>current.height){loadingBay.width(current.width+1);
current.width=loadingBay.width();current.height=loadingBay.height()}content=loadingBay.contents().detach();loadingBay.remove()}break;case"image":content=current.tpl.image.replace("{href}",current.href);current.aspectRatio=true;break;case"swf":content=current.tpl.swf.replace(/\{width\}/g,current.width).replace(/\{height\}/g,current.height).replace(/\{href\}/g,current.href);break;case"iframe":content=$(current.tpl.iframe.replace("{rnd}",new Date().getTime())).attr("scrolling",current.scrolling).attr("src",current.href);
current.scrolling=isTouch?"scroll":"auto";break}if(type==="image"||type==="swf"){current.autoSize=false;current.scrolling="visible"}if(type==="iframe"&&current.autoSize){F.showLoading();F._setDimension();F.inner.css("overflow",current.scrolling);content.bind({onCancel:function(){$(this).unbind();F._afterZoomOut()},load:function(){F.hideLoading();try{if(this.contentWindow.document.location){F.current.height=$(this).contents().find("body").height()}}catch(e){F.current.autoSize=false}F[F.isOpen?"_afterZoomIn":"_beforeShow"]()
}}).appendTo(F.inner)}else{F.inner.append(content);F._beforeShow()}},_beforeShow:function(){F.coming=null;F.trigger("beforeShow");F._setDimension();F.wrap.hide().removeClass("fancybox-tmp");F.bindEvents();F._preloadImages();F.transitions[F.isOpened?F.current.nextMethod:F.current.openMethod]()},_setDimension:function(){var wrap=F.wrap,inner=F.inner,current=F.current,viewport=F.getViewport(),margin=current.margin,padding2=current.padding*2,width=current.width,height=current.height,maxWidth=current.maxWidth+padding2,maxHeight=current.maxHeight+padding2,minWidth=current.minWidth+padding2,minHeight=current.minHeight+padding2,ratio,height_;
viewport.w-=(margin[1]+margin[3]);viewport.h-=(margin[0]+margin[2]);if(isPercentage(width)){width=(((viewport.w-padding2)*parseFloat(width))/100)}if(isPercentage(height)){height=(((viewport.h-padding2)*parseFloat(height))/100)}ratio=width/height;width+=padding2;height+=padding2;if(current.fitToView){maxWidth=Math.min(viewport.w,maxWidth);maxHeight=Math.min(viewport.h,maxHeight)}if(current.aspectRatio){if(width>maxWidth){width=maxWidth;height=((width-padding2)/ratio)+padding2}if(height>maxHeight){height=maxHeight;
width=((height-padding2)*ratio)+padding2}if(width<minWidth){width=minWidth;height=((width-padding2)/ratio)+padding2}if(height<minHeight){height=minHeight;width=((height-padding2)*ratio)+padding2}}else{width=Math.max(minWidth,Math.min(width,maxWidth));height=Math.max(minHeight,Math.min(height,maxHeight))}width=Math.round(width);height=Math.round(height);$(wrap.add(inner)).width("auto").height("auto");inner.width(width-padding2).height(height-padding2);wrap.width(width);height_=wrap.height();if(width>maxWidth||height_>maxHeight){while((width>maxWidth||height_>maxHeight)&&width>minWidth&&height_>minHeight){height=height-10;
if(current.aspectRatio){width=Math.round(((height-padding2)*ratio)+padding2);if(width<minWidth){width=minWidth;height=((width-padding2)/ratio)+padding2}}else{width=width-10}inner.width(width-padding2).height(height-padding2);wrap.width(width);height_=wrap.height()}}current.dim={width:getValue(width),height:getValue(height_)};current.canGrow=current.autoSize&&height>minHeight&&height<maxHeight;current.canShrink=false;current.canExpand=false;if((width-padding2)<current.width||(height-padding2)<current.height){current.canExpand=true
}else{if((width>viewport.w||height_>viewport.h)&&width>minWidth&&height>minHeight){current.canShrink=true}}F.innerSpace=height_-padding2-inner.height()},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:"absolute",top:margin[0]+viewport.y,left:margin[3]+viewport.x};if(current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w){rez={position:"fixed",top:margin[0],left:margin[3]}
}rez.top=getValue(Math.max(rez.top,rez.top+((viewport.h-height)*current.topRatio)));rez.left=getValue(Math.max(rez.left,rez.left+((viewport.w-width)*0.5)));return rez},_afterZoomIn:function(){var current=F.current,scrolling=current?current.scrolling:"no";if(!current){return}F.isOpen=F.isOpened=true;F.wrap.addClass("fancybox-opened");F.inner.css("overflow",scrolling==="yes"?"scroll":(scrolling==="no"?"hidden":scrolling));F.trigger("afterShow");F.update();if(current.closeClick||current.nextClick){F.inner.css("cursor","pointer").bind("click.fb",function(e){if(!$(e.target).is("a")&&!$(e.target).parent().is("a")){F[current.closeClick?"close":"next"]()
}})}if(current.closeBtn){$(current.tpl.closeBtn).appendTo(F.skin).bind("click.fb",F.close)}if(current.arrows&&F.group.length>1){if(current.loop||current.index>0){$(current.tpl.prev).appendTo(F.outer).bind("click.fb",F.prev)}if(current.loop||current.index<F.group.length-1){$(current.tpl.next).appendTo(F.outer).bind("click.fb",F.next)}}if(F.opts.autoPlay&&!F.player.isActive){F.opts.autoPlay=false;F.play()}},_afterZoomOut:function(){var current=F.current;F.wrap.trigger("onReset").remove();$.extend(F,{group:{},opts:{},current:null,isActive:false,isOpened:false,isOpen:false,wrap:null,skin:null,outer:null,inner:null});
F.trigger("afterClose",current)}});F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,padding=current.padding,orig=$(current.orig),pos={},width=50,height=50,viewport;if(!orig.length&&current.isDom&&$(element).is(":visible")){orig=$(element).find("img:first");if(!orig.length){orig=$(element)}}if(orig.length){pos=orig.offset();if(orig.is("img")){width=orig.outerWidth();height=orig.outerHeight()}}else{viewport=F.getViewport();pos.top=viewport.y+(viewport.h-height)*0.5;pos.left=viewport.x+(viewport.w-width)*0.5
}pos={top:getValue(pos.top-padding),left:getValue(pos.left-padding),width:getValue(width+padding*2),height:getValue(height+padding*2)};return pos},step:function(now,fx){var prop=fx.prop,value,ratio;if(prop==="width"||prop==="height"){value=Math.ceil(now-(F.current.padding*2));if(prop==="height"){ratio=(now-fx.start)/(fx.end-fx.start);if(fx.start>fx.end){ratio=1-ratio}value-=F.innerSpace*ratio}F.inner[prop](value)}},zoomIn:function(){var wrap=F.wrap,current=F.current,effect=current.openEffect,elastic=effect==="elastic",dim=current.dim,startPos=$.extend({},dim,F._getPosition(elastic)),endPos=$.extend({opacity:1},startPos);
delete endPos.position;if(elastic){startPos=this.getOrigPosition();if(current.openOpacity){startPos.opacity=0}F.outer.add(F.inner).width("auto").height("auto")}else{if(effect==="fade"){startPos.opacity=0}}wrap.css(startPos).show().animate(endPos,{duration:effect==="none"?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn})},zoomOut:function(){var wrap=F.wrap,current=F.current,effect=current.openEffect,elastic=effect==="elastic",endPos={opacity:0};if(elastic){if(wrap.css("position")==="fixed"){wrap.css(F._getPosition(true))
}endPos=this.getOrigPosition();if(current.closeOpacity){endPos.opacity=0}}wrap.animate(endPos,{duration:effect==="none"?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut})},changeIn:function(){var wrap=F.wrap,current=F.current,effect=current.nextEffect,elastic=effect==="elastic",startPos=F._getPosition(elastic),endPos={opacity:1};startPos.opacity=0;if(elastic){startPos.top=getValue(parseInt(startPos.top,10)-200);endPos.top="+=200px"}wrap.css(startPos).show().animate(endPos,{duration:effect==="none"?0:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn})
},changeOut:function(){var wrap=F.wrap,current=F.current,effect=current.prevEffect,endPos={opacity:0},cleanUp=function(){$(this).trigger("onReset").remove()};wrap.removeClass("fancybox-opened");if(effect==="elastic"){endPos.top="+=200px"}wrap.animate(endPos,{duration:effect==="none"?0:current.prevSpeed,easing:current.prevEasing,complete:cleanUp})}};F.helpers.overlay={overlay:null,update:function(){var width,scrollWidth,offsetWidth;this.overlay.width("100%").height("100%");if($.browser.msie||isTouch){scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);
offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);width=scrollWidth<offsetWidth?W.width():scrollWidth}else{width=D.width()}this.overlay.width(width).height(D.height())},beforeShow:function(opts){if(this.overlay){return}opts=$.extend(true,{},F.defaults.helpers.overlay,opts);this.overlay=$('<div id="fancybox-overlay"></div>').css(opts.css).appendTo("body");if(opts.closeClick){this.overlay.bind("click.fb",F.close)}if(F.current.fixed&&!isTouch){this.overlay.addClass("overlay-fixed")
}else{this.update();this.onUpdate=function(){this.update()}}this.overlay.fadeTo(opts.speedIn,opts.opacity)},afterClose:function(opts){if(this.overlay){this.overlay.fadeOut(opts.speedOut||0,function(){$(this).remove()})}this.overlay=null}};F.helpers.title={beforeShow:function(opts){var title,text=F.current.title;if(text){title=$('<div class="fancybox-title fancybox-title-'+opts.type+'-wrap">'+text+"</div>").appendTo("body");if(opts.type==="float"){title.width(title.width());title.wrapInner('<span class="child"></span>');
F.current.margin[2]+=Math.abs(parseInt(title.css("margin-bottom"),10))}title.appendTo(opts.type==="over"?F.inner:(opts.type==="outside"?F.wrap:F.skin))}}};$.fn.fancybox=function(options){var that=$(this),selector=this.selector||"",index,run=function(e){var what=this,idx=index,relType,relVal;if(!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&!$(what).is(".fancybox-wrap")){e.preventDefault();relType=options.groupAttr||"data-fancybox-group";relVal=$(what).attr(relType);if(!relVal){relType="rel";relVal=what[relType]
}if(relVal&&relVal!==""&&relVal!=="nofollow"){what=selector.length?$(selector):that;what=what.filter("["+relType+'="'+relVal+'"]');idx=what.index(this)}options.index=idx;F.open(what,options)}};options=options||{};index=options.index||0;if(selector){D.undelegate(selector,"click.fb-start").delegate(selector,"click.fb-start",run)}else{that.unbind("click.fb-start").bind("click.fb-start",run)}return this};$(document).ready(function(){F.defaults.fixed=$.support.fixedPosition||(!($.browser.msie&&$.browser.version<=6)&&!isTouch)
})}(window,document,jQuery));
/*!	
* FitText.js 1.0
*
* Copyright 2011, Dave Rupert http://daverupert.com
* Released under the WTFPL license 
* http://sam.zoy.org/wtfpl/
*
* Date: Thu May 05 14:23:00 2011 -0600
*/
(function($){$.fn.fitText=function(kompressor,options){var compressor=kompressor||1,settings=$.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},options);return this.each(function(){var $this=$(this);var resizer=function(){$this.css("font-size",Math.max(Math.min($this.width()/(compressor*10),parseFloat(settings.maxFontSize)),parseFloat(settings.minFontSize)))
};resizer();$(window).on("resize",resizer)})}})(jQuery);
/*! 
 * jquery.event.drag - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function($){$.fn.drag=function(str,arg,opts){var type=typeof str=="string"?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;if(type.indexOf("drag")!==0){type="drag"+type}opts=(str==fn?arg:opts)||{};return fn?this.bind(type,opts,fn):this.trigger(type)};var $event=$.event,$special=$event.special,drag=$special.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",noBubble:true,add:function(obj){var data=$.data(this,drag.datakey),opts=obj.data||{};
data.related+=1;$.each(drag.defaults,function(key,def){if(opts[key]!==undefined){data[key]=opts[key]}})},remove:function(){$.data(this,drag.datakey).related-=1},setup:function(){if($.data(this,drag.datakey)){return}var data=$.extend({related:0},drag.defaults);$.data(this,drag.datakey,data);$event.add(this,"touchstart mousedown",drag.init,data);if(this.attachEvent){this.attachEvent("ondragstart",drag.dontstart)}},teardown:function(){var data=$.data(this,drag.datakey)||{};if(data.related){return}$.removeData(this,drag.datakey);
$event.remove(this,"touchstart mousedown",drag.init);drag.textselect(true);if(this.detachEvent){this.detachEvent("ondragstart",drag.dontstart)}},init:function(event){if(drag.touched){return}var dd=event.data,results;if(event.which!=0&&dd.which>0&&event.which!=dd.which){return}if($(event.target).is(dd.not)){return}if(dd.handle&&!$(event.target).closest(dd.handle,event.currentTarget).length){return}drag.touched=event.type=="touchstart"?this:null;dd.propagates=1;dd.mousedown=this;dd.interactions=[drag.interaction(this,dd)];
dd.target=event.target;dd.pageX=event.pageX;dd.pageY=event.pageY;dd.dragging=null;results=drag.hijack(event,"draginit",dd);if(!dd.propagates){return}results=drag.flatten(results);if(results&&results.length){dd.interactions=[];$.each(results,function(){dd.interactions.push(drag.interaction(this,dd))})}dd.propagates=dd.interactions.length;if(dd.drop!==false&&$special.drop){$special.drop.handler(event,dd)}drag.textselect(false);if(drag.touched){$event.add(drag.touched,"touchmove touchend",drag.handler,dd)}else{$event.add(document,"mousemove mouseup",drag.handler,dd)
}if(!drag.touched||dd.live){return false}},interaction:function(elem,dd){var offset=$(elem)[dd.relative?"position":"offset"]()||{top:0,left:0};return{drag:elem,callback:new drag.callback(),droppable:[],offset:offset}},handler:function(event){var dd=event.data;switch(event.type){case !dd.dragging&&"touchmove":event.preventDefault();case !dd.dragging&&"mousemove":if(Math.pow(event.pageX-dd.pageX,2)+Math.pow(event.pageY-dd.pageY,2)<Math.pow(dd.distance,2)){break}event.target=dd.target;drag.hijack(event,"dragstart",dd);
if(dd.propagates){dd.dragging=true}case"touchmove":event.preventDefault();case"mousemove":if(dd.dragging){drag.hijack(event,"drag",dd);if(dd.propagates){if(dd.drop!==false&&$special.drop){$special.drop.handler(event,dd)}break}event.type="mouseup"}case"touchend":case"mouseup":default:if(drag.touched){$event.remove(drag.touched,"touchmove touchend",drag.handler)}else{$event.remove(document,"mousemove mouseup",drag.handler)}if(dd.dragging){if(dd.drop!==false&&$special.drop){$special.drop.handler(event,dd)}drag.hijack(event,"dragend",dd)
}drag.textselect(true);if(dd.click===false&&dd.dragging){$.data(dd.mousedown,"suppress.click",new Date().getTime()+5)}dd.dragging=drag.touched=false;break}},hijack:function(event,type,dd,x,elem){if(!dd){return}var orig={event:event.originalEvent,type:event.type},mode=type.indexOf("drop")?"drag":"drop",result,i=x||0,ia,$elems,callback,len=!isNaN(x)?x:dd.interactions.length;event.type=type;event.originalEvent=null;dd.results=[];do{if(ia=dd.interactions[i]){if(type!=="dragend"&&ia.cancelled){continue}callback=drag.properties(event,dd,ia);
ia.results=[];$(elem||ia[mode]||dd.droppable).each(function(p,subject){callback.target=subject;event.isPropagationStopped=function(){return false};result=subject?$event.dispatch.call(subject,event,callback):null;if(result===false){if(mode=="drag"){ia.cancelled=true;dd.propagates-=1}if(type=="drop"){ia[mode][p]=null}}else{if(type=="dropinit"){ia.droppable.push(drag.element(result)||subject)}}if(type=="dragstart"){ia.proxy=$(drag.element(result)||ia.drag)[0]}ia.results.push(result);delete event.result;if(type!=="dropinit"){return result
}});dd.results[i]=drag.flatten(ia.results);if(type=="dropinit"){ia.droppable=drag.flatten(ia.droppable)}if(type=="dragstart"&&!ia.cancelled){callback.update()}}}while(++i<len);event.type=orig.type;event.originalEvent=orig.event;return drag.flatten(dd.results)},properties:function(event,dd,ia){var obj=ia.callback;obj.drag=ia.drag;obj.proxy=ia.proxy||ia.drag;obj.startX=dd.pageX;obj.startY=dd.pageY;obj.deltaX=event.pageX-dd.pageX;obj.deltaY=event.pageY-dd.pageY;obj.originalX=ia.offset.left;obj.originalY=ia.offset.top;
obj.offsetX=obj.originalX+obj.deltaX;obj.offsetY=obj.originalY+obj.deltaY;obj.drop=drag.flatten((ia.drop||[]).slice());obj.available=drag.flatten((ia.droppable||[]).slice());return obj},element:function(arg){if(arg&&(arg.jquery||arg.nodeType==1)){return arg}},flatten:function(arr){return $.map(arr,function(member){return member&&member.jquery?$.makeArray(member):member&&member.length?drag.flatten(member):member})},textselect:function(bool){$(document)[bool?"unbind":"bind"]("selectstart",drag.dontstart).css("MozUserSelect",bool?"":"none");
document.unselectable=bool?"off":"on"},dontstart:function(){return false},callback:function(){}};drag.callback.prototype={update:function(){if($special.drop&&this.available.length){$.each(this.available,function(i){$special.drop.locate(this,i)})}}};var $dispatch=$event.dispatch;$event.dispatch=function(event){if($.data(this,"suppress."+event.type)-new Date().getTime()>0){$.removeData(this,"suppress."+event.type);return}return $dispatch.apply(this,arguments)};var touchHooks=$event.fixHooks.touchstart=$event.fixHooks.touchmove=$event.fixHooks.touchend=$event.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(event,orig){if(orig){var touched=(orig.touches&&orig.touches[0])||(orig.changedTouches&&orig.changedTouches[0])||null;
if(touched){$.each(touchHooks.props,function(i,prop){event[prop]=touched[prop]})}}return event}};$special.draginit=$special.dragstart=$special.dragend=drag})(jQuery);
/*! utils.js - Core Stamped.com JS Utils
 * 
 * Copyright (c) 2011-2012 Stamped Inc.
 */
(function(){window.log=function f(){log.history=log.history||[];log.history.push(arguments);if(this.console){var args=arguments,newarr;args.callee=args.callee.caller;newarr=[].slice.call(args);if(typeof console.log==="object"){log.apply.call(console.log,console,newarr)
}else{console.log.apply(console,newarr)}}};if(typeof(console.debug)==="undefined"){console.debug=console.log;
/*! Simple JavaScript Inheritance
     * By John Resig http://ejohn.org/
     * MIT Licensed.
     */
}(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;
this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret}})(name,prop[name]):prop[name]}function Class(){if(!initializing&&this.init){this.init.apply(this,arguments)}}Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=arguments.callee;return Class}})()})();
/*! signup.js
 * 
 * Copyright (c) 2011-2012 Stamped Inc.
 */
(function(){$(document).ready(function(){var $body=$("body");var get_fancybox_options=function(options){var default_options={openEffect:"elastic",openEasing:"easeOutBack",openSpeed:300,closeEffect:"elastic",closeEasing:"easeInBack",closeSpeed:300,tpl:{error:'<p class="fancybox-error">Whoops! Looks like we messed something up on our end. Our bad.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="close-button"><div class="close-button-inner"></div></a>'},helpers:{overlay:{speedIn:150,speedOut:300,opacity:0.8,css:{cursor:"pointer","background-color":"#fff"},closeClick:true}}};
var output={};for(var key in default_options){if(default_options.hasOwnProperty(key)){output[key]=default_options[key]}}if(!!options){for(var key in options){if(options.hasOwnProperty(key)){output[key]=options[key]}}}return output};var get_fancybox_popup_large_options=function(options){var output=get_fancybox_options({scrolling:"no",wrapCSS:"",padding:0});if(!!options){for(var key in options){if(options.hasOwnProperty(key)){output[key]=options[key]}}}return output};$body.on("click",".download-stamped-popup",function(event){event.preventDefault();
var popup_options=get_fancybox_popup_large_options({content:$("#popup-signup").html(),type:"html",width:480,minWidth:480});$.fancybox.open(popup_options);return false});var default_phone_number="555-555-5555";var sms_message_success="SMS Sent!";var sms_message_error="SMS Error!";$body.on("focus",".phone-number",function(event){var $this=$(this);var $sms=$this.parent();var value=$this.attr("value");if(value==default_phone_number||value==sms_message_success||value==sms_message_error){$this.attr("value","")}$sms.removeClass("error").addClass("active");
return true});$body.on("focusout",".phone-number",function(event){var $this=$(this);var $sms=$this.parent();var value=$this.attr("value").trim();if(value.length<=0){$this.attr("value",default_phone_number)}$sms.removeClass("active error");return true});var is_valid_number=function(value){if(value==default_phone_number||value==sms_message_success||value==sms_message_error||value.length<=3){return null}value=value.replace(/-/g,"");value=value.replace(/ /g,"");var len=10;if(value[0]=="+"){len=12}if(value.length!==len){return null
}return value};$(".phone-number").live("keyup change",function(event){var $this=$(this);var value=$this.attr("value").trim();var active="active";var $button=$this.parent().find(".send-button");if(is_valid_number(value)!==null){$button.addClass(active)}else{$button.removeClass(active)}return true});$body.on("submit",".sms-form",function(event){event.preventDefault();var $this=$(this);var $input=$this.find(".phone-number");var value=$input.attr("value").trim();value=is_valid_number(value);if(!value){return false
}var ajaxP=$.ajax({type:"POST",url:"/download-app",data:{phone_number:value}}).done(function(){$input.attr("value",sms_message_success)}).fail(function(){$input.attr("value",sms_message_error).parent().addClass("error")});return false})})})();
/*! index.js
 * 
 * Copyright (c) 2011-2012 Stamped Inc.
 */
(function(){$(document).ready(function(){var $window=$(window);var $body=$("body");var $main=$("#main");var $vertically_centered=$(".vertically-centered");var $main_body=$("#main-body");var $main_iphone=$("#main-iphone");
var $main_footer=$("#main-footer");var $main_stamped_logo=$("#stamped-logo");var $iphone_screens=$(".iphone-screens");var $iphone_inbox_body=$(".iphone-inbox-body");var $iphone_inbox_selection=$(".iphone-inbox-selection");var $iphone_back_button=$(".iphone-screen-back-button");var iphone_inbox_selection=false;var $tastemakers=$(".tastemaker");var $map_window_url=$("#fake-url");var $map_window=$("#tastemaker-map-window");var $map_window_overlay=$("#tastemaker-map-window-overlay");var $map_window_iframe=null;var $social=$("#social");
var $intro_iphone=$("#intro-iphone");var $intro_hero=$("#intro-hero");var active_text="active-text";var active_line="active-line";jQuery.ease=function(start,end,duration,easing,callback,complete){var easer=$("<div>");var step_index=0;var estimated_num_steps=Math.ceil(duration/13);var params={easing:easing,duration:duration,step:function(index){callback(index,step_index++,estimated_num_steps,start,end)}};if(!!complete){params.complete=complete}return easer.css("easingIndex",start).animate({easingIndex:end},params)
};var Animation=Class.extend({init:function(params){this.params={start:0,end:1,duration:1000,easing:"linear",step:null,complete:null};for(var key in params){if(params.hasOwnProperty(key)){this.params[key]=params[key]}}this._easer=null},start:function(){if(!!this._easer){return this._easer}var that=this;var params=this.params;var p_step=params.step;var p_complete=params.complete;var callback=function(now,fx){if(!!p_step){p_step(now,fx,that)}};var complete=function(){this._easer=null;if(!!p_complete){p_complete(that)
}};this._easer=$.ease(params.start,params.end,params.duration,params.easing,callback,complete);return this._easer},stop:function(clearQueue,jumpToEnd){if(!!this._easer){clearQueue=(typeof(clearQueue)!=="undefined"?clearQueue:false);jumpToEnd=(typeof(jumpToEnd)!=="undefined"?jumpToEnd:false);this._easer.stop(clearQueue,jumpToEnd);this._easer=null}},restart:function(){this.stop(true,false);return this.start()},is_running:function(){return !!this._easer}});var get_relative_offset=function(height){return Math.ceil(-125*(height/(window.innerHeight||1)))+"%"
};var $texts=$(".text");var index=Math.floor(Math.random()*$texts.length);$texts.eq(index).addClass(active_text);var fit_text_compression_factor=0.5;$(".line").fitText(fit_text_compression_factor);var hide_intro=function(autoplay){init_main(autoplay);var height=$(".active-line").height();var offset=get_relative_offset(height);$intro_hero.delay(50).animate({top:offset},{duration:600,easing:"easeInCubic",complete:function(){$body.removeClass("intro")}})};var intro_animation=new Animation({duration:1600,complete:function(){var $active=$(".active-line");
var $next=$active.next(".line").filter(":visible");if($next.length>0){$active.removeClass(active_line);$next.addClass(active_line);intro_animation.restart()}else{hide_intro(true)}}});var main_pane_cycle_animation=new Animation({duration:5000,complete:function(){var active=parseInt($main_body.get(0).className.replace("active-pane-",""));var next=((active+1)%5);set_active_pane(next);main_pane_cycle_animation.restart()}});var stamped_logo_top=parseFloat($main_stamped_logo.css("top"));var stamped_logo_left=parseFloat($main_stamped_logo.css("left"));
var update_stamped_logo_layout=function(){var scrollY=$window.scrollTop();var min_offset=-50;if($main_stamped_logo.hasClass("stamped-logo-fixed")){var p_offset=$main_stamped_logo.parent().offset();if(p_offset.top+stamped_logo_top-scrollY>=min_offset){$main_stamped_logo.removeClass("stamped-logo-fixed").css({top:stamped_logo_top+"px",left:stamped_logo_left+"px"})}}else{var offset=$main_stamped_logo.offset();if(offset.top-scrollY<min_offset){$main_stamped_logo.addClass("stamped-logo-fixed").css({top:min_offset+"px",left:offset.left+"px"})
}}};var update_main_layout=function(noop){var height=$vertically_centered.height();var offset=Math.max(0,(window.innerHeight-height)/2);if(typeof(noop)!=="boolean"||!noop){$main.css("top",offset+"px");update_stamped_logo_layout()}return{height:height,offset:offset}};var resize_panes=function(noop){var $panes=$(".pane");var height=0;$panes.each(function(i,elem){var $elem=$(elem);height=Math.max($elem.height(),height)});if(height>0){if(typeof(noop)!=="boolean"||!noop){return update_main_layout(noop)}}return false
};var init_main=function(autoplay){autoplay=(typeof(autoplay)==="undefined"?true:autoplay);$body.addClass("main");resize_panes(true);var result=update_main_layout(true);var start=window.innerHeight+result.height;$body.addClass("main-animating");$main.css("top",start+"px").animate({top:result.offset+"px"},{easing:"easeOutCubic",duration:1000,step:function(value){var percent=(value-result.offset)/(start-result.offset);if(percent<0.1){$body.removeClass("main-animating")}},complete:function(){if(!resize_panes()){update_main_layout()
}$body.removeClass("main-animating");if(!!autoplay){main_pane_cycle_animation.start()}}});$main_iphone.delay(300).css("top","200%").animate({top:"50%"},{easing:"easeOutCubic",duration:800})};var map_window_show=function(){$social.hide(800);$map_window.stop(true,false).show().animate({left:"50%"},{easing:"easeOutExpo",duration:800})};var map_window_hide=function(){$map_window.stop(true,false).animate({left:"100%"},{easing:"easeInQuad",duration:600,complete:function(){$map_window.hide()}});$social.show(600)};var map_window_switch_user=function(screen_name){if($map_window.length<=0){return
}var active=$map_window.data("active");if(screen_name!==active){$map_window.data("active",screen_name);$tastemakers.removeClass("active");$(".tastemaker-"+screen_name).addClass("active");$map_window_url.attr("href","/"+screen_name+"/map").text("www.stamped.com/"+screen_name+"/map");var iframe_src="/"+screen_name+"/map?lite=true";if(!$map_window_iframe){var iframe='<iframe id="tastemaker-map-window-iframe" frameborder="0" scrolling="no" src="'+iframe_src+'"></iframe>';$map_window.append(iframe);$map_window_iframe=$("#tastemaker-map-window-iframe")
}else{$map_window_iframe.attr("src",iframe_src);$map_window_overlay.stop(true,false).fadeIn(200);$map_window_iframe.ready(function(){setTimeout(function(){$map_window_overlay.stop(true,false).fadeOut(500)},3000)})}}};var set_active_pane=function(index){if(!$body.hasClass("index")){return}if(index>=0&&index<=4){var active="active-pane-"+index;if(!$main_body.hasClass(active)){$main_body.removeClass().addClass(active);index=parseInt(index);if(index<3){set_active_iphone_screen(index);$main_iphone.css("visibility","visible")
}else{$main_iphone.css("visibility","hidden")}if(index===3){map_window_show()}else{map_window_hide()}if(index===4){$main_footer.addClass("watch-video-overview")}else{$main_footer.removeClass("watch-video-overview")}return true}}return false};$main.on("click",".pane-nav-button",function(event){event.preventDefault();main_pane_cycle_animation.stop();var $this=$(this);var id=$this.attr("id");var index=id.slice("pane-nav-".length);set_active_pane(index);return false});$main.on("click",".lightbox-video",function(event){event.preventDefault();
$.fancybox({padding:0,autoScale:false,transitionIn:"none",transitionOut:"none",openEffect:"elastic",openEasing:"easeOutBack",openSpeed:300,closeEffect:"elastic",closeEasing:"easeInBack",closeSpeed:300,tpl:{error:'<p class="fancybox-error">Whoops! Looks like we messed something up on our end. Our bad.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="close-button"><div class="close-button-inner"></div></a>'},title:this.title,width:680,height:495,href:this.href.replace(new RegExp("watch\\?v=","i"),"v/"),type:"swf",swf:{wmode:"transparent",allowfullscreen:"true"},});
return false});$main.on("click",".tastemaker",function(event){event.preventDefault();var $this=$(this);var screen_name=$this.data("screen-name");map_window_switch_user(screen_name);return false});var iphone_screens_index_map={"0":"inbox","1":"sdetail","2":"guide"};var iphone_screens_all="iphone-screen-active-inbox iphone-screen-active-sdetail iphone-screen-active-guide";var set_active_iphone_screen=function(index){if($iphone_screens.length<=0){return}var current_classes=$iphone_screens.get(0).className.split(/\s+/);
var active="iphone-screen-active-"+iphone_screens_index_map[""+index];for(var i=0;i<current_classes.length;++i){var current=current_classes[i];if(active===current){return}}$iphone_screens.removeClass(iphone_screens_all).addClass(active)};$iphone_back_button.click(function(event){event.preventDefault();main_pane_cycle_animation.stop();set_active_pane(0);return false});var disable_main_pane_cycle_animation=function(event){main_pane_cycle_animation.stop();return true};$main_body.hover(disable_main_pane_cycle_animation);
$main_iphone.hover(disable_main_pane_cycle_animation);$("#pane-nav").hover(disable_main_pane_cycle_animation);$(document).bind("keydown","ctrl+t",function(){$(".download-the-app-button").toggleClass("download-the-app-button-ugly-green")});$(document).bind("keydown",function(e){if(e.which==27){if(intro_animation.is_running()){intro_animation.stop(true,true);hide_intro(false)}else{main_pane_cycle_animation.stop()}}});$window.resize(update_main_layout);$window.scroll(update_stamped_logo_layout);$window.bind("load",function(){if($body.hasClass("intro")){intro_animation.start()
}else{init_main(true)}map_window_switch_user("mariobatali")})})})();