(function(jQuery){jQuery.fn.__bind__=jQuery.fn.bind;jQuery.fn.__unbind__=jQuery.fn.unbind;jQuery.fn.__find__=jQuery.fn.find;var hotkeys={version:"0.7.9",override:/keypress|keydown|keyup/g,triggersMap:{},specialKeys:{27:"esc",9:"tab",32:"space",13:"return",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",109:"-",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},newTrigger:function(type,combi,callback){var result={};
result[type]={};result[type][combi]={cb:callback,disableInInput:false};return result}};hotkeys.specialKeys=jQuery.extend(hotkeys.specialKeys,{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/"});jQuery.fn.find=function(selector){this.query=selector;return jQuery.fn.__find__.apply(this,arguments)};jQuery.fn.unbind=function(type,combi,fn){if(jQuery.isFunction(combi)){fn=combi;combi=null}if(combi&&typeof combi==="string"){var selectorId=((this.prevObject&&this.prevObject.query)||(this[0].id&&this[0].id)||this[0]).toString();
var hkTypes=type.split(" ");for(var x=0;x<hkTypes.length;x++){delete hotkeys.triggersMap[selectorId][hkTypes[x]][combi]}}return this.__unbind__(type,fn)};jQuery.fn.bind=function(type,data,fn){var handle=type.match(hotkeys.override);if(jQuery.isFunction(data)||!handle){return this.__bind__(type,data,fn)}else{var result=null,pass2jq=jQuery.trim(type.replace(hotkeys.override,""));if(pass2jq){result=this.__bind__(pass2jq,data,fn)}if(typeof data==="string"){data={combi:data}}if(data.combi){for(var x=0;x<handle.length;
x++){var eventType=handle[x];var combi=data.combi.toLowerCase(),trigger=hotkeys.newTrigger(eventType,combi,fn),selectorId=((this.prevObject&&this.prevObject.query)||(this[0].id&&this[0].id)||this[0]).toString();trigger[eventType][combi].disableInInput=data.disableInInput;if(!hotkeys.triggersMap[selectorId]){hotkeys.triggersMap[selectorId]=trigger}else{if(!hotkeys.triggersMap[selectorId][eventType]){hotkeys.triggersMap[selectorId][eventType]=trigger[eventType]}}var mapPoint=hotkeys.triggersMap[selectorId][eventType][combi];
if(!mapPoint){hotkeys.triggersMap[selectorId][eventType][combi]=[trigger[eventType][combi]]}else{if(mapPoint.constructor!==Array){hotkeys.triggersMap[selectorId][eventType][combi]=[mapPoint]}else{hotkeys.triggersMap[selectorId][eventType][combi][mapPoint.length]=trigger[eventType][combi]}}this.each(function(){var jqElem=jQuery(this);if(jqElem.attr("hkId")&&jqElem.attr("hkId")!==selectorId){selectorId=jqElem.attr("hkId")+";"+selectorId}jqElem.attr("hkId",selectorId)});result=this.__bind__(handle.join(" "),data,hotkeys.handler)
}}return result}};hotkeys.findElement=function(elem){if(!jQuery(elem).attr("hkId")){if(jQuery.browser.opera||jQuery.browser.safari){while(!jQuery(elem).attr("hkId")&&elem.parentNode){elem=elem.parentNode}}}return elem};hotkeys.handler=function(event){var target=hotkeys.findElement(event.currentTarget),jTarget=jQuery(target),ids=jTarget.attr("hkId");if(ids){ids=ids.split(";");var code=event.which,type=event.type,special=hotkeys.specialKeys[code],character=!special&&String.fromCharCode(code).toLowerCase(),shift=event.shiftKey,ctrl=event.ctrlKey,alt=event.altKey||event.originalEvent.altKey,mapPoint=null;
for(var x=0;x<ids.length;x++){if(hotkeys.triggersMap[ids[x]][type]){mapPoint=hotkeys.triggersMap[ids[x]][type];break}}if(mapPoint){var trigger;if(!shift&&!ctrl&&!alt){trigger=mapPoint[special]||(character&&mapPoint[character])}else{var modif="";if(alt){modif+="alt+"}if(ctrl){modif+="ctrl+"}if(shift){modif+="shift+"}trigger=mapPoint[modif+special];if(!trigger){if(character){trigger=mapPoint[modif+character]||mapPoint[modif+hotkeys.shiftNums[character]]||(modif==="shift+"&&mapPoint[hotkeys.shiftNums[character]])
}}}if(trigger){var result=false;for(var x=0;x<trigger.length;x++){if(trigger[x].disableInInput){var elem=jQuery(event.target);if(jTarget.is("input")||jTarget.is("textarea")||jTarget.is("select")||elem.is("input")||elem.is("textarea")||elem.is("select")){return true}}result=result||trigger[x].cb.apply(this,[event])}return result}}}};window.hotkeys=hotkeys;return jQuery})(jQuery);(function(window,$,undefined){$.infinitescroll=function infscr(options,callback,element){this.element=$(element);if(!this._create(options,callback)){this.failed=true
}};$.infinitescroll.defaults={loading:{finished:undefined,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"http://www.infinite-scroll.com/loading.gif",msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:undefined},state:{isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,currPage:1},callback:undefined,debug:false,behavior:undefined,binder:$(window),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:undefined,dataType:"html",appendCallback:true,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:undefined,path:undefined};
$.infinitescroll.prototype={_binding:function infscr_binding(binding){var instance=this,opts=instance.options;opts.v="2.0b2.111027";if(!!opts.behavior&&this["_binding_"+opts.behavior]!==undefined){this["_binding_"+opts.behavior].call(this);return}if(binding!=="bind"&&binding!=="unbind"){this._debug("Binding value  "+binding+" not valid");return false}if(binding=="unbind"){(this.options.binder).unbind("smartscroll.infscr."+instance.options.infid)}else{(this.options.binder)[binding]("smartscroll.infscr."+instance.options.infid,function(){instance.scroll()
})}this._debug("Binding",binding)},_create:function infscr_create(options,callback){var opts=$.extend(true,{},$.infinitescroll.defaults,options);this.options=opts;var path=$(opts.nextSelector).attr("href");if(!path){this._debug("Navigation selector not found");return false}opts.path=this._determinepath(path);opts.contentSelector=opts.contentSelector||this.element;opts.loading.selector=opts.loading.selector||opts.contentSelector;opts.loading.msg=$('<div id="infscr-loading"><img alt="Loading..." src="'+opts.loading.img+'" /><div>'+opts.loading.msgText+"</div></div>");
(new Image()).src=opts.loading.img;opts.pixelsFromNavToBottom=$(document).height()-$(opts.navSelector).offset().top;opts.loading.start=opts.loading.start||function(){$(opts.navSelector).hide();opts.loading.msg.appendTo(opts.loading.selector).show(opts.loading.speed,function(){beginAjax(opts)})};opts.loading.finished=opts.loading.finished||function(){opts.loading.msg.fadeOut("normal")};opts.callback=function(instance,data){if(!!opts.behavior&&instance["_callback_"+opts.behavior]!==undefined){instance["_callback_"+opts.behavior].call($(opts.contentSelector)[0],data)
}if(callback){callback.call($(opts.contentSelector)[0],data,opts)}};this._setup();return true},_debug:function infscr_debug(){if(this.options&&this.options.debug){return window.console&&console.log.call(console,arguments)}},_determinepath:function infscr_determinepath(path){var opts=this.options;if(!!opts.behavior&&this["_determinepath_"+opts.behavior]!==undefined){this["_determinepath_"+opts.behavior].call(this,path);return}if(!!opts.pathParse){this._debug("pathParse manual: "+path);return opts.pathParse(path,this.options.state.currPage+1)
}else{if(path.match(/^(.*?)\b2\b(.*?$)/)){path=path.match(/^(.*?)\b2\b(.*?$)/).slice(1)}else{if(path.match(/^(.*?)2(.*?$)/)){if(path.match(/^(.*?page=)2(\/.*|$)/)){path=path.match(/^(.*?page=)2(\/.*|$)/).slice(1);return path}path=path.match(/^(.*?)2(.*?$)/).slice(1)}else{if(path.match(/^(.*?page=)1(\/.*|$)/)){path=path.match(/^(.*?page=)1(\/.*|$)/).slice(1);return path}else{this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");
opts.state.isInvalidPage=true}}}}this._debug("determinePath",path);return path},_error:function infscr_error(xhr){var opts=this.options;if(!!opts.behavior&&this["_error_"+opts.behavior]!==undefined){this["_error_"+opts.behavior].call(this,xhr);return}if(xhr!=="destroy"&&xhr!=="end"){xhr="unknown"}this._debug("Error",xhr);if(xhr=="end"){this._showdonemsg()}opts.state.isDone=true;opts.state.currPage=1;opts.state.isPaused=false;this._binding("unbind")},_loadcallback:function infscr_loadcallback(box,data){var opts=this.options,callback=this.options.callback,result=(opts.state.isDone)?"done":(!opts.appendCallback)?"no-append":"append",frag;
if(!!opts.behavior&&this["_loadcallback_"+opts.behavior]!==undefined){this["_loadcallback_"+opts.behavior].call(this,box,data);return}switch(result){case"done":this._showdonemsg();return false;break;case"no-append":if(opts.dataType=="html"){data="<div>"+data+"</div>";data=$(data).find(opts.itemSelector)}break;case"append":var children=box.children();if(children.length==0){return this._error("end")}frag=document.createDocumentFragment();while(box[0].firstChild){frag.appendChild(box[0].firstChild)}this._debug("contentSelector",$(opts.contentSelector)[0]);
$(opts.contentSelector)[0].appendChild(frag);data=children.get();break}opts.loading.finished.call($(opts.contentSelector)[0],opts);if(opts.animate){var scrollTo=$(window).scrollTop()+$("#infscr-loading").height()+opts.extraScrollPx+"px";$("html,body").animate({scrollTop:scrollTo},800,function(){opts.state.isDuringAjax=false})}if(!opts.animate){opts.state.isDuringAjax=false}callback(this,data)},_nearbottom:function infscr_nearbottom(){var opts=this.options,pixelsFromWindowBottomToBottom=0+$(document).height()-(opts.binder.scrollTop())-$(window).height();
if(!!opts.behavior&&this["_nearbottom_"+opts.behavior]!==undefined){return this["_nearbottom_"+opts.behavior].call(this)}this._debug("math:",pixelsFromWindowBottomToBottom,opts.pixelsFromNavToBottom);return(pixelsFromWindowBottomToBottom-opts.bufferPx<opts.pixelsFromNavToBottom)},_pausing:function infscr_pausing(pause){var opts=this.options;if(!!opts.behavior&&this["_pausing_"+opts.behavior]!==undefined){this["_pausing_"+opts.behavior].call(this,pause);return}if(pause!=="pause"&&pause!=="resume"&&pause!==null){this._debug("Invalid argument. Toggling pause value instead")
}pause=(pause&&(pause=="pause"||pause=="resume"))?pause:"toggle";switch(pause){case"pause":opts.state.isPaused=true;break;case"resume":opts.state.isPaused=false;break;case"toggle":opts.state.isPaused=!opts.state.isPaused;break}this._debug("Paused",opts.state.isPaused);return false},_setup:function infscr_setup(){var opts=this.options;if(!!opts.behavior&&this["_setup_"+opts.behavior]!==undefined){this["_setup_"+opts.behavior].call(this);return}this._binding("bind");return false},_showdonemsg:function infscr_showdonemsg(){var opts=this.options;
if(!!opts.behavior&&this["_showdonemsg_"+opts.behavior]!==undefined){this["_showdonemsg_"+opts.behavior].call(this);return}opts.loading.msg.find("img").hide().parent().find("div").html(opts.loading.finishedMsg).animate({opacity:1},2000,function(){$(this).parent().fadeOut("normal")});opts.errorCallback.call($(opts.contentSelector)[0],"done")},_validate:function infscr_validate(opts){for(var key in opts){if(key.indexOf&&key.indexOf("Selector")>-1&&$(opts[key]).length===0){this._debug("Your "+key+" found no elements.");
return false}}return true},bind:function infscr_bind(){this._binding("bind")},destroy:function infscr_destroy(){this.options.state.isDestroyed=true;return this._error("destroy")},pause:function infscr_pause(){this._pausing("pause")},resume:function infscr_resume(){this._pausing("resume")},retrieve:function infscr_retrieve(pageNum){var instance=this,opts=instance.options,path=opts.path,box,frag,desturl,method,condition,pageNum=pageNum||null,getPage=(!!pageNum)?pageNum:opts.state.currPage;beginAjax=function infscr_ajax(opts){opts.state.currPage++;
instance._debug("heading into ajax",path);box=$(opts.contentSelector).is("table")?$("<tbody/>"):$("<div/>");desturl=path.join(opts.state.currPage);method=(opts.dataType=="html"||opts.dataType=="json")?opts.dataType:"html+callback";if(opts.appendCallback&&opts.dataType=="html"){method+="+callback"}switch(method){case"html+callback":instance._debug("Using HTML via .load() method");box.load(desturl+" "+opts.itemSelector,null,function infscr_ajax_callback(responseText){instance._loadcallback(box,responseText)});
break;case"html":case"json":instance._debug("Using "+(method.toUpperCase())+" via $.ajax() method");$.ajax({url:desturl,dataType:opts.dataType,complete:function infscr_ajax_callback(jqXHR,textStatus){condition=(typeof(jqXHR.isResolved)!=="undefined")?(jqXHR.isResolved()):(textStatus==="success"||textStatus==="notmodified");(condition)?instance._loadcallback(box,jqXHR.responseText):instance._error("end")}});break}};if(!!opts.behavior&&this["retrieve_"+opts.behavior]!==undefined){this["retrieve_"+opts.behavior].call(this,pageNum);
return}if(opts.state.isDestroyed){this._debug("Instance is destroyed");return false}opts.state.isDuringAjax=true;opts.loading.start.call($(opts.contentSelector)[0],opts)},scroll:function infscr_scroll(){var opts=this.options,state=opts.state;if(!!opts.behavior&&this["scroll_"+opts.behavior]!==undefined){this["scroll_"+opts.behavior].call(this);return}if(state.isDuringAjax||state.isInvalidPage||state.isDone||state.isDestroyed||state.isPaused){return}if(!this._nearbottom()){return}this.retrieve()},toggle:function infscr_toggle(){this._pausing()
},unbind:function infscr_unbind(){this._binding("unbind")},update:function infscr_options(key){if($.isPlainObject(key)){this.options=$.extend(true,this.options,key)}}};$.fn.infinitescroll=function infscr_init(options,callback){var thisCall=typeof options;switch(thisCall){case"string":var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,"infinitescroll");if(!instance){return false}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return false}instance[options].apply(instance,args)
});break;case"object":this.each(function(){var instance=$.data(this,"infinitescroll");if(instance){instance.update(options)}else{instance=new $.infinitescroll(options,callback,this);if(!instance.failed){$.data(this,"infinitescroll",instance)}}});break}return this};var event=$.event,scrollTimeout;event.special.smartscroll={setup:function(){$(this).bind("scroll",event.special.smartscroll.handler)},teardown:function(){$(this).unbind("scroll",event.special.smartscroll.handler)},handler:function(event,execAsap){var context=this,args=arguments;
event.type="smartscroll";if(scrollTimeout){clearTimeout(scrollTimeout)}scrollTimeout=setTimeout(function(){$.event.handle.apply(context,args)},execAsap==="execAsap"?0:100)}};$.fn.smartscroll=function(fn){return fn?this.bind("smartscroll",fn):this.trigger("smartscroll",["execAsap"])}})(window,jQuery);(function(window,$,undefined){var document=window.document;var Modernizr=window.Modernizr;var capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1)};var prefixes="Moz Webkit O Ms".split(" ");var getStyleProperty=function(propName){var style=document.documentElement.style,prefixed;
if(typeof style[propName]==="string"){return propName}propName=capitalize(propName);for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof style[prefixed]==="string"){return prefixed}}};var transformProp=getStyleProperty("transform"),transitionProp=getStyleProperty("transitionProperty");
/*!
   * Modernizr v1.6ish: miniModernizr for Isotope
   * http://www.modernizr.com
   *
   * Developed by:
   * - Faruk Ates  http://farukat.es/
   * - Paul Irish  http://paulirish.com/
   *
   * Copyright (c) 2009-2010
   * Dual-licensed under the BSD or MIT licenses.
   * http://www.modernizr.com/license/
   */
var tests={csstransforms:function(){return !!transformProp
},csstransforms3d:function(){var test=!!getStyleProperty("perspective");if(test){var vendorCSSPrefixes=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),mediaQuery="@media ("+vendorCSSPrefixes.join("transform-3d),(")+"modernizr)",$style=$("<style>"+mediaQuery+"{#modernizr{height:3px}}</style>").appendTo("head"),$div=$('<div id="modernizr" />').appendTo("html");test=$div.height()===3;$div.remove();$style.remove()}return test},csstransitions:function(){return !!transitionProp}};var testName;if(Modernizr){for(testName in tests){if(!Modernizr.hasOwnProperty(testName)){Modernizr.addTest(testName,tests[testName])
}}}else{Modernizr=window.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var classes=" ";var result;for(testName in tests){result=tests[testName]();Modernizr[testName]=result;classes+=" "+(result?"":"no-")+testName}$("html").addClass(classes)}if(Modernizr.csstransforms){var transformFnNotations=Modernizr.csstransforms3d?{translate:function(position){return"translate3d("+position[0]+"px, "+position[1]+"px, 0) "},scale:function(scale){return"scale3d("+scale+", "+scale+", 1) "}}:{translate:function(position){return"translate("+position[0]+"px, "+position[1]+"px) "
},scale:function(scale){return"scale("+scale+") "}};var setIsoTransform=function(elem,name,value){var data=$.data(elem,"isoTransform")||{},newData={},fnName,transformObj={},transformValue;newData[name]=value;$.extend(data,newData);for(fnName in data){transformValue=data[fnName];transformObj[fnName]=transformFnNotations[fnName](transformValue)}var translateFn=transformObj.translate||"",scaleFn=transformObj.scale||"",valueFns=translateFn+scaleFn;$.data(elem,"isoTransform",data);elem.style[transformProp]=valueFns
};$.cssNumber.scale=true;$.cssHooks.scale={set:function(elem,value){setIsoTransform(elem,"scale",value)},get:function(elem,computed){var transform=$.data(elem,"isoTransform");return transform&&transform.scale?transform.scale:1}};$.fx.step.scale=function(fx){$.cssHooks.scale.set(fx.elem,fx.now+fx.unit)};$.cssNumber.translate=true;$.cssHooks.translate={set:function(elem,value){setIsoTransform(elem,"translate",value)},get:function(elem,computed){var transform=$.data(elem,"isoTransform");return transform&&transform.translate?transform.translate:[0,0]
}}}var transitionEndEvent,transitionDurProp;if(Modernizr.csstransitions){transitionEndEvent={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd",transitionProperty:"transitionEnd"}[transitionProp];transitionDurProp=getStyleProperty("transitionDuration")}var $event=$.event,resizeTimeout;$event.special.smartresize={setup:function(){$(this).bind("resize",$event.special.smartresize.handler)},teardown:function(){$(this).unbind("resize",$event.special.smartresize.handler)
},handler:function(event,execAsap){var context=this,args=arguments;event.type="smartresize";if(resizeTimeout){clearTimeout(resizeTimeout)}resizeTimeout=setTimeout(function(){jQuery.event.handle.apply(context,args)},execAsap==="execAsap"?0:100)}};$.fn.smartresize=function(fn){return fn?this.bind("smartresize",fn):this.trigger("smartresize",["execAsap"])};$.Isotope=function(options,element,callback){this.element=$(element);this._create(options);this._init(callback)};var isoContainerStyles=["width","height"];var $window=$(window);
$.Isotope.settings={resizable:true,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:0.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:false,duration:800},sortBy:"original-order",sortAscending:true,resizesContainer:true,transformsEnabled:!$.browser.opera,itemPositionDataEnabled:false};$.Isotope.prototype={_create:function(options){this.options=$.extend({},$.Isotope.settings,options);
this.styleQueue=[];this.elemCount=0;var elemStyle=this.element[0].style;this.originalStyle={};var containerStyles=isoContainerStyles.slice(0);for(var prop in this.options.containerStyle){containerStyles.push(prop)}for(var i=0,len=containerStyles.length;i<len;i++){prop=containerStyles[i];this.originalStyle[prop]=elemStyle[prop]||""}this.element.css(this.options.containerStyle);this._updateAnimationEngine();this._updateUsingTransforms();var originalOrderSorter={"original-order":function($elem,instance){instance.elemCount++;
return instance.elemCount},random:function(){return Math.random()}};this.options.getSortData=$.extend(this.options.getSortData,originalOrderSorter);this.reloadItems();this.offset={left:parseInt((this.element.css("padding-left")||0),10),top:parseInt((this.element.css("padding-top")||0),10)};var instance=this;setTimeout(function(){instance.element.addClass(instance.options.containerClass)},0);if(this.options.resizable){$window.bind("smartresize.isotope",function(){instance.resize()})}this.element.delegate("."+this.options.hiddenClass,"click",function(){return false
})},_getAtoms:function($elems){var selector=this.options.itemSelector,$atoms=selector?$elems.filter(selector).add($elems.find(selector)):$elems,atomStyle={position:"absolute"};if(this.usingTransforms){atomStyle.left=0;atomStyle.top=0}$atoms.css(atomStyle).addClass(this.options.itemClass);this.updateSortData($atoms,true);return $atoms},_init:function(callback){this.$filteredAtoms=this._filter(this.$allAtoms);this._sort();this.reLayout(callback)},option:function(opts){if($.isPlainObject(opts)){this.options=$.extend(true,this.options,opts);
var updateOptionFn;for(var optionName in opts){updateOptionFn="_update"+capitalize(optionName);if(this[updateOptionFn]){this[updateOptionFn]()}}}},_updateAnimationEngine:function(){var animationEngine=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"");var isUsingJQueryAnimation;switch(animationEngine){case"css":case"none":isUsingJQueryAnimation=false;break;case"jquery":isUsingJQueryAnimation=true;break;default:isUsingJQueryAnimation=!Modernizr.csstransitions}this.isUsingJQueryAnimation=isUsingJQueryAnimation;
this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var usingTransforms=this.usingTransforms=this.options.transformsEnabled&&Modernizr.csstransforms&&Modernizr.csstransitions&&!this.isUsingJQueryAnimation;if(!usingTransforms){delete this.options.hiddenStyle.scale;delete this.options.visibleStyle.scale}this.getPositionStyles=usingTransforms?this._translate:this._positionAbs},_filter:function($atoms){var filter=this.options.filter===""?"*":this.options.filter;
if(!filter){return $atoms}var hiddenClass=this.options.hiddenClass,hiddenSelector="."+hiddenClass,$hiddenAtoms=$atoms.filter(hiddenSelector),$atomsToShow=$hiddenAtoms;if(filter!=="*"){$atomsToShow=$hiddenAtoms.filter(filter);var $atomsToHide=$atoms.not(hiddenSelector).not(filter).addClass(hiddenClass);this.styleQueue.push({$el:$atomsToHide,style:this.options.hiddenStyle})}this.styleQueue.push({$el:$atomsToShow,style:this.options.visibleStyle});$atomsToShow.removeClass(hiddenClass);return $atoms.filter(filter)
},updateSortData:function($atoms,isIncrementingElemCount){var instance=this,getSortData=this.options.getSortData,$this,sortData;$atoms.each(function(){$this=$(this);sortData={};for(var key in getSortData){if(!isIncrementingElemCount&&key==="original-order"){sortData[key]=$.data(this,"isotope-sort-data")[key]}else{sortData[key]=getSortData[key]($this,instance)}}$.data(this,"isotope-sort-data",sortData)})},_sort:function(){var sortBy=this.options.sortBy,getSorter=this._getSorter,sortDir=this.options.sortAscending?1:-1,sortFn=function(alpha,beta){var a=getSorter(alpha,sortBy),b=getSorter(beta,sortBy);
if(a===b&&sortBy!=="original-order"){a=getSorter(alpha,"original-order");b=getSorter(beta,"original-order")}return((a>b)?1:(a<b)?-1:0)*sortDir};this.$filteredAtoms.sort(sortFn)},_getSorter:function(elem,sortBy){return $.data(elem,"isotope-sort-data")[sortBy]},_translate:function(x,y){return{translate:[x,y]}},_positionAbs:function(x,y){return{left:x,top:y}},_pushPosition:function($elem,x,y){x=Math.round(x+this.offset.left);y=Math.round(y+this.offset.top);var position=this.getPositionStyles(x,y);this.styleQueue.push({$el:$elem,style:position});
if(this.options.itemPositionDataEnabled){$elem.data("isotope-item-position",{x:x,y:y})}},layout:function($elems,callback){var layoutMode=this.options.layoutMode;this["_"+layoutMode+"Layout"]($elems);if(this.options.resizesContainer){var containerStyle=this["_"+layoutMode+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:containerStyle})}this._processStyleQueue($elems,callback);this.isLaidOut=true},_processStyleQueue:function($elems,callback){var styleFn=!this.isLaidOut?"css":(this.isUsingJQueryAnimation?"animate":"css"),animOpts=this.options.animationOptions,onLayout=this.options.onLayout,objStyleFn,processor,triggerCallbackNow,callbackFn;
processor=function(i,obj){obj.$el[styleFn](obj.style,animOpts)};if(this._isInserting&&this.isUsingJQueryAnimation){processor=function(i,obj){objStyleFn=obj.$el.hasClass("no-transition")?"css":styleFn;obj.$el[objStyleFn](obj.style,animOpts)}}else{if(callback||onLayout||animOpts.complete){var isCallbackTriggered=false,callbacks=[callback,onLayout,animOpts.complete],instance=this;triggerCallbackNow=true;callbackFn=function(){if(isCallbackTriggered){return}var hollaback;for(var i=0,len=callbacks.length;i<len;i++){hollaback=callbacks[i];
if(typeof hollaback==="function"){hollaback.call(instance.element,$elems,instance)}}isCallbackTriggered=true};if(this.isUsingJQueryAnimation&&styleFn==="animate"){animOpts.complete=callbackFn;triggerCallbackNow=false}else{if(Modernizr.csstransitions){var i=0,firstItem=this.styleQueue[0],testElem=firstItem&&firstItem.$el,styleObj;while(!testElem||!testElem.length){styleObj=this.styleQueue[i++];if(!styleObj){return}testElem=styleObj.$el}var duration=parseFloat(getComputedStyle(testElem[0])[transitionDurProp]);
if(duration>0){processor=function(i,obj){obj.$el[styleFn](obj.style,animOpts).one(transitionEndEvent,callbackFn)};triggerCallbackNow=false}}}}}$.each(this.styleQueue,processor);if(triggerCallbackNow){callbackFn()}this.styleQueue=[]},resize:function(){if(this["_"+this.options.layoutMode+"ResizeChanged"]()){this.reLayout()}},reLayout:function(callback){this["_"+this.options.layoutMode+"Reset"]();this.layout(this.$filteredAtoms,callback)},addItems:function($content,callback){var $newAtoms=this._getAtoms($content);
this.$allAtoms=this.$allAtoms.add($newAtoms);if(callback){callback($newAtoms)}},insert:function($content,callback){this.element.append($content);var instance=this;this.addItems($content,function($newAtoms){var $newFilteredAtoms=instance._filter($newAtoms);instance._addHideAppended($newFilteredAtoms);instance._sort();instance.reLayout();instance._revealAppended($newFilteredAtoms,callback)})},appended:function($content,callback){var instance=this;this.addItems($content,function($newAtoms){instance._addHideAppended($newAtoms);
instance.layout($newAtoms);instance._revealAppended($newAtoms,callback)})},_addHideAppended:function($newAtoms){this.$filteredAtoms=this.$filteredAtoms.add($newAtoms);$newAtoms.addClass("no-transition");this._isInserting=true;this.styleQueue.push({$el:$newAtoms,style:this.options.hiddenStyle})},_revealAppended:function($newAtoms,callback){var instance=this;setTimeout(function(){$newAtoms.removeClass("no-transition");instance.styleQueue.push({$el:$newAtoms,style:instance.options.visibleStyle});instance._isInserting=false;
instance._processStyleQueue($newAtoms,callback)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function($content,callback){var instance=this;var removeContent=function(){instance.$allAtoms=instance.$allAtoms.not($content);$content.remove();if(callback){callback.call(instance.element)}};if($content.filter(":not(."+this.options.hiddenClass+")").length){this.styleQueue.push({$el:$content,style:this.options.hiddenStyle});this.$filteredAtoms=this.$filteredAtoms.not($content);
this._sort();this.reLayout(removeContent)}else{removeContent()}},shuffle:function(callback){this.updateSortData(this.$allAtoms);this.options.sortBy="random";this._sort();this.reLayout(callback)},destroy:function(){var usingTransforms=this.usingTransforms;var options=this.options;this.$allAtoms.removeClass(options.hiddenClass+" "+options.itemClass).each(function(){var style=this.style;style.position="";style.top="";style.left="";style.opacity="";if(usingTransforms){style[transformProp]=""}});var elemStyle=this.element[0].style;
for(var prop in this.originalStyle){elemStyle[prop]=this.originalStyle[prop]}this.element.unbind(".isotope").undelegate("."+options.hiddenClass,"click").removeClass(options.containerClass).removeData("isotope");$window.unbind(".isotope")},_getSegments:function(isRows){var namespace=this.options.layoutMode,measure=isRows?"rowHeight":"columnWidth",size=isRows?"height":"width",segmentsName=isRows?"rows":"cols",containerSize=this.element[size](),segments,segmentSize=this.options[namespace]&&this.options[namespace][measure]||this.$filteredAtoms["outer"+capitalize(size)](true)||containerSize;
segments=Math.floor(containerSize/segmentSize);segments=Math.max(segments,1);this[namespace][segmentsName]=segments;this[namespace][measure]=segmentSize},_checkIfSegmentsChanged:function(isRows){var namespace=this.options.layoutMode,segmentsName=isRows?"rows":"cols",prevSegments=this[namespace][segmentsName];this._getSegments(isRows);return(this[namespace][segmentsName]!==prevSegments)},_masonryReset:function(){this.masonry={};this._getSegments();var i=this.masonry.cols;this.masonry.colYs=[];while(i--){this.masonry.colYs.push(0)
}},_masonryLayout:function($elems){var instance=this,props=instance.masonry;$elems.each(function(){var $this=$(this),colSpan=Math.ceil($this.outerWidth(true)/props.columnWidth);colSpan=Math.min(colSpan,props.cols);if(colSpan===1){instance._masonryPlaceBrick($this,props.colYs)}else{var groupCount=props.cols+1-colSpan,groupY=[],groupColY,i;for(i=0;i<groupCount;i++){groupColY=props.colYs.slice(i,i+colSpan);groupY[i]=Math.max.apply(Math,groupColY)}instance._masonryPlaceBrick($this,groupY)}})},_masonryPlaceBrick:function($brick,setY){var minimumY=Math.min.apply(Math,setY),shortCol=0;
for(var i=0,len=setY.length;i<len;i++){if(setY[i]===minimumY){shortCol=i;break}}var x=this.masonry.columnWidth*shortCol,y=minimumY;this._pushPosition($brick,x,y);var setHeight=minimumY+$brick.outerHeight(true),setSpan=this.masonry.cols+1-len;for(i=0;i<setSpan;i++){this.masonry.colYs[shortCol+i]=setHeight}},_masonryGetContainerSize:function(){var containerHeight=Math.max.apply(Math,this.masonry.colYs);return{height:containerHeight}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}
},_fitRowsLayout:function($elems){var instance=this,containerWidth=this.element.width(),props=this.fitRows;$elems.each(function(){var $this=$(this),atomW=$this.outerWidth(true),atomH=$this.outerHeight(true);if(props.x!==0&&atomW+props.x>containerWidth){props.x=0;props.y=props.height}instance._pushPosition($this,props.x,props.y);props.height=Math.max(props.y+atomH,props.height);props.x+=atomW})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return true
},_cellsByRowReset:function(){this.cellsByRow={index:0};this._getSegments();this._getSegments(true)},_cellsByRowLayout:function($elems){var instance=this,props=this.cellsByRow;$elems.each(function(){var $this=$(this),col=props.index%props.cols,row=Math.floor(props.index/props.cols),x=(col+0.5)*props.columnWidth-$this.outerWidth(true)/2,y=(row+0.5)*props.rowHeight-$this.outerHeight(true)/2;instance._pushPosition($this,x,y);props.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}
},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function($elems){var instance=this;$elems.each(function(i){var $this=$(this);instance._pushPosition($this,0,instance.straightDown.y);instance.straightDown.y+=$this.outerHeight(true)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return true},_masonryHorizontalReset:function(){this.masonryHorizontal={};
this._getSegments(true);var i=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(i--){this.masonryHorizontal.rowXs.push(0)}},_masonryHorizontalLayout:function($elems){var instance=this,props=instance.masonryHorizontal;$elems.each(function(){var $this=$(this),rowSpan=Math.ceil($this.outerHeight(true)/props.rowHeight);rowSpan=Math.min(rowSpan,props.rows);if(rowSpan===1){instance._masonryHorizontalPlaceBrick($this,props.rowXs)}else{var groupCount=props.rows+1-rowSpan,groupX=[],groupRowX,i;for(i=0;
i<groupCount;i++){groupRowX=props.rowXs.slice(i,i+rowSpan);groupX[i]=Math.max.apply(Math,groupRowX)}instance._masonryHorizontalPlaceBrick($this,groupX)}})},_masonryHorizontalPlaceBrick:function($brick,setX){var minimumX=Math.min.apply(Math,setX),smallRow=0;for(var i=0,len=setX.length;i<len;i++){if(setX[i]===minimumX){smallRow=i;break}}var x=minimumX,y=this.masonryHorizontal.rowHeight*smallRow;this._pushPosition($brick,x,y);var setWidth=minimumX+$brick.outerWidth(true),setSpan=this.masonryHorizontal.rows+1-len;
for(i=0;i<setSpan;i++){this.masonryHorizontal.rowXs[smallRow+i]=setWidth}},_masonryHorizontalGetContainerSize:function(){var containerWidth=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:containerWidth}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(true)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function($elems){var instance=this,containerHeight=this.element.height(),props=this.fitColumns;$elems.each(function(){var $this=$(this),atomW=$this.outerWidth(true),atomH=$this.outerHeight(true);
if(props.y!==0&&atomH+props.y>containerHeight){props.x=props.width;props.y=0}instance._pushPosition($this,props.x,props.y);props.width=Math.max(props.x+atomW,props.width);props.y+=atomH})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return true},_cellsByColumnReset:function(){this.cellsByColumn={index:0};this._getSegments();this._getSegments(true)},_cellsByColumnLayout:function($elems){var instance=this,props=this.cellsByColumn;$elems.each(function(){var $this=$(this),col=Math.floor(props.index/props.rows),row=props.index%props.rows,x=(col+0.5)*props.columnWidth-$this.outerWidth(true)/2,y=(row+0.5)*props.rowHeight-$this.outerHeight(true)/2;
instance._pushPosition($this,x,y);props.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(true)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function($elems){var instance=this;$elems.each(function(i){var $this=$(this);instance._pushPosition($this,instance.straightAcross.x,0);instance.straightAcross.x+=$this.outerWidth(true)
})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return true}};
/*!
   * jQuery imagesLoaded plugin v1.1.0
   * http://github.com/desandro/imagesloaded
   *
   * MIT License. by Paul Irish et al.
   */
$.fn.imagesLoaded=function(callback){var $this=this,$images=$this.find("img").add($this.filter("img")),len=$images.length,blank="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",loaded=[];function triggerCallback(){callback.call($this,$images)
}function imgLoaded(event){var img=event.target;if(img.src!==blank&&$.inArray(img,loaded)===-1){loaded.push(img);if(--len<=0){setTimeout(triggerCallback);$images.unbind(".imagesLoaded",imgLoaded)}}}if(!len){triggerCallback()}$images.bind("load.imagesLoaded error.imagesLoaded",imgLoaded).each(function(){var src=this.src;this.src=blank;this.src=src});return $this};var logError=function(message){if(window.console){window.console.error(message)}};$.fn.isotope=function(options,callback){if(typeof options==="string"){var args=Array.prototype.slice.call(arguments,1);
this.each(function(){var instance=$.data(this,"isotope");if(!instance){logError("cannot call methods on isotope prior to initialization; attempted to call method '"+options+"'");return}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for isotope instance");return}instance[options].apply(instance,args)})}else{this.each(function(){var instance=$.data(this,"isotope");if(instance){instance.option(options);instance._init(callback)}else{$.data(this,"isotope",new $.Isotope(options,this,callback))
}})}return this}})(window,jQuery);$.fn.emoji=function(){return this.each(function(){$(this).html($(this).html().replace(/([\ue001-\ue537])/g,$.fn.emoji.replacer))})};$.fn.emoji.replacer=function(str,p1){return p1.charCodeAt(0).toString(16).toUpperCase().replace(/^([\da-f]+)$/i,'<img src="/assets/img/emoji/emoji-$1.png" alt="emoji" />')};jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b
},easeOutQuad:function(x,t,b,c,d){return -c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b}return -c/2*((--t)*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t+b}return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b
}return -c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t*t+b}return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return -c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return -c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b
},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0){return b}if(t==d){return b+c}if((t/=d/2)<1){return c/2*Math.pow(2,10*(t-1))+b}return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return -c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1){return -c/2*(Math.sqrt(1-t*t)-1)+b}return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;
var p=0;var a=c;if(t==0){return b}if((t/=d)==1){return b+c}if(!p){p=d*0.3}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}return -(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b}if((t/=d)==1){return b+c}if(!p){p=d*0.3}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;
var p=0;var a=c;if(t==0){return b}if((t/=d/2)==2){return b+c}if(!p){p=d*(0.3*1.5)}if(a<Math.abs(c)){a=c;var s=p/4}else{var s=p/(2*Math.PI)*Math.asin(c/a)}if(t<1){return -0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*0.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158
}if((t/=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b}return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b}else{if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b}else{if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b}else{return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b}}}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2){return jQuery.easing.easeInBounce(x,t*2,0,c,d)*0.5+b
}return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*0.5+c*0.5+b}});window.JSON||(window.JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);
case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i){return"null"}gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1){h[c]=str(c,i)||"null"}return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1){d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}}else{for(d in i){Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))
}}return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number"){for(d=0;d<c;d+=1){indent+=" "}}else{typeof c=="string"&&(indent=c)}rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number"){return str("",{"":a})}throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object"){for(c in e){Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c])
}}return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})}(),function(a,b){var c=a.History=a.History||{},d=a.jQuery;
if(typeof c.Adapter!="undefined"){throw new Error("History.js Adapter has already been loaded...")}c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},typeof c.init!="undefined"&&c.init()}(window),function(a,b){var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.History=a.History||{};if(typeof g.initHtml4!="undefined"){throw new Error("History.js HTML4 Support has already been loaded...")
}g.initHtml4=function(){if(typeof g.initHtml4.initialized!="undefined"){return !1}g.initHtml4.initialized=!0,g.enabled=!0,g.savedHashes=[],g.isLastHash=function(a){var b=g.getHashByIndex(),c;return c=a===b,c},g.saveHash=function(a){return g.isLastHash(a)?!1:(g.savedHashes.push(a),!0)},g.getHashByIndex=function(a){var b=null;return typeof a=="undefined"?b=g.savedHashes[g.savedHashes.length-1]:a<0?b=g.savedHashes[g.savedHashes.length+a]:b=g.savedHashes[a],b},g.discardedHashes={},g.discardedStates={},g.discardState=function(a,b,c){var d=g.getHashByState(a),e;
return e={discardedState:a,backState:c,forwardState:b},g.discardedStates[d]=e,!0},g.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return g.discardedHashes[a]=d,!0},g.discardedState=function(a){var b=g.getHashByState(a),c;return c=g.discardedStates[b]||!1,c},g.discardedHash=function(a){var b=g.discardedHashes[a]||!1;return b},g.recycleState=function(a){var b=g.getHashByState(a);return g.discardedState(a)&&delete g.discardedStates[b],!0},g.emulated.hashChange&&(g.hashChangeInit=function(){g.checkerFunction=null;
var b="",d,e,h,i;return g.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),h="",i=!1,g.checkerFunction=function(){if(i){return !1}i=!0;var c=g.getHash()||"",d=g.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==b?(b=c,d!==c&&(h=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),e.contentWindow.document.location.hash=g.escapeHash(c)),g.Adapter.trigger(a,"hashchange")):d!==h&&(h=d,g.setHash(d,!1)),i=!1,!0
}):g.checkerFunction=function(){var c=g.getHash();return c!==b&&(b=c,g.Adapter.trigger(a,"hashchange")),!0},g.intervalList.push(f(g.checkerFunction,g.options.hashChangeInterval)),!0},g.Adapter.onDomLoad(g.hashChangeInit)),g.emulated.pushState&&(g.onHashChange=function(b){var d=b&&b.newURL||c.location.href,e=g.getHashByUrl(d),f=null,h=null,i=null,j;return g.isLastHash(e)?(g.busy(!1),!1):(g.doubleCheckComplete(),g.saveHash(e),e&&g.isTraditionalAnchor(e)?(g.Adapter.trigger(a,"anchorchange"),g.busy(!1),!1):(f=g.extractState(g.getFullUrl(e||c.location.href,!1),!0),g.isLastSavedState(f)?(g.busy(!1),!1):(h=g.getHashByState(f),j=g.discardedState(f),j?(g.getHashByIndex(-2)===g.getHashByState(j.forwardState)?g.back(!1):g.forward(!1),!1):(g.pushState(f.data,f.title,f.url,!1),!0))))
},g.Adapter.bind(a,"hashchange",g.onHashChange),g.pushState=function(b,d,e,f){if(g.getHashByUrl(e)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(f!==!1&&g.busy()){return g.pushQueue({scope:g,callback:g.pushState,args:arguments,queue:f}),!1}g.busy(!0);var h=g.createStateObject(b,d,e),i=g.getHashByState(h),j=g.getState(!1),k=g.getHashByState(j),l=g.getHash();return g.storeState(h),g.expectedStateId=h.id,g.recycleState(h),g.setTitle(h),i===k?(g.busy(!1),!1):i!==l&&i!==g.getShortUrl(c.location.href)?(g.setHash(i,!1),!1):(g.saveState(h),g.Adapter.trigger(a,"statechange"),g.busy(!1),!0)
},g.replaceState=function(a,b,c,d){if(g.getHashByUrl(c)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(d!==!1&&g.busy()){return g.pushQueue({scope:g,callback:g.replaceState,args:arguments,queue:d}),!1}g.busy(!0);var e=g.createStateObject(a,b,c),f=g.getState(!1),h=g.getStateByIndex(-2);return g.discardState(f,e,h),g.pushState(e.data,e.title,e.url,!1),!0}),g.emulated.pushState&&g.getHash()&&!g.emulated.hashChange&&g.Adapter.onDomLoad(function(){g.Adapter.trigger(a,"hashchange")
})},typeof g.init!="undefined"&&g.init()}(window),function(a,b){var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode;if(typeof m.init!="undefined"){throw new Error("History.js Core has already been loaded...")}m.init=function(){return typeof m.Adapter=="undefined"?!1:(typeof m.initCore!="undefined"&&m.initCore(),typeof m.initHtml4!="undefined"&&m.initHtml4(),!0)
},m.initCore=function(){if(typeof m.initCore.initialized!="undefined"){return !1}m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1000,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;
if(typeof b!="undefined"&&b!==null){for(a=0;a<b.length;a++){j(b[a])}m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a=typeof c!="undefined"&&typeof c.log!="undefined"&&typeof c.log.apply!="undefined",b=d.getElementById("log"),e,f,g,h,i;a?(h=Array.prototype.slice.call(arguments),e=h.shift(),typeof c.debug!="undefined"?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n";for(f=1,g=arguments.length;f<g;++f){i=arguments[f];if(typeof i=="object"&&typeof k!="undefined"){try{i=k.stringify(i)
}catch(j){}}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached=typeof m.getInternetExplorerMajorVersion.cached!="undefined"?m.getInternetExplorerMajorVersion.cached:function(){var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");while((b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0]){}return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached=typeof m.isInternetExplorer.cached!="undefined"?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());
return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange" in a||"onhashchange" in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a){return !1
}return !0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);if(d.location.port||!1){a+=":"+d.location.port}return a+="/",a},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return a.length===1&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a
},m.getPageUrl=function(){var a=m.getState(!1,!1),b=(a||{}).url||d.location.href,c;return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"}),c},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b=typeof b=="undefined"?!0:b,/[a-z]+\:\/\//.test(a)||(d==="/"?c=m.getRootUrl()+a.replace(/^\/+/,""):d==="#"?c=m.getPageUrl().replace(/#.*/,"")+a:d==="?"?c=m.getPageUrl().replace(/[\?#].*/,"")+a:b?c=m.getBaseUrl()+a.replace(/^(\.\/)+/,""):c=m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")
},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),b},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}
},m.getState=function(a,b){typeof a=="undefined"&&(a=!0),typeof b=="undefined"&&(b=!0);var c=m.getLastSavedState();return !c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b=m.extractId(a.url),c;if(!b){c=m.getStateString(a);if(typeof m.stateToId[c]!="undefined"){b=m.stateToId[c]}else{if(typeof m.store.stateToId[c]!="undefined"){b=m.store.stateToId[c]}else{for(;;){b=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof m.idToState[b]=="undefined"&&typeof m.store.idToState[b]=="undefined"){break
}}m.stateToId[c]=b,m.idToState[b]=a}}}return b},m.normalizeState=function(a){var b,c;if(!a||typeof a!="object"){a={}}if(typeof a.normalized!="undefined"){return a}if(!a.data||typeof a.data!="object"){a.data={}}b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data);if(b.title||c){b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id
}return b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d),d},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c),d},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id,c
},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash,c},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c=null,d,e;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),!c&&b&&!m.isTraditionalAnchor(a)&&(c=m.createStateObject(null,null,e))),c
},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b=!1,c;return c=m.extractState(a.url),b=c&&c.id!==a.id,b},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b=!1,c,d,e;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b
},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return typeof a=="undefined"?b=m.savedStates[m.savedStates.length-1]:a<0?b=m.savedStates[m.savedStates.length+a]:b=m.savedStates[a],b},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){var c=b,d;for(;;){d=a.unescape(c);if(d===c){break}c=d}return c},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b),b
},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c
},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b),b},m.setTitle=function(a){var b=a.title,c;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){typeof a!="undefined"?m.busy.flag=a:typeof m.busy.flag=="undefined"&&(m.busy.flag=!1);if(!m.busy.flag){h(m.busy.timeout);
var b=function(){var a,c,d;if(m.busy.flag){return}for(a=m.queues.length-1;a>=0;--a){c=m.queues[a];if(c.length===0){continue}d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay)}};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return typeof a=="function"&&(a={callback:a}),typeof b!="undefined"&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m
},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b=m.extractState(d.location.href),c;
if(!m.isLastSavedState(b)){c=b}else{return}return c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0){for(c=1;c<=a;
++c){m.forward(b)}}else{if(!(a<0)){throw new Error("History.go: History.go requires a positive or negative integer passed.")}for(c=-1;c>=a;--c){m.back(b)}}return m};if(m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else{m.onPopState=function(b,c){var e=!1,f=!1,g,h;return m.doubleCheckComplete(),g=m.getHash(),g?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,e?f=m.getStateById(e):m.expectedStateId?f=m.getStateById(m.expectedStateId):f=m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))
},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(e!==!1&&m.busy()){return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1}m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")
}if(e!==!1&&m.busy()){return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1}m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0}}if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else{m.store={},m.normalizeStore()}m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;
try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState){if(!m.idToState.hasOwnProperty(b)){continue}a.idToState[b]=m.idToState[b]}for(b in m.urlToId){if(!m.urlToId.hasOwnProperty(b)){continue}a.urlToId[b]=m.urlToId[b]}for(b in m.stateToId){if(!m.stateToId.hasOwnProperty(b)){continue}a.stateToId[b]=m.stateToId[b]}m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload));
if(!m.emulated.pushState){m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval));if(e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla"){m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})}}},m.init()}(window);
/*!
 * fancyBox - jQuery Plugin
 * version: 2.0.6 (16/04/2012)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 * 
 * NOTE: Stamped owns a single-domain commercial license to use the FancyBox library.
 */
(function(window,document,$,undefined){var W=$(window),D=$(document),F=$.fancybox=function(){F.open.apply(this,arguments)
},didResize=false,resizeTimer=null,isTouch=document.createTouch!==undefined,isString=function(str){return $.type(str)==="string"},isPercentage=function(str){return isString(str)&&str.indexOf("%")>0},getValue=function(value,dim){if(dim&&isPercentage(value)){value=F.getViewport()[dim]/100*parseInt(value,10)}return Math.round(value)+"px"};$.extend(F,{version:"2.0.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:true,autoResize:!isTouch,autoCenter:!isTouch,fitToView:true,aspectRatio:false,topRatio:0.5,fixed:false,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"'+($.browser.msie?' allowtransparency="true"':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">Whoops! Looks like we messed something up on our end. Our bad.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="close-button"><div class="close-button-inner"></div></a>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:300,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:300,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:0.8,css:{cursor:"pointer"},closeClick:true},title:{type:"float"}},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},coming:null,current:null,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(group,opts){F.close(true);
if(group&&!$.isArray(group)){group=group instanceof $?$(group).get():[group]}F.isActive=true;F.opts=$.extend(true,{},F.defaults,opts);if($.isPlainObject(opts)&&opts.keys!==undefined){F.opts.keys=opts.keys?$.extend({},F.defaults.keys,opts.keys):false}F.group=group;F._start(F.opts.index||0)},cancel:function(){if(F.coming&&false===F.trigger("onCancel")){return}F.coming=null;F.hideLoading();if(F.ajaxLoad){F.ajaxLoad.abort()}F.ajaxLoad=null;if(F.imgPreload){F.imgPreload.onload=F.imgPreload.onabort=F.imgPreload.onerror=null
}},close:function(a){F.cancel();if(!F.current||false===F.trigger("beforeClose")){return}F.unbindEvents();if(!F.isOpen||(a&&a[0]===true)){$(".fancybox-wrap").stop().trigger("onReset").remove();F._afterZoomOut()}else{F.isOpen=F.isOpened=false;$(".fancybox-item, .fancybox-nav").remove();F.wrap.stop(true).removeClass("fancybox-opened");F.inner.css("overflow","hidden");F.transitions[F.current.closeMethod]()}},play:function(a){var clear=function(){clearTimeout(F.player.timer)},set=function(){clear();if(F.current&&F.player.isActive){F.player.timer=setTimeout(F.next,F.current.playSpeed)
}},stop=function(){clear();$("body").unbind(".player");F.player.isActive=false;F.trigger("onPlayEnd")},start=function(){if(F.current&&(F.current.loop||F.current.index<F.group.length-1)){F.player.isActive=true;$("body").bind({"afterShow.player onUpdate.player":set,"onCancel.player beforeClose.player":stop,"beforeLoad.player":clear});set();F.trigger("onPlayStart")}};if(F.player.isActive||(a&&a[0]===false)){stop()}else{start()}},next:function(){if(F.current){F.jumpto(F.current.index+1)}},prev:function(){if(F.current){F.jumpto(F.current.index-1)
}},jumpto:function(index){if(!F.current){return}index=parseInt(index,10);if(F.group.length>1&&F.current.loop){if(index>=F.group.length){index=0}else{if(index<0){index=F.group.length-1}}}if(F.group[index]!==undefined){F.cancel();F._start(index)}},reposition:function(e,onlyAbsolute){var pos;if(F.isOpen){pos=F._getPosition(onlyAbsolute);if(e&&e.type==="scroll"){delete pos.position;F.wrap.stop(true,true).animate(pos,200)}else{F.wrap.css(pos)}}},update:function(e){if(!F.isOpen){return}if(!didResize){resizeTimer=setTimeout(function(){var current=F.current,anyway=!e||(e&&e.type==="orientationchange");
if(didResize){didResize=false;if(!current){return}if((!e||e.type!=="scroll")||anyway){if(current.autoSize&&current.type!=="iframe"){F.inner.height("auto");current.height=F.inner.height()}if(current.autoResize||anyway){F._setDimension()}if(current.canGrow&&current.type!=="iframe"){F.inner.height("auto")}}if(current.autoCenter||anyway){F.reposition(e)}F.trigger("onUpdate")}},200)}didResize=true},toggle:function(){if(F.isOpen){F.current.fitToView=!F.current.fitToView;F.update()}},hideLoading:function(){D.unbind("keypress.fb");
$("#fancybox-loading").remove()},showLoading:function(){F.hideLoading();D.bind("keypress.fb",function(e){if(e.keyCode===27){e.preventDefault();F.cancel()}});$('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo("body")},getViewport:function(){return{x:W.scrollLeft(),y:W.scrollTop(),w:isTouch&&window.innerWidth?window.innerWidth:W.width(),h:isTouch&&window.innerHeight?window.innerHeight:W.height()}},unbindEvents:function(){if(F.wrap){F.wrap.unbind(".fb")}D.unbind(".fb");W.unbind(".fb")},bindEvents:function(){var current=F.current,keys=current.keys;
if(!current){return}W.bind("resize.fb orientationchange.fb"+(current.autoCenter&&!current.fixed?" scroll.fb":""),F.update);if(keys){D.bind("keydown.fb",function(e){var code,target=e.target||e.srcElement;if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&!(target&&(target.type||$(target).is("[contenteditable]")))){code=e.keyCode;if($.inArray(code,keys.close)>-1){F.close();e.preventDefault()}else{if($.inArray(code,keys.next)>-1){F.next();e.preventDefault()}else{if($.inArray(code,keys.prev)>-1){F.prev();e.preventDefault()
}}}}})}if($.fn.mousewheel&&current.mouseWheel&&F.group.length>1){F.wrap.bind("mousewheel.fb",function(e,delta){var target=e.target||null;if(delta!==0&&(!target||target.clientHeight===0||(target.scrollHeight===target.clientHeight&&target.scrollWidth===target.clientWidth))){e.preventDefault();F[delta>0?"prev":"next"]()}})}},trigger:function(event,o){var ret,obj=o||F[$.inArray(event,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(!obj){return}if($.isFunction(obj[event])){ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1))
}if(ret===false){return false}if(obj.helpers){$.each(obj.helpers,function(helper,opts){if(opts&&$.isPlainObject(F.helpers[helper])&&$.isFunction(F.helpers[helper][event])){F.helpers[helper][event](opts,obj)}})}$.event.trigger(event+".fb")},isImage:function(str){return isString(str)&&str.match(/\.(jpe?g|gif|png|bmp)((\?|#).*)?$/i)},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i)},_start:function(index){var coming={},element=F.group[index]||null,isDom,href,type,rez,hrefParts;if(element&&(element.nodeType||element instanceof $)){isDom=true;
if($.metadata){coming=$(element).metadata()}}coming=$.extend(true,{},F.opts,{index:index,element:element},($.isPlainObject(element)?element:coming));$.each(["href","title","content","type"],function(i,v){coming[v]=F.opts[v]||(isDom&&$(element).attr(v))||coming[v]||null});if(typeof coming.margin==="number"){coming.margin=[coming.margin,coming.margin,coming.margin,coming.margin]}if(coming.modal){$.extend(true,coming,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:false}}})
}F.coming=coming;if(false===F.trigger("beforeLoad")){F.coming=null;return}type=coming.type;href=coming.href||element;if(!type){if(isDom){type=$(element).data("fancybox-type");if(!type){rez=element.className.match(/fancybox\.(\w+)/);type=rez?rez[1]:null}}if(!type&&isString(href)){if(F.isImage(href)){type="image"}else{if(F.isSWF(href)){type="swf"}else{if(href.match(/^#/)){type="inline"}}}}if(!type){type=isDom?"inline":"html"}coming.type=type}if(type==="inline"||type==="html"){if(!coming.content){if(type==="inline"){coming.content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,""):href)
}else{coming.content=element}}if(!coming.content||!coming.content.length){type=null}}else{if(!href){type=null}}if(type==="ajax"&&isString(href)){hrefParts=href.split(/\s+/,2);href=hrefParts.shift();coming.selector=hrefParts.shift()}coming.href=href;coming.group=F.group;coming.isDom=isDom;switch(type){case"image":F._loadImage();break;case"ajax":F._loadAjax();break;case"inline":case"iframe":case"swf":case"html":F._afterLoad();break;default:F._error("type")}},_error:function(type){F.hideLoading();$.extend(F.coming,{type:"html",autoSize:true,minWidth:0,minHeight:0,padding:15,hasError:type,content:F.coming.tpl.error});
F._afterLoad()},_loadImage:function(){var img=F.imgPreload=new Image();img.onload=function(){this.onload=this.onerror=null;F.coming.width=this.width;F.coming.height=this.height;F._afterLoad()};img.onerror=function(){this.onload=this.onerror=null;F._error("image")};img.src=F.coming.href;if(img.complete===undefined||!img.complete){F.showLoading()}},_loadAjax:function(){F.showLoading();F.ajaxLoad=$.ajax($.extend({},F.coming.ajax,{url:F.coming.href,error:function(jqXHR,textStatus){if(F.coming&&textStatus!=="abort"){F._error("ajax",jqXHR)
}else{F.hideLoading()}},success:function(data,textStatus){if(textStatus==="success"){F.coming.content=data;F._afterLoad()}}}))},_preloadImages:function(){var group=F.group,current=F.current,len=group.length,item,href,i,cnt=Math.min(current.preload,len-1);if(!current.preload||group.length<2){return}for(i=1;i<=cnt;i+=1){item=group[(current.index+i)%len];href=item.href||$(item).attr("href")||item;if(item.type==="image"||F.isImage(href)){new Image().src=href}}},_afterLoad:function(){F.hideLoading();if(!F.coming||false===F.trigger("afterLoad",F.current)){F.coming=false;
return}if(F.isOpened){$(".fancybox-item, .fancybox-nav").remove();F.wrap.stop(true).removeClass("fancybox-opened");F.inner.css("overflow","hidden");F.transitions[F.current.prevMethod]()}else{$(".fancybox-wrap").stop().trigger("onReset").remove();F.trigger("afterClose")}F.unbindEvents();F.isOpen=false;F.current=F.coming;F.wrap=$(F.current.tpl.wrap).addClass("fancybox-"+(isTouch?"mobile":"desktop")+" fancybox-type-"+F.current.type+" fancybox-tmp "+F.current.wrapCSS).appendTo("body");F.skin=$(".fancybox-skin",F.wrap).css("padding",getValue(F.current.padding));
F.outer=$(".fancybox-outer",F.wrap);F.inner=$(".fancybox-inner",F.wrap);F._setContent()},_setContent:function(){var current=F.current,content=current.content,type=current.type,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,loadingBay;switch(type){case"inline":case"ajax":case"html":if(current.selector){content=$("<div>").html(content).find(current.selector)}else{if(content instanceof $){if(content.parent().hasClass("fancybox-inner")){content.parents(".fancybox-wrap").unbind("onReset")
}content=content.show().detach();$(F.wrap).bind("onReset",function(){content.appendTo("body").hide()})}}if(current.autoSize){loadingBay=$('<div class="fancybox-wrap '+F.current.wrapCSS+' fancybox-tmp"></div>').appendTo("body").css({minWidth:getValue(minWidth,"w"),minHeight:getValue(minHeight,"h"),maxWidth:getValue(maxWidth,"w"),maxHeight:getValue(maxHeight,"h")}).append(content);current.width=loadingBay.width();current.height=loadingBay.height();loadingBay.width(F.current.width);if(loadingBay.height()>current.height){loadingBay.width(current.width+1);
current.width=loadingBay.width();current.height=loadingBay.height()}content=loadingBay.contents().detach();loadingBay.remove()}break;case"image":content=current.tpl.image.replace("{href}",current.href);current.aspectRatio=true;break;case"swf":content=current.tpl.swf.replace(/\{width\}/g,current.width).replace(/\{height\}/g,current.height).replace(/\{href\}/g,current.href);break;case"iframe":content=$(current.tpl.iframe.replace("{rnd}",new Date().getTime())).attr("scrolling",current.scrolling).attr("src",current.href);
current.scrolling=isTouch?"scroll":"auto";break}if(type==="image"||type==="swf"){current.autoSize=false;current.scrolling="visible"}if(type==="iframe"&&current.autoSize){F.showLoading();F._setDimension();F.inner.css("overflow",current.scrolling);content.bind({onCancel:function(){$(this).unbind();F._afterZoomOut()},load:function(){F.hideLoading();try{if(this.contentWindow.document.location){F.current.height=$(this).contents().find("body").height()}}catch(e){F.current.autoSize=false}F[F.isOpen?"_afterZoomIn":"_beforeShow"]()
}}).appendTo(F.inner)}else{F.inner.append(content);F._beforeShow()}},_beforeShow:function(){F.coming=null;F.trigger("beforeShow");F._setDimension();F.wrap.hide().removeClass("fancybox-tmp");F.bindEvents();F._preloadImages();F.transitions[F.isOpened?F.current.nextMethod:F.current.openMethod]()},_setDimension:function(){var wrap=F.wrap,inner=F.inner,current=F.current,viewport=F.getViewport(),margin=current.margin,padding2=current.padding*2,width=current.width,height=current.height,maxWidth=current.maxWidth+padding2,maxHeight=current.maxHeight+padding2,minWidth=current.minWidth+padding2,minHeight=current.minHeight+padding2,ratio,height_;
viewport.w-=(margin[1]+margin[3]);viewport.h-=(margin[0]+margin[2]);if(isPercentage(width)){width=(((viewport.w-padding2)*parseFloat(width))/100)}if(isPercentage(height)){height=(((viewport.h-padding2)*parseFloat(height))/100)}ratio=width/height;width+=padding2;height+=padding2;if(current.fitToView){maxWidth=Math.min(viewport.w,maxWidth);maxHeight=Math.min(viewport.h,maxHeight)}if(current.aspectRatio){if(width>maxWidth){width=maxWidth;height=((width-padding2)/ratio)+padding2}if(height>maxHeight){height=maxHeight;
width=((height-padding2)*ratio)+padding2}if(width<minWidth){width=minWidth;height=((width-padding2)/ratio)+padding2}if(height<minHeight){height=minHeight;width=((height-padding2)*ratio)+padding2}}else{width=Math.max(minWidth,Math.min(width,maxWidth));height=Math.max(minHeight,Math.min(height,maxHeight))}width=Math.round(width);height=Math.round(height);$(wrap.add(inner)).width("auto").height("auto");inner.width(width-padding2).height(height-padding2);wrap.width(width);height_=wrap.height();if(width>maxWidth||height_>maxHeight){while((width>maxWidth||height_>maxHeight)&&width>minWidth&&height_>minHeight){height=height-10;
if(current.aspectRatio){width=Math.round(((height-padding2)*ratio)+padding2);if(width<minWidth){width=minWidth;height=((width-padding2)/ratio)+padding2}}else{width=width-10}inner.width(width-padding2).height(height-padding2);wrap.width(width);height_=wrap.height()}}current.dim={width:getValue(width),height:getValue(height_)};current.canGrow=current.autoSize&&height>minHeight&&height<maxHeight;current.canShrink=false;current.canExpand=false;if((width-padding2)<current.width||(height-padding2)<current.height){current.canExpand=true
}else{if((width>viewport.w||height_>viewport.h)&&width>minWidth&&height>minHeight){current.canShrink=true}}F.innerSpace=height_-padding2-inner.height()},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:"absolute",top:margin[0]+viewport.y,left:margin[3]+viewport.x};if(current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w){rez={position:"fixed",top:margin[0],left:margin[3]}
}rez.top=getValue(Math.max(rez.top,rez.top+((viewport.h-height)*current.topRatio)));rez.left=getValue(Math.max(rez.left,rez.left+((viewport.w-width)*0.5)));return rez},_afterZoomIn:function(){var current=F.current,scrolling=current?current.scrolling:"no";if(!current){return}F.isOpen=F.isOpened=true;F.wrap.addClass("fancybox-opened");F.inner.css("overflow",scrolling==="yes"?"scroll":(scrolling==="no"?"hidden":scrolling));F.trigger("afterShow");F.update();if(current.closeClick||current.nextClick){F.inner.css("cursor","pointer").bind("click.fb",function(e){if(!$(e.target).is("a")&&!$(e.target).parent().is("a")){F[current.closeClick?"close":"next"]()
}})}if(current.closeBtn){$(current.tpl.closeBtn).appendTo(F.skin).bind("click.fb",F.close)}if(current.arrows&&F.group.length>1){if(current.loop||current.index>0){$(current.tpl.prev).appendTo(F.outer).bind("click.fb",F.prev)}if(current.loop||current.index<F.group.length-1){$(current.tpl.next).appendTo(F.outer).bind("click.fb",F.next)}}if(F.opts.autoPlay&&!F.player.isActive){F.opts.autoPlay=false;F.play()}},_afterZoomOut:function(){var current=F.current;F.wrap.trigger("onReset").remove();$.extend(F,{group:{},opts:{},current:null,isActive:false,isOpened:false,isOpen:false,wrap:null,skin:null,outer:null,inner:null});
F.trigger("afterClose",current)}});F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,padding=current.padding,orig=$(current.orig),pos={},width=50,height=50,viewport;if(!orig.length&&current.isDom&&$(element).is(":visible")){orig=$(element).find("img:first");if(!orig.length){orig=$(element)}}if(orig.length){pos=orig.offset();if(orig.is("img")){width=orig.outerWidth();height=orig.outerHeight()}}else{viewport=F.getViewport();pos.top=viewport.y+(viewport.h-height)*0.5;pos.left=viewport.x+(viewport.w-width)*0.5
}pos={top:getValue(pos.top-padding),left:getValue(pos.left-padding),width:getValue(width+padding*2),height:getValue(height+padding*2)};return pos},step:function(now,fx){var prop=fx.prop,value,ratio;if(prop==="width"||prop==="height"){value=Math.ceil(now-(F.current.padding*2));if(prop==="height"){ratio=(now-fx.start)/(fx.end-fx.start);if(fx.start>fx.end){ratio=1-ratio}value-=F.innerSpace*ratio}F.inner[prop](value)}},zoomIn:function(){var wrap=F.wrap,current=F.current,effect=current.openEffect,elastic=effect==="elastic",dim=current.dim,startPos=$.extend({},dim,F._getPosition(elastic)),endPos=$.extend({opacity:1},startPos);
delete endPos.position;if(elastic){startPos=this.getOrigPosition();if(current.openOpacity){startPos.opacity=0}F.outer.add(F.inner).width("auto").height("auto")}else{if(effect==="fade"){startPos.opacity=0}}wrap.css(startPos).show().animate(endPos,{duration:effect==="none"?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn})},zoomOut:function(){var wrap=F.wrap,current=F.current,effect=current.openEffect,elastic=effect==="elastic",endPos={opacity:0};if(elastic){if(wrap.css("position")==="fixed"){wrap.css(F._getPosition(true))
}endPos=this.getOrigPosition();if(current.closeOpacity){endPos.opacity=0}}wrap.animate(endPos,{duration:effect==="none"?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut})},changeIn:function(){var wrap=F.wrap,current=F.current,effect=current.nextEffect,elastic=effect==="elastic",startPos=F._getPosition(elastic),endPos={opacity:1};startPos.opacity=0;if(elastic){startPos.top=getValue(parseInt(startPos.top,10)-200);endPos.top="+=200px"}wrap.css(startPos).show().animate(endPos,{duration:effect==="none"?0:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn})
},changeOut:function(){var wrap=F.wrap,current=F.current,effect=current.prevEffect,endPos={opacity:0},cleanUp=function(){$(this).trigger("onReset").remove()};wrap.removeClass("fancybox-opened");if(effect==="elastic"){endPos.top="+=200px"}wrap.animate(endPos,{duration:effect==="none"?0:current.prevSpeed,easing:current.prevEasing,complete:cleanUp})}};F.helpers.overlay={overlay:null,update:function(){var width,scrollWidth,offsetWidth;this.overlay.width("100%").height("100%");if($.browser.msie||isTouch){scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);
offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);width=scrollWidth<offsetWidth?W.width():scrollWidth}else{width=D.width()}this.overlay.width(width).height(D.height())},beforeShow:function(opts){if(this.overlay){return}opts=$.extend(true,{},F.defaults.helpers.overlay,opts);this.overlay=$('<div id="fancybox-overlay"></div>').css(opts.css).appendTo("body");if(opts.closeClick){this.overlay.bind("click.fb",F.close)}if(F.current.fixed&&!isTouch){this.overlay.addClass("overlay-fixed")
}else{this.update();this.onUpdate=function(){this.update()}}this.overlay.fadeTo(opts.speedIn,opts.opacity)},afterClose:function(opts){if(this.overlay){this.overlay.fadeOut(opts.speedOut||0,function(){$(this).remove()})}this.overlay=null}};F.helpers.title={beforeShow:function(opts){var title,text=F.current.title;if(text){title=$('<div class="fancybox-title fancybox-title-'+opts.type+'-wrap">'+text+"</div>").appendTo("body");if(opts.type==="float"){title.width(title.width());title.wrapInner('<span class="child"></span>');
F.current.margin[2]+=Math.abs(parseInt(title.css("margin-bottom"),10))}title.appendTo(opts.type==="over"?F.inner:(opts.type==="outside"?F.wrap:F.skin))}}};$.fn.fancybox=function(options){var that=$(this),selector=this.selector||"",index,run=function(e){var what=this,idx=index,relType,relVal;if(!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&!$(what).is(".fancybox-wrap")){e.preventDefault();relType=options.groupAttr||"data-fancybox-group";relVal=$(what).attr(relType);if(!relVal){relType="rel";relVal=what[relType]
}if(relVal&&relVal!==""&&relVal!=="nofollow"){what=selector.length?$(selector):that;what=what.filter("["+relType+'="'+relVal+'"]');idx=what.index(this)}options.index=idx;F.open(what,options)}};options=options||{};index=options.index||0;if(selector){D.undelegate(selector,"click.fb-start").delegate(selector,"click.fb-start",run)}else{that.unbind("click.fb-start").bind("click.fb-start",run)}return this};$(document).ready(function(){F.defaults.fixed=$.support.fixedPosition||(!($.browser.msie&&$.browser.version<=6)&&!isTouch)
})}(window,document,jQuery));
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function($){var types=["DOMMouseScroll","mousewheel"];if($.event.fixHooks){for(var i=types.length;i;){$.event.fixHooks[types[--i]]=$.event.mouseHooks
}}$.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=types.length;i;){this.addEventListener(types[--i],handler,false)}}else{this.onmousewheel=handler}},teardown:function(){if(this.removeEventListener){for(var i=types.length;i;){this.removeEventListener(types[--i],handler,false)}}else{this.onmousewheel=null}}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}});function handler(event){var orgEvent=event||window.event,args=[].slice.call(arguments,1),delta=0,returnValue=true,deltaX=0,deltaY=0;
event=$.event.fix(orgEvent);event.type="mousewheel";if(orgEvent.wheelDelta){delta=orgEvent.wheelDelta/120}if(orgEvent.detail){delta=-orgEvent.detail/3}deltaY=delta;if(orgEvent.axis!==undefined&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaY=0;deltaX=-1*delta}if(orgEvent.wheelDeltaY!==undefined){deltaY=orgEvent.wheelDeltaY/120}if(orgEvent.wheelDeltaX!==undefined){deltaX=-1*orgEvent.wheelDeltaX/120}args.unshift(event,delta,deltaX,deltaY);return($.event.dispatch||$.event.handle).apply(this,args)}})(jQuery);
/*!
 * jScrollPane - v2.0.0beta12 - 2012-05-14
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
(function($,window,undefined){$.fn.jScrollPane=function(settings){function JScrollPane(elem,s){var settings,jsp=this,pane,paneWidth,paneHeight,container,contentWidth,contentHeight,percentInViewH,percentInViewV,isScrollableV,isScrollableH,verticalDrag,dragMaxY,verticalDragPosition,horizontalDrag,dragMaxX,horizontalDragPosition,verticalBar,verticalTrack,scrollbarWidth,verticalTrackHeight,verticalDragHeight,arrowUp,arrowDown,horizontalBar,horizontalTrack,horizontalTrackWidth,horizontalDragWidth,arrowLeft,arrowRight,reinitialiseInterval,originalPadding,originalPaddingTotalWidth,previousContentWidth,wasAtTop=true,wasAtLeft=true,wasAtBottom=false,wasAtRight=false,originalElement=elem.clone(false,false).empty(),mwEvent=$.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";
originalPadding=elem.css("paddingTop")+" "+elem.css("paddingRight")+" "+elem.css("paddingBottom")+" "+elem.css("paddingLeft");originalPaddingTotalWidth=(parseInt(elem.css("paddingLeft"),10)||0)+(parseInt(elem.css("paddingRight"),10)||0);function initialise(s){var isMaintainingPositon,lastContentX,lastContentY,hasContainingSpaceChanged,originalScrollTop,originalScrollLeft,maintainAtBottom=false,maintainAtRight=false;settings=s;if(pane===undefined){originalScrollTop=elem.scrollTop();originalScrollLeft=elem.scrollLeft();
elem.css({overflow:"hidden",padding:0});paneWidth=elem.innerWidth()+originalPaddingTotalWidth;paneHeight=elem.innerHeight();elem.width(paneWidth);pane=$('<div class="jspPane" />').css("padding",originalPadding).append(elem.children());container=$('<div class="jspContainer" />').css({width:paneWidth+"px",height:paneHeight+"px"}).append(pane).appendTo(elem)}else{elem.css("width","");maintainAtBottom=settings.stickToBottom&&isCloseToBottom();maintainAtRight=settings.stickToRight&&isCloseToRight();hasContainingSpaceChanged=elem.innerWidth()+originalPaddingTotalWidth!=paneWidth||elem.outerHeight()!=paneHeight;
if(hasContainingSpaceChanged){paneWidth=elem.innerWidth()+originalPaddingTotalWidth;paneHeight=elem.innerHeight();container.css({width:paneWidth+"px",height:paneHeight+"px"})}if(!hasContainingSpaceChanged&&previousContentWidth==contentWidth&&pane.outerHeight()==contentHeight){elem.width(paneWidth);return}previousContentWidth=contentWidth;pane.css("width","");elem.width(paneWidth);container.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}pane.css("overflow","auto");if(s.contentWidth){contentWidth=s.contentWidth
}else{contentWidth=pane[0].scrollWidth}contentHeight=pane[0].scrollHeight-settings.verticalPadding*2;pane.css("overflow","");percentInViewH=contentWidth/paneWidth;percentInViewV=contentHeight/paneHeight;isScrollableV=percentInViewV>1;isScrollableH=percentInViewH>1;if(!(isScrollableH||isScrollableV)){elem.removeClass("jspScrollable");pane.css({top:0,width:container.width()-originalPaddingTotalWidth});removeMousewheel();removeFocusHandler();removeKeyboardNav();removeClickOnTrack()}else{elem.addClass("jspScrollable");
isMaintainingPositon=settings.maintainPosition&&(verticalDragPosition||horizontalDragPosition);if(isMaintainingPositon){lastContentX=contentPositionX();lastContentY=contentPositionY()}initialiseVerticalScroll();initialiseHorizontalScroll();resizeScrollbars();if(isMaintainingPositon){scrollToX(maintainAtRight?(contentWidth-paneWidth):lastContentX,false);scrollToY(maintainAtBottom?(contentHeight-paneHeight):lastContentY,false)}initFocusHandler();initMousewheel();initTouch();if(settings.enableKeyboardNavigation){initKeyboardNav()
}if(settings.clickOnTrack){initClickOnTrack()}observeHash();if(settings.hijackInternalLinks){hijackInternalLinks()}}if(settings.autoReinitialise&&!reinitialiseInterval){reinitialiseInterval=setInterval(function(){initialise(settings)},settings.autoReinitialiseDelay)}else{if(!settings.autoReinitialise&&reinitialiseInterval){clearInterval(reinitialiseInterval)}}originalScrollTop&&elem.scrollTop(0)&&scrollToY(originalScrollTop,false);originalScrollLeft&&elem.scrollLeft(0)&&scrollToX(originalScrollLeft,false);elem.trigger("jsp-initialised",[isScrollableH||isScrollableV])
}function initialiseVerticalScroll(){if(isScrollableV){container.append($('<div class="jspVerticalBar" />').append($('<div class="jspCap jspCapTop" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragTop" />'),$('<div class="jspDragBottom" />'))),$('<div class="jspCap jspCapBottom" />')));verticalBar=container.find(">.jspVerticalBar");verticalTrack=verticalBar.find(">.jspTrack");verticalDrag=verticalTrack.find(">.jspDrag");if(settings.showArrows){arrowUp=$('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",getArrowScroll(0,-1)).bind("click.jsp",nil);
arrowDown=$('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",getArrowScroll(0,1)).bind("click.jsp",nil);if(settings.arrowScrollOnHover){arrowUp.bind("mouseover.jsp",getArrowScroll(0,-1,arrowUp));arrowDown.bind("mouseover.jsp",getArrowScroll(0,1,arrowDown))}appendArrows(verticalTrack,settings.verticalArrowPositions,arrowUp,arrowDown)}verticalTrackHeight=paneHeight-settings.verticalPadding*2;container.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){verticalTrackHeight-=$(this).outerHeight()
});verticalDrag.hover(function(){verticalDrag.addClass("jspHover")},function(){verticalDrag.removeClass("jspHover")}).bind("mousedown.jsp",function(e){$("html").bind("dragstart.jsp selectstart.jsp",nil);verticalDrag.addClass("jspActive");var startY=e.pageY-verticalDrag.position().top;$("html").bind("mousemove.jsp",function(e){positionDragY(e.pageY-startY,false)}).bind("mouseup.jsp mouseleave.jsp",cancelDrag);return false});sizeVerticalScrollbar()}}function sizeVerticalScrollbar(){verticalTrack.height(verticalTrackHeight+"px");
verticalDragPosition=0;scrollbarWidth=settings.verticalGutter+verticalTrack.outerWidth();pane.width(paneWidth-scrollbarWidth-originalPaddingTotalWidth);try{if(verticalBar.position().left===0){pane.css("margin-left",scrollbarWidth+"px")}}catch(err){}}function initialiseHorizontalScroll(){if(isScrollableH){container.append($('<div class="jspHorizontalBar" />').append($('<div class="jspCap jspCapLeft" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragLeft" />'),$('<div class="jspDragRight" />'))),$('<div class="jspCap jspCapRight" />')));
horizontalBar=container.find(">.jspHorizontalBar");horizontalTrack=horizontalBar.find(">.jspTrack");horizontalDrag=horizontalTrack.find(">.jspDrag");if(settings.showArrows){arrowLeft=$('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",getArrowScroll(-1,0)).bind("click.jsp",nil);arrowRight=$('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",getArrowScroll(1,0)).bind("click.jsp",nil);if(settings.arrowScrollOnHover){arrowLeft.bind("mouseover.jsp",getArrowScroll(-1,0,arrowLeft));arrowRight.bind("mouseover.jsp",getArrowScroll(1,0,arrowRight))
}appendArrows(horizontalTrack,settings.horizontalArrowPositions,arrowLeft,arrowRight)}horizontalDrag.hover(function(){horizontalDrag.addClass("jspHover")},function(){horizontalDrag.removeClass("jspHover")}).bind("mousedown.jsp",function(e){$("html").bind("dragstart.jsp selectstart.jsp",nil);horizontalDrag.addClass("jspActive");var startX=e.pageX-horizontalDrag.position().left;$("html").bind("mousemove.jsp",function(e){positionDragX(e.pageX-startX,false)}).bind("mouseup.jsp mouseleave.jsp",cancelDrag);return false
});horizontalTrackWidth=container.innerWidth();sizeHorizontalScrollbar()}}function sizeHorizontalScrollbar(){container.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){horizontalTrackWidth-=$(this).outerWidth()});horizontalTrack.width(horizontalTrackWidth+"px");horizontalDragPosition=0}function resizeScrollbars(){if(isScrollableH&&isScrollableV){var horizontalTrackHeight=horizontalTrack.outerHeight(),verticalTrackWidth=verticalTrack.outerWidth();verticalTrackHeight-=horizontalTrackHeight;
$(horizontalBar).find(">.jspCap:visible,>.jspArrow").each(function(){horizontalTrackWidth+=$(this).outerWidth()});horizontalTrackWidth-=verticalTrackWidth;paneHeight-=verticalTrackWidth;paneWidth-=horizontalTrackHeight;horizontalTrack.parent().append($('<div class="jspCorner" />').css("width",horizontalTrackHeight+"px"));sizeVerticalScrollbar();sizeHorizontalScrollbar()}if(isScrollableH){pane.width((container.outerWidth()-originalPaddingTotalWidth)+"px")}contentHeight=pane.outerHeight();percentInViewV=contentHeight/paneHeight;
if(isScrollableH){horizontalDragWidth=Math.ceil(1/percentInViewH*horizontalTrackWidth);if(horizontalDragWidth>settings.horizontalDragMaxWidth){horizontalDragWidth=settings.horizontalDragMaxWidth}else{if(horizontalDragWidth<settings.horizontalDragMinWidth){horizontalDragWidth=settings.horizontalDragMinWidth}}horizontalDrag.width(horizontalDragWidth+"px");dragMaxX=horizontalTrackWidth-horizontalDragWidth;_positionDragX(horizontalDragPosition)}if(isScrollableV){verticalDragHeight=Math.ceil(1/percentInViewV*verticalTrackHeight);
if(verticalDragHeight>settings.verticalDragMaxHeight){verticalDragHeight=settings.verticalDragMaxHeight}else{if(verticalDragHeight<settings.verticalDragMinHeight){verticalDragHeight=settings.verticalDragMinHeight}}verticalDrag.height(verticalDragHeight+"px");dragMaxY=verticalTrackHeight-verticalDragHeight;_positionDragY(verticalDragPosition)}}function appendArrows(ele,p,a1,a2){var p1="before",p2="after",aTemp;if(p=="os"){p=/Mac/.test(navigator.platform)?"after":"split"}if(p==p1){p2=p}else{if(p==p2){p1=p;aTemp=a1;
a1=a2;a2=aTemp}}ele[p1](a1)[p2](a2)}function getArrowScroll(dirX,dirY,ele){return function(){arrowScroll(dirX,dirY,this,ele);this.blur();return false}}function arrowScroll(dirX,dirY,arrow,ele){arrow=$(arrow).addClass("jspActive");var eve,scrollTimeout,isFirst=true,doScroll=function(){if(dirX!==0){jsp.scrollByX(dirX*settings.arrowButtonSpeed)}if(dirY!==0){jsp.scrollByY(dirY*settings.arrowButtonSpeed)}scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.arrowRepeatFreq);isFirst=false};doScroll();
eve=ele?"mouseout.jsp":"mouseup.jsp";ele=ele||$("html");ele.bind(eve,function(){arrow.removeClass("jspActive");scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;ele.unbind(eve)})}function initClickOnTrack(){removeClickOnTrack();if(isScrollableV){verticalTrack.bind("mousedown.jsp",function(e){if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageY-offset.top-verticalDragPosition,scrollTimeout,isFirst=true,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageY-offset.top-verticalDragHeight/2,contentDragY=paneHeight*settings.scrollPagePercent,dragY=dragMaxY*contentDragY/(contentHeight-paneHeight);
if(direction<0){if(verticalDragPosition-dragY>pos){jsp.scrollByY(-contentDragY)}else{positionDragY(pos)}}else{if(direction>0){if(verticalDragPosition+dragY<pos){jsp.scrollByY(contentDragY)}else{positionDragY(pos)}}else{cancelClick();return}}scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq);isFirst=false},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;$(document).unbind("mouseup.jsp",cancelClick)};doScroll();$(document).bind("mouseup.jsp",cancelClick);
return false}})}if(isScrollableH){horizontalTrack.bind("mousedown.jsp",function(e){if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageX-offset.left-horizontalDragPosition,scrollTimeout,isFirst=true,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageX-offset.left-horizontalDragWidth/2,contentDragX=paneWidth*settings.scrollPagePercent,dragX=dragMaxX*contentDragX/(contentWidth-paneWidth);if(direction<0){if(horizontalDragPosition-dragX>pos){jsp.scrollByX(-contentDragX)
}else{positionDragX(pos)}}else{if(direction>0){if(horizontalDragPosition+dragX<pos){jsp.scrollByX(contentDragX)}else{positionDragX(pos)}}else{cancelClick();return}}scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq);isFirst=false},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout);scrollTimeout=null;$(document).unbind("mouseup.jsp",cancelClick)};doScroll();$(document).bind("mouseup.jsp",cancelClick);return false}})}}function removeClickOnTrack(){if(horizontalTrack){horizontalTrack.unbind("mousedown.jsp")
}if(verticalTrack){verticalTrack.unbind("mousedown.jsp")}}function cancelDrag(){$("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(verticalDrag){verticalDrag.removeClass("jspActive")}if(horizontalDrag){horizontalDrag.removeClass("jspActive")}}function positionDragY(destY,animate){if(!isScrollableV){return}if(destY<0){destY=0}else{if(destY>dragMaxY){destY=dragMaxY}}if(animate===undefined){animate=settings.animateScroll}if(animate){jsp.animate(verticalDrag,"top",destY,_positionDragY)
}else{verticalDrag.css("top",destY);_positionDragY(destY)}}function _positionDragY(destY){if(destY===undefined){destY=verticalDrag.position().top}container.scrollTop(0);verticalDragPosition=destY;var isAtTop=verticalDragPosition===0,isAtBottom=verticalDragPosition==dragMaxY,percentScrolled=destY/dragMaxY,destTop=-percentScrolled*(contentHeight-paneHeight);if(wasAtTop!=isAtTop||wasAtBottom!=isAtBottom){wasAtTop=isAtTop;wasAtBottom=isAtBottom;elem.trigger("jsp-arrow-change",[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight])
}updateVerticalArrows(isAtTop,isAtBottom);pane.css("top",destTop);elem.trigger("jsp-scroll-y",[-destTop,isAtTop,isAtBottom]).trigger("scroll")}function positionDragX(destX,animate){if(!isScrollableH){return}if(destX<0){destX=0}else{if(destX>dragMaxX){destX=dragMaxX}}if(animate===undefined){animate=settings.animateScroll}if(animate){jsp.animate(horizontalDrag,"left",destX,_positionDragX)}else{horizontalDrag.css("left",destX);_positionDragX(destX)}}function _positionDragX(destX){if(destX===undefined){destX=horizontalDrag.position().left
}container.scrollTop(0);horizontalDragPosition=destX;var isAtLeft=horizontalDragPosition===0,isAtRight=horizontalDragPosition==dragMaxX,percentScrolled=destX/dragMaxX,destLeft=-percentScrolled*(contentWidth-paneWidth);if(wasAtLeft!=isAtLeft||wasAtRight!=isAtRight){wasAtLeft=isAtLeft;wasAtRight=isAtRight;elem.trigger("jsp-arrow-change",[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight])}updateHorizontalArrows(isAtLeft,isAtRight);pane.css("left",destLeft);elem.trigger("jsp-scroll-x",[-destLeft,isAtLeft,isAtRight]).trigger("scroll")
}function updateVerticalArrows(isAtTop,isAtBottom){if(settings.showArrows){arrowUp[isAtTop?"addClass":"removeClass"]("jspDisabled");arrowDown[isAtBottom?"addClass":"removeClass"]("jspDisabled")}}function updateHorizontalArrows(isAtLeft,isAtRight){if(settings.showArrows){arrowLeft[isAtLeft?"addClass":"removeClass"]("jspDisabled");arrowRight[isAtRight?"addClass":"removeClass"]("jspDisabled")}}function scrollToY(destY,animate){var percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate)
}function scrollToX(destX,animate){var percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate)}function scrollToElement(ele,stickToTop,animate){var e,eleHeight,eleWidth,eleTop=0,eleLeft=0,viewportTop,viewportLeft,maxVisibleEleTop,maxVisibleEleLeft,destY,destX;try{e=$(ele)}catch(err){return}eleHeight=e.outerHeight();eleWidth=e.outerWidth();container.scrollTop(0);container.scrollLeft(0);while(!e.is(".jspPane")){eleTop+=e.position().top;eleLeft+=e.position().left;e=e.offsetParent();
if(/^body|html$/i.test(e[0].nodeName)){return}}viewportTop=contentPositionY();maxVisibleEleTop=viewportTop+paneHeight;if(eleTop<viewportTop||stickToTop){destY=eleTop-settings.verticalGutter}else{if(eleTop+eleHeight>maxVisibleEleTop){destY=eleTop-paneHeight+eleHeight+settings.verticalGutter}}if(destY){scrollToY(destY,animate)}viewportLeft=contentPositionX();maxVisibleEleLeft=viewportLeft+paneWidth;if(eleLeft<viewportLeft||stickToTop){destX=eleLeft-settings.horizontalGutter}else{if(eleLeft+eleWidth>maxVisibleEleLeft){destX=eleLeft-paneWidth+eleWidth+settings.horizontalGutter
}}if(destX){scrollToX(destX,animate)}}function contentPositionX(){return -pane.position().left}function contentPositionY(){return -pane.position().top}function isCloseToBottom(){var scrollableHeight=contentHeight-paneHeight;return(scrollableHeight>20)&&(scrollableHeight-contentPositionY()<10)}function isCloseToRight(){var scrollableWidth=contentWidth-paneWidth;return(scrollableWidth>20)&&(scrollableWidth-contentPositionX()<10)}function initMousewheel(){container.unbind(mwEvent).bind(mwEvent,function(event,delta,deltaX,deltaY){var dX=horizontalDragPosition,dY=verticalDragPosition;
jsp.scrollBy(deltaX*settings.mouseWheelSpeed,-deltaY*settings.mouseWheelSpeed,false);return dX==horizontalDragPosition&&dY==verticalDragPosition})}function removeMousewheel(){container.unbind(mwEvent)}function nil(){return false}function initFocusHandler(){pane.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){scrollToElement(e.target,false)})}function removeFocusHandler(){pane.find(":input,a").unbind("focus.jsp")}function initKeyboardNav(){var keyDown,elementHasScrolled,validParents=[];isScrollableH&&validParents.push(horizontalBar[0]);
isScrollableV&&validParents.push(verticalBar[0]);pane.focus(function(){elem.focus()});elem.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target!==this&&!(validParents.length&&$(e.target).closest(validParents).length)){return}var dX=horizontalDragPosition,dY=verticalDragPosition;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:keyDown=e.keyCode;keyDownHandler();break;case 35:scrollToY(contentHeight-paneHeight);keyDown=null;break;case 36:scrollToY(0);
keyDown=null;break}elementHasScrolled=e.keyCode==keyDown&&dX!=horizontalDragPosition||dY!=verticalDragPosition;return !elementHasScrolled}).bind("keypress.jsp",function(e){if(e.keyCode==keyDown){keyDownHandler()}return !elementHasScrolled});if(settings.hideFocus){elem.css("outline","none");if("hideFocus" in container[0]){elem.attr("hideFocus",true)}}else{elem.css("outline","");if("hideFocus" in container[0]){elem.attr("hideFocus",false)}}function keyDownHandler(){var dX=horizontalDragPosition,dY=verticalDragPosition;
switch(keyDown){case 40:jsp.scrollByY(settings.keyboardSpeed,false);break;case 38:jsp.scrollByY(-settings.keyboardSpeed,false);break;case 34:case 32:jsp.scrollByY(paneHeight*settings.scrollPagePercent,false);break;case 33:jsp.scrollByY(-paneHeight*settings.scrollPagePercent,false);break;case 39:jsp.scrollByX(settings.keyboardSpeed,false);break;case 37:jsp.scrollByX(-settings.keyboardSpeed,false);break}elementHasScrolled=dX!=horizontalDragPosition||dY!=verticalDragPosition;return elementHasScrolled}}function removeKeyboardNav(){elem.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")
}function observeHash(){if(location.hash&&location.hash.length>1){var e,retryInt,hash=escape(location.hash.substr(1));try{e=$("#"+hash+', a[name="'+hash+'"]')}catch(err){return}if(e.length&&pane.find(hash)){if(container.scrollTop()===0){retryInt=setInterval(function(){if(container.scrollTop()>0){scrollToElement(e,true);$(document).scrollTop(container.position().top);clearInterval(retryInt)}},50)}else{scrollToElement(e,true);$(document).scrollTop(container.position().top)}}}}function hijackInternalLinks(){if($(document.body).data("jspHijack")){return
}$(document.body).data("jspHijack",true);$(document.body).delegate("a[href*=#]","click",function(event){var href=this.href.substr(0,this.href.indexOf("#")),locationHref=location.href,hash,element,container,jsp,scrollTop,elementTop;if(location.href.indexOf("#")!==-1){locationHref=location.href.substr(0,location.href.indexOf("#"))}if(href!==locationHref){return}hash=escape(this.href.substr(this.href.indexOf("#")+1));element;try{element=$("#"+hash+', a[name="'+hash+'"]')}catch(e){return}if(!element.length){return
}container=element.closest(".jspScrollable");jsp=container.data("jsp");jsp.scrollToElement(element,true);if(container[0].scrollIntoView){scrollTop=$(window).scrollTop();elementTop=element.offset().top;if(elementTop<scrollTop||elementTop>scrollTop+$(window).height()){container[0].scrollIntoView()}}event.preventDefault()})}function initTouch(){var startX,startY,touchStartX,touchStartY,moved,moving=false;container.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){var touch=e.originalEvent.touches[0];
startX=contentPositionX();startY=contentPositionY();touchStartX=touch.pageX;touchStartY=touch.pageY;moved=false;moving=true}).bind("touchmove.jsp",function(ev){if(!moving){return}var touchPos=ev.originalEvent.touches[0],dX=horizontalDragPosition,dY=verticalDragPosition;jsp.scrollTo(startX+touchStartX-touchPos.pageX,startY+touchStartY-touchPos.pageY);moved=moved||Math.abs(touchStartX-touchPos.pageX)>5||Math.abs(touchStartY-touchPos.pageY)>5;return dX==horizontalDragPosition&&dY==verticalDragPosition}).bind("touchend.jsp",function(e){moving=false
}).bind("click.jsp-touchclick",function(e){if(moved){moved=false;return false}})}function destroy(){var currentY=contentPositionY(),currentX=contentPositionX();elem.removeClass("jspScrollable").unbind(".jsp");elem.replaceWith(originalElement.append(pane.children()));originalElement.scrollTop(currentY);originalElement.scrollLeft(currentX);if(reinitialiseInterval){clearInterval(reinitialiseInterval)}}$.extend(jsp,{reinitialise:function(s){s=$.extend({},settings,s);initialise(s)},scrollToElement:function(ele,stickToTop,animate){scrollToElement(ele,stickToTop,animate)
},scrollTo:function(destX,destY,animate){scrollToX(destX,animate);scrollToY(destY,animate)},scrollToX:function(destX,animate){scrollToX(destX,animate)},scrollToY:function(destY,animate){scrollToY(destY,animate)},scrollToPercentX:function(destPercentX,animate){scrollToX(destPercentX*(contentWidth-paneWidth),animate)},scrollToPercentY:function(destPercentY,animate){scrollToY(destPercentY*(contentHeight-paneHeight),animate)},scrollBy:function(deltaX,deltaY,animate){jsp.scrollByX(deltaX,animate);jsp.scrollByY(deltaY,animate)
},scrollByX:function(deltaX,animate){var destX=contentPositionX()+Math[deltaX<0?"floor":"ceil"](deltaX),percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate)},scrollByY:function(deltaY,animate){var destY=contentPositionY()+Math[deltaY<0?"floor":"ceil"](deltaY),percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate)},positionDragX:function(x,animate){positionDragX(x,animate)},positionDragY:function(y,animate){positionDragY(y,animate)
},animate:function(ele,prop,value,stepCallback){var params={};params[prop]=value;ele.animate(params,{duration:settings.animateDuration,easing:settings.animateEase,queue:false,step:stepCallback})},getContentPositionX:function(){return contentPositionX()},getContentPositionY:function(){return contentPositionY()},getContentWidth:function(){return contentWidth},getContentHeight:function(){return contentHeight},getPercentScrolledX:function(){return contentPositionX()/(contentWidth-paneWidth)},getPercentScrolledY:function(){return contentPositionY()/(contentHeight-paneHeight)
},getIsScrollableH:function(){return isScrollableH},getIsScrollableV:function(){return isScrollableV},getContentPane:function(){return pane},scrollToBottom:function(animate){positionDragY(dragMaxY,animate)},hijackInternalLinks:$.noop,destroy:function(){destroy()}});initialise(s)}settings=$.extend({},$.fn.jScrollPane.defaults,settings);$.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){settings[this]=settings[this]||settings.speed});return this.each(function(){var elem=$(this),jspApi=elem.data("jsp");
if(jspApi){jspApi.reinitialise(settings)}else{jspApi=new JScrollPane(elem,settings);elem.data("jsp",jspApi)}})};$.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:undefined,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8,verticalPadding:0}
})(jQuery,this);(function(){
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=false,domLoadFnArr=[main],regObjArr=[],objIdArr=[],listenersArr=[],storedAltContent,storedAltContentId,storedCallbackFn,storedCallbackObj,isDomLoaded=false,isExpressInstallActive=false,dynamicStylesheet,dynamicStylesheetMedia,autoHideShow=true,ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=!+"\v1",playerVersion=[0,0,0],d=null;
if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){plugin=true;ie=false;d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof win.ActiveXObject!=UNDEF){try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);
if(a){d=a.GetVariable("$version");if(d){ie=true;d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}}catch(e){}}}return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}(),onDomLoad=function(){if(!ua.w3){return}if((typeof doc.readyState!=UNDEF&&doc.readyState=="complete")||(typeof doc.readyState==UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body))){callDomLoadFunctions()}if(!isDomLoaded){if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,false)
}if(ua.ie&&ua.win){doc.attachEvent(ON_READY_STATE_CHANGE,function(){if(doc.readyState=="complete"){doc.detachEvent(ON_READY_STATE_CHANGE,arguments.callee);callDomLoadFunctions()}});if(win==top){(function(){if(isDomLoaded){return}try{doc.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}callDomLoadFunctions()})()}}if(ua.wk){(function(){if(isDomLoaded){return}if(!/loaded|complete/.test(doc.readyState)){setTimeout(arguments.callee,0);return}callDomLoadFunctions()})()}addLoadEvent(callDomLoadFunctions)
}}();function callDomLoadFunctions(){if(isDomLoaded){return}try{var t=doc.getElementsByTagName("body")[0].appendChild(createElement("span"));t.parentNode.removeChild(t)}catch(e){return}isDomLoaded=true;var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)
}else{if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){if(plugin){testPlayerVersion()}else{matchVersions()}}function testPlayerVersion(){var b=doc.getElementsByTagName("body")[0];var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);var t=b.appendChild(o);if(t){var counter=0;(function(){if(typeof t.GetVariable!=UNDEF){var d=t.GetVariable("$version");
if(d){d=d.split(" ")[1].split(",");ua.pv=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}else{if(counter<10){counter++;setTimeout(arguments.callee,10);return}}b.removeChild(o);t=null;matchVersions()})()}else{matchVersions()}}function matchVersions(){var rl=regObjArr.length;if(rl>0){for(var i=0;i<rl;i++){var id=regObjArr[i].id;var cb=regObjArr[i].callbackFn;var cbObj={success:false,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj){if(hasPlayerVersion(regObjArr[i].swfVersion)&&!(ua.wk&&ua.wk<312)){setVisibility(id,true);
if(cb){cbObj.success=true;cbObj.ref=getObjectById(id);cb(cbObj)}}else{if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall;att.width=obj.getAttribute("width")||"0";att.height=obj.getAttribute("height")||"0";if(obj.getAttribute("class")){att.styleclass=obj.getAttribute("class")}if(obj.getAttribute("align")){att.align=obj.getAttribute("align")}var par={};var p=obj.getElementsByTagName("param");var pl=p.length;for(var j=0;j<pl;j++){if(p[j].getAttribute("name").toLowerCase()!="movie"){par[p[j].getAttribute("name")]=p[j].getAttribute("value")
}}showExpressInstall(att,par,id,cb)}else{displayAltContent(obj);if(cb){cb(cbObj)}}}}}else{setVisibility(id,true);if(cb){var o=getObjectById(id);if(o&&typeof o.SetVariable!=UNDEF){cbObj.success=true;cbObj.ref=o}cb(cbObj)}}}}}function getObjectById(objectIdStr){var r=null;var o=getElementById(objectIdStr);if(o&&o.nodeName=="OBJECT"){if(typeof o.SetVariable!=UNDEF){r=o}else{var n=o.getElementsByTagName(OBJECT)[0];if(n){r=n}}}return r}function canExpressInstall(){return !isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)&&!(ua.wk&&ua.wk<312)
}function showExpressInstall(att,par,replaceElemIdStr,callbackFn){isExpressInstallActive=true;storedCallbackFn=callbackFn||null;storedCallbackObj={success:false,id:replaceElemIdStr};var obj=getElementById(replaceElemIdStr);if(obj){if(obj.nodeName=="OBJECT"){storedAltContent=abstractAltContent(obj);storedAltContentId=null}else{storedAltContent=obj;storedAltContentId=replaceElemIdStr}att.id=EXPRESS_INSTALL_ID;if(typeof att.width==UNDEF||(!/%$/.test(att.width)&&parseInt(att.width,10)<310)){att.width="310"}if(typeof att.height==UNDEF||(!/%$/.test(att.height)&&parseInt(att.height,10)<137)){att.height="137"
}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",fv="MMredirectURL="+win.location.toString().replace(/&/g,"%26")+"&MMplayerType="+pt+"&MMdoctitle="+doc.title;if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+fv}else{par.flashvars=fv}if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceElemIdStr+="SWFObjectNew";newObj.setAttribute("id",replaceElemIdStr);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";(function(){if(obj.readyState==4){obj.parentNode.removeChild(obj)
}else{setTimeout(arguments.callee,10)}})()}createSWF(att,par,replaceElemIdStr)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";(function(){if(obj.readyState==4){obj.parentNode.removeChild(obj)}else{setTimeout(arguments.callee,10)}})()}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");
if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(ua.wk&&ua.wk<312){return r}if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]
}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])
}else{if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&obj.nodeName=="OBJECT"){if(ua.ie&&ua.win){obj.style.display="none";(function(){if(obj.readyState==4){removeObjectInIE(id)
}else{setTimeout(arguments.callee,10)}})()}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]
}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false}function createCSS(sel,decl,media,newStyle){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0];if(!h){return}var m=(media&&typeof media=="string")?media:"screen";if(newStyle){dynamicStylesheet=null;dynamicStylesheetMedia=null}if(!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");
s.setAttribute("type","text/css");s.setAttribute("media",m);dynamicStylesheet=h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1]}dynamicStylesheetMedia=m}if(ua.ie&&ua.win){if(dynamicStylesheet&&typeof dynamicStylesheet.addRule==OBJECT){dynamicStylesheet.addRule(sel,decl)}}else{if(dynamicStylesheet&&typeof doc.createTextNode!=UNDEF){dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}}}function setVisibility(id,isVisible){if(!autoHideShow){return
}var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars&&typeof encodeURIComponent!=UNDEF?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])
}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&objectIdStr&&swfVersionStr){var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr;regObj.callbackFn=callbackFn;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)}else{if(callbackFn){callbackFn({success:false,id:objectIdStr})
}}},getObjectById:function(objectIdStr){if(ua.w3){return getObjectById(objectIdStr)}},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var callbackObj={success:false,id:replaceElemIdStr};if(ua.w3&&!(ua.wk&&ua.wk<312)&&swfUrlStr&&replaceElemIdStr&&widthStr&&heightStr&&swfVersionStr){setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){widthStr+="";heightStr+="";var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){att[i]=attObj[i]
}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){par[j]=parObj[j]}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}callbackObj.success=true;callbackObj.ref=obj
}else{if(xiSwfUrlStr&&canExpressInstall()){att.data=xiSwfUrlStr;showExpressInstall(att,par,replaceElemIdStr,callbackFn);return}else{setVisibility(replaceElemIdStr,true)}}if(callbackFn){callbackFn(callbackObj)}})}else{if(callbackFn){callbackFn(callbackObj)}}},switchOffAutoHideShow:function(){autoHideShow=false},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3){return createSWF(attObj,parObj,replaceElemIdStr)
}else{return undefined}},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){if(ua.w3&&canExpressInstall()){showExpressInstall(att,par,replaceElemIdStr,callbackFn)}},removeSWF:function(objElemIdStr){if(ua.w3){removeSWF(objElemIdStr)}},createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){if(ua.w3){createCSS(selStr,declStr,mediaStr,newStyleBoolean)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){if(/\?/.test(q)){q=q.split("?")[1]
}if(param==null){return urlEncodeIfNecessary(q)}var pairs=q.split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring((pairs[i].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj&&storedAltContent){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"
}}if(storedCallbackFn){storedCallbackFn(storedCallbackObj)}}isExpressInstallActive=false}}}}();
/*!	rdio.jquery v0.1 <http://developer.rdio.com/>
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
	Copyright 2011 Rdio Inc.
*/
(function($){$.fn.rdio=function jQuery_fn_rdio(playbackToken){var container=$(this);var rdio=container.data("rdio");if(rdio!=undefined){return rdio}var id="rdio_swf_"+Math.floor(Math.random()*10000);$("<div></div>").attr("id",id).prependTo(container);
var listener_name=id+"_cb";var listener={};listener.ready=function(userInfo){container.trigger("ready.rdio",[userInfo])};listener.playStateChanged=function(playState){container.trigger("playStateChanged.rdio",[playState])};listener.playingTrackChanged=function(playingTrack,sourcePosition){container.trigger("playingTrackChanged.rdio",[playingTrack,sourcePosition])};listener.playingSourceChanged=function(playingSource){container.trigger("playingSourceChanged.rdio",[playingSource])};listener.volumeChanged=function(volume){container.trigger("volumeChanged.rdio",[volume])
};listener.muteChanged=function(mute){container.trigger("muteChanged.rdio",[mute])};listener.positionChanged=function(position){container.trigger("positionChanged.rdio",[position])};listener.queueChanged=function(newQueue){container.trigger("queueChanged.rdio",[newQueue])};listener.shuffleChanged=function(shuffle){container.trigger("shuffleChanged.rdio",[shuffle])};listener.repeatChanged=function(repeat){container.trigger("repeatChanged.rdio",[repeat])};listener.updateFrequencyData=function(frequencyData){container.trigger("updateFrequencyData.rdio",[frequencyData])
};listener.playingSomewhereElse=function(){container.trigger("playingSomewhereElse.rdio")};listener.freeRemainingChanged=function(remaining){container.trigger("freeRemainingChanged.rdio",[frequencyData])};window[listener_name]=listener;var flashvars={playbackToken:playbackToken,domain:document.domain,listener:listener_name};var params={allowScriptAccess:"always"};var attributes={};var o={embed:null};swfobject.embedSWF("http://www.rdio.com/api/swf/",id,1,1,"9.0.0","",flashvars,params,attributes,function(status){o.embed=$("#"+id).get(0)
});o.play=function(key,options){this.embed.rdio_play(key,options)};o.pause=function(){this.embed.rdio_pause()};o.stop=function(){this.embed.rdio_stop()};o.next=function(superSkip){this.embed.rdio_next(superSkip)};o.previous=function(){this.embed.rdio_previous()};o.seek=function(position){this.embed.rdio_seek(position)};o.setShuffle=function(shuffle){this.embed.rdio_setShuffle(shuffle)};o.setRepeat=function(mode){this.embed.rdio_setRepeat(mode)};o.queue=function(key,options){this.embed.rdio_queue(key,options)
};o.setVolume=function(volume){this.embed.rdio_setVolume(volume)};o.setMute=function(mute){this.embed.rdio_setMute(mute)};o.playQueuedTrack=function(position,offset){this.embed.rdio_playQueuedTrack(position,offset)};o.moveQueuedSource=function(from,to){this.embed.rdio_moveQueuedSource(from,to)};o.clearQueue=function(){this.embed.rdio_clearQueue()};o.setCurrentPosition=function(sourceIndex){this.embed.rdio_setCurrentPosition(sourceIndex)};o.removeFromQueue=function(sourceIndex){this.embed.rdio_removeFromQueue(sourceIndex)
};o.sendState=function(){this.embed.rdio_sendState()};o.startFrequencyAnalyzer=function(options){this.embed.rdio_startFrequencyAnalyzer(options)};o.stopFrequencyAnalyzer=function(){this.embed.rdio_stopFrequencyAnalyzer()};container.data("rdio",o);return o}})(jQuery)})();(function(Date,undefined){var moment,VERSION="1.6.2",round=Math.round,i,languages={},currentLanguage="en",hasModule=(typeof module!=="undefined"),langConfigProperties="months|monthsShort|monthsParse|weekdays|weekdaysShort|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|LT|LL?L?L?)/g,parseMultipleFormatChunker=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenWord=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,isoRegex=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000};
function Moment(date,isUTC){this._d=date;this._isUTC=!!isUTC}function absRound(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function Duration(duration){var data=this._data={},years=duration.years||duration.y||0,months=duration.months||duration.M||0,weeks=duration.weeks||duration.w||0,days=duration.days||duration.d||0,hours=duration.hours||duration.h||0,minutes=duration.minutes||duration.m||0,seconds=duration.seconds||duration.s||0,milliseconds=duration.milliseconds||duration.ms||0;
this._milliseconds=milliseconds+seconds*1000+minutes*60000+hours*3600000;this._days=days+weeks*7;this._months=months+years*12;data.milliseconds=milliseconds%1000;seconds+=absRound(milliseconds/1000);data.seconds=seconds%60;minutes+=absRound(seconds/60);data.minutes=minutes%60;hours+=absRound(minutes/60);data.hours=hours%24;days+=absRound(hours/24);days+=weeks*7;data.days=days%30;months+=absRound(days/30);data.months=months%12;years+=absRound(months/12);data.years=years}function leftZeroFill(number,targetLength){var output=number+"";
while(output.length<targetLength){output="0"+output}return output}function addOrSubtractDurationFromMoment(mom,duration,isAdding){var ms=duration._milliseconds,d=duration._days,M=duration._months,currentDate;if(ms){mom._d.setTime(+mom+ms*isAdding)}if(d){mom.date(mom.date()+d*isAdding)}if(M){currentDate=mom.date();mom.date(1).month(mom.month()+M*isAdding).date(Math.min(currentDate,mom.daysInMonth()))}}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function dateFromArray(input){return new Date(input[0],input[1]||0,input[2]||1,input[3]||0,input[4]||0,input[5]||0,input[6]||0)
}function formatMoment(m,inputString){var currentMonth=m.month(),currentDate=m.date(),currentYear=m.year(),currentDay=m.day(),currentHours=m.hours(),currentMinutes=m.minutes(),currentSeconds=m.seconds(),currentMilliseconds=m.milliseconds(),currentZone=-m.zone(),ordinal=moment.ordinal,meridiem=moment.meridiem;function replaceFunction(input){var a,b;switch(input){case"M":return currentMonth+1;case"Mo":return(currentMonth+1)+ordinal(currentMonth+1);case"MM":return leftZeroFill(currentMonth+1,2);case"MMM":return moment.monthsShort[currentMonth];
case"MMMM":return moment.months[currentMonth];case"D":return currentDate;case"Do":return currentDate+ordinal(currentDate);case"DD":return leftZeroFill(currentDate,2);case"DDD":a=new Date(currentYear,currentMonth,currentDate);b=new Date(currentYear,0,1);return ~~(((a-b)/86400000)+1.5);case"DDDo":a=replaceFunction("DDD");return a+ordinal(a);case"DDDD":return leftZeroFill(replaceFunction("DDD"),3);case"d":return currentDay;case"do":return currentDay+ordinal(currentDay);case"ddd":return moment.weekdaysShort[currentDay];
case"dddd":return moment.weekdays[currentDay];case"w":a=new Date(currentYear,currentMonth,currentDate-currentDay+5);b=new Date(a.getFullYear(),0,4);return ~~((a-b)/86400000/7+1.5);case"wo":a=replaceFunction("w");return a+ordinal(a);case"ww":return leftZeroFill(replaceFunction("w"),2);case"YY":return leftZeroFill(currentYear%100,2);case"YYYY":return currentYear;case"a":return meridiem?meridiem(currentHours,currentMinutes,false):(currentHours>11?"pm":"am");case"A":return meridiem?meridiem(currentHours,currentMinutes,true):(currentHours>11?"PM":"AM");
case"H":return currentHours;case"HH":return leftZeroFill(currentHours,2);case"h":return currentHours%12||12;case"hh":return leftZeroFill(currentHours%12||12,2);case"m":return currentMinutes;case"mm":return leftZeroFill(currentMinutes,2);case"s":return currentSeconds;case"ss":return leftZeroFill(currentSeconds,2);case"S":return ~~(currentMilliseconds/100);case"SS":return leftZeroFill(~~(currentMilliseconds/10),2);case"SSS":return leftZeroFill(currentMilliseconds,3);case"Z":return(currentZone<0?"-":"+")+leftZeroFill(~~(Math.abs(currentZone)/60),2)+":"+leftZeroFill(~~(Math.abs(currentZone)%60),2);
case"ZZ":return(currentZone<0?"-":"+")+leftZeroFill(~~(10*Math.abs(currentZone)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return formatMoment(m,moment.longDateFormat[input]);default:return input.replace(/(^\[)|(\\)|\]$/g,"")}}return inputString.replace(formattingTokens,replaceFunction)}function getParseRegexForToken(token){switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"ddd":case"dddd":case"a":case"A":return parseTokenWord;
case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"dd":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return new RegExp(token.replace("\\",""))}}function addTimeToArrayFromToken(token,input,datePartArray,config){var a;switch(token){case"M":case"MM":datePartArray[1]=(input==null)?0:~~input-1;break;case"MMM":case"MMMM":for(a=0;a<12;a++){if(moment.monthsParse[a].test(input)){datePartArray[1]=a;
break}}break;case"D":case"DD":case"DDD":case"DDDD":datePartArray[2]=~~input;break;case"YY":input=~~input;datePartArray[0]=input+(input>70?1900:2000);break;case"YYYY":datePartArray[0]=~~Math.abs(input);break;case"a":case"A":config.isPm=((input+"").toLowerCase()==="pm");break;case"H":case"HH":case"h":case"hh":datePartArray[3]=~~input;break;case"m":case"mm":datePartArray[4]=~~input;break;case"s":case"ss":datePartArray[5]=~~input;break;case"S":case"SS":case"SSS":datePartArray[6]=~~(("0."+input)*1000);break;case"Z":case"ZZ":config.isUTC=true;
a=(input+"").match(parseTimezoneChunker);if(a&&a[1]){config.tzh=~~a[1]}if(a&&a[2]){config.tzm=~~a[2]}if(a&&a[0]==="+"){config.tzh=-config.tzh;config.tzm=-config.tzm}break}}function makeDateFromStringAndFormat(string,format){var datePartArray=[0,0,1,0,0,0,0],config={tzh:0,tzm:0},tokens=format.match(formattingTokens),i,parsedInput;for(i=0;i<tokens.length;i++){parsedInput=(getParseRegexForToken(tokens[i]).exec(string)||[])[0];string=string.replace(getParseRegexForToken(tokens[i]),"");addTimeToArrayFromToken(tokens[i],parsedInput,datePartArray,config)
}if(config.isPm&&datePartArray[3]<12){datePartArray[3]+=12}if(config.isPm===false&&datePartArray[3]===12){datePartArray[3]=0}datePartArray[3]+=config.tzh;datePartArray[4]+=config.tzm;return config.isUTC?new Date(Date.UTC.apply({},datePartArray)):dateFromArray(datePartArray)}function compareArrays(array1,array2){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(~~array1[i]!==~~array2[i]){diffs++}}return diffs+lengthDiff}function makeDateFromStringAndArray(string,formats){var output,inputParts=string.match(parseMultipleFormatChunker)||[],formattedInputParts,scoreToBeat=99,i,currentDate,currentScore;
for(i=0;i<formats.length;i++){currentDate=makeDateFromStringAndFormat(string,formats[i]);formattedInputParts=formatMoment(new Moment(currentDate),formats[i]).match(parseMultipleFormatChunker)||[];currentScore=compareArrays(inputParts,formattedInputParts);if(currentScore<scoreToBeat){scoreToBeat=currentScore;output=currentDate}}return output}function makeDateFromString(string){var format="YYYY-MM-DDT",i;if(isoRegex.exec(string)){for(i=0;i<4;i++){if(isoTimes[i][1].exec(string)){format+=isoTimes[i][0];break}}return parseTokenTimezone.exec(string)?makeDateFromStringAndFormat(string,format+" Z"):makeDateFromStringAndFormat(string,format)
}return new Date(string)}function substituteTimeAgo(string,number,withoutSuffix,isFuture){var rt=moment.relativeTime[string];return(typeof rt==="function")?rt(number||1,!!withoutSuffix,string,isFuture):rt.replace(/%d/i,number||1)}function relativeTime(milliseconds,withoutSuffix){var seconds=round(Math.abs(milliseconds)/1000),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=seconds<45&&["s",seconds]||minutes===1&&["m"]||minutes<45&&["mm",minutes]||hours===1&&["h"]||hours<22&&["hh",hours]||days===1&&["d"]||days<=25&&["dd",days]||days<=45&&["M"]||days<345&&["MM",round(days/30)]||years===1&&["y"]||["yy",years];
args[2]=withoutSuffix;args[3]=milliseconds>0;return substituteTimeAgo.apply({},args)}moment=function(input,format){if(input===null||input===""){return null}var date,matched,isUTC;if(moment.isMoment(input)){date=new Date(+input._d);isUTC=input._isUTC}else{if(format){if(isArray(format)){date=makeDateFromStringAndArray(input,format)}else{date=makeDateFromStringAndFormat(input,format)}}else{matched=aspNetJsonRegex.exec(input);date=input===undefined?new Date():matched?new Date(+matched[1]):input instanceof Date?input:isArray(input)?dateFromArray(input):typeof input==="string"?makeDateFromString(input):new Date(input)
}}return new Moment(date,isUTC)};moment.utc=function(input,format){if(isArray(input)){return new Moment(new Date(Date.UTC.apply({},input)),true)}return(format&&input)?moment(input+" +0000",format+" Z").utc():moment(input&&!parseTokenTimezone.exec(input)?input+"+0000":input).utc()};moment.unix=function(input){return moment(input*1000)};moment.duration=function(input,key){var isDuration=moment.isDuration(input),isNumber=(typeof input==="number"),duration=(isDuration?input._data:(isNumber?{}:input));if(isNumber){if(key){duration[key]=input
}else{duration.milliseconds=input}}return new Duration(duration)};moment.humanizeDuration=function(num,type,withSuffix){return moment.duration(num,type===true?null:type).humanize(type===true?true:withSuffix)};moment.version=VERSION;moment.defaultFormat=isoFormat;moment.lang=function(key,values){var i,req,parse=[];if(!key){return currentLanguage}if(values){for(i=0;i<12;i++){parse[i]=new RegExp("^"+values.months[i]+"|^"+values.monthsShort[i].replace(".",""),"i")}values.monthsParse=values.monthsParse||parse;languages[key]=values
}if(languages[key]){for(i=0;i<langConfigProperties.length;i++){moment[langConfigProperties[i]]=languages[key][langConfigProperties[i]]||languages.en[langConfigProperties[i]]}currentLanguage=key}else{if(hasModule){req=require("./lang/"+key);moment.lang(key,req)}}};moment.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:false,calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(number){var b=number%10;
return(~~(number%100/10)===1)?"th":(b===1)?"st":(b===2)?"nd":(b===3)?"rd":"th"}});moment.isMoment=function(obj){return obj instanceof Moment};moment.isDuration=function(obj){return obj instanceof Duration};moment.fn=Moment.prototype={clone:function(){return moment(this)},valueOf:function(){return +this._d},unix:function(){return Math.floor(+this._d/1000)},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;
return this},format:function(inputString){return formatMoment(this,inputString?inputString:moment.defaultFormat)},add:function(input,val){var dur=val?moment.duration(+val,input):moment.duration(input);addOrSubtractDurationFromMoment(this,dur,1);return this},subtract:function(input,val){var dur=val?moment.duration(+val,input):moment.duration(input);addOrSubtractDurationFromMoment(this,dur,-1);return this},diff:function(input,val,asFloat){var inputMoment=this._isUTC?moment(input).utc():moment(input).local(),zoneDiff=(this.zone()-inputMoment.zone())*60000,diff=this._d-inputMoment._d-zoneDiff,year=this.year()-inputMoment.year(),month=this.month()-inputMoment.month(),date=this.date()-inputMoment.date(),output;
if(val==="months"){output=year*12+month+date/30}else{if(val==="years"){output=year+(month+date/30)/12}else{output=val==="seconds"?diff/1000:val==="minutes"?diff/60000:val==="hours"?diff/3600000:val==="days"?diff/86400000:val==="weeks"?diff/604800000:diff}}return asFloat?output:round(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var diff=this.diff(moment().sod(),"days",true),calendar=moment.calendar,allElse=calendar.sameElse,format=diff<-6?allElse:diff<-1?calendar.lastWeek:diff<0?calendar.lastDay:diff<1?calendar.sameDay:diff<2?calendar.nextDay:diff<7?calendar.nextWeek:allElse;
return this.format(typeof format==="function"?format.apply(this):format)},isLeapYear:function(){var year=this.year();return(year%4===0&&year%100!==0)||year%400===0},isDST:function(){return(this.zone()<moment([this.year()]).zone()||this.zone()<moment([this.year(),5]).zone())},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return input==null?day:this.add({d:input-day})},sod:function(){return moment(this).hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})
},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return moment(this).month(this.month()+1).date(0).date()}};function makeGetterAndSetter(name,key){moment.fn[name]=function(input){var utc=this._isUTC?"UTC":"";if(input!=null){this._d["set"+utc+key](input);return this}else{return this._d["get"+utc+key]()}}}for(i=0;i<proxyGettersAndSetters.length;i++){makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase(),proxyGettersAndSetters[i])}makeGetterAndSetter("year","FullYear");
moment.duration.fn=Duration.prototype={weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+this._months*2592000000},humanize:function(withSuffix){var difference=+this,rel=moment.relativeTime,output=relativeTime(difference,!withSuffix);if(withSuffix){output=(difference<=0?rel.past:rel.future).replace(/%s/i,output)}return output}};function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return +this/factor
}}for(i in unitMillisecondFactors){if(unitMillisecondFactors.hasOwnProperty(i)){makeDurationAsGetter(i,unitMillisecondFactors[i]);makeDurationGetter(i.toLowerCase())}}makeDurationAsGetter("Weeks",604800000);if(hasModule){module.exports=moment}if(typeof window!=="undefined"&&typeof ender==="undefined"){window.moment=moment}if(typeof define==="function"&&define.amd){define("moment",[],function(){return moment})}})(Date);(function($,undefined){$.fn.jPlayer=function(options){var name="jPlayer";var isMethodCall=typeof options==="string",args=Array.prototype.slice.call(arguments,1),returnValue=this;
options=!isMethodCall&&args.length?$.extend.apply(null,[true,options].concat(args)):options;if(isMethodCall&&options.charAt(0)==="_"){return returnValue}if(isMethodCall){this.each(function(){var instance=$.data(this,name),methodValue=instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance;if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue;return false}})}else{this.each(function(){var instance=$.data(this,name);if(instance){instance.option(options||{})
}else{$.data(this,name,new $.jPlayer(options,this))}})}return returnValue};$.jPlayer=function(options,element){if(arguments.length){this.element=$(element);this.options=$.extend(true,{},this.options,options);var self=this;this.element.bind("remove.jPlayer",function(){self.destroy()});this._init()}};$.jPlayer.emulateMethods="load play pause";$.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";$.jPlayer.emulateOptions="muted volume";$.jPlayer.reservedEvent="ready resize error warning";
$.jPlayer.event={ready:"jPlayer_ready",resize:"jPlayer_resize",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"};
$.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","loadeddata","canplaythrough","ratechange"];$.jPlayer.pause=function(){$.each($.jPlayer.prototype.instances,function(i,element){if(element.data("jPlayer").status.srcSet){element.jPlayer("pause")}})};$.jPlayer.timeFormat={showHour:false,showMin:true,showSec:true,padHour:false,padMin:true,padSec:true,sepHour:":",sepMin:":",sepSec:""};$.jPlayer.convertTime=function(s){var myTime=new Date(s*1000);var hour=myTime.getUTCHours();var min=myTime.getUTCMinutes();
var sec=myTime.getUTCSeconds();var strHour=($.jPlayer.timeFormat.padHour&&hour<10)?"0"+hour:hour;var strMin=($.jPlayer.timeFormat.padMin&&min<10)?"0"+min:min;var strSec=($.jPlayer.timeFormat.padSec&&sec<10)?"0"+sec:sec;return(($.jPlayer.timeFormat.showHour)?strHour+$.jPlayer.timeFormat.sepHour:"")+(($.jPlayer.timeFormat.showMin)?strMin+$.jPlayer.timeFormat.sepMin:"")+(($.jPlayer.timeFormat.showSec)?strSec+$.jPlayer.timeFormat.sepSec:"")};$.jPlayer.uaBrowser=function(userAgent){var ua=userAgent.toLowerCase();
var rwebkit=/(webkit)[ \/]([\w.]+)/;var ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/;var rmsie=/(msie) ([\w.]+)/;var rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/;var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};$.jPlayer.uaPlatform=function(userAgent){var ua=userAgent.toLowerCase();var rplatform=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/;var rtablet=/(ipad|playbook)/;var randroid=/(android)/;
var rmobile=/(mobile)/;var platform=rplatform.exec(ua)||[];var tablet=rtablet.exec(ua)||!rmobile.exec(ua)&&randroid.exec(ua)||[];return{platform:platform[1]||"",tablet:tablet[1]||""}};$.jPlayer.browser={};$.jPlayer.platform={};var browserMatch=$.jPlayer.uaBrowser(navigator.userAgent);if(browserMatch.browser){$.jPlayer.browser[browserMatch.browser]=true;$.jPlayer.browser.version=browserMatch.version}var platformMatch=$.jPlayer.uaPlatform(navigator.userAgent);if(platformMatch.platform){$.jPlayer.platform[platformMatch.platform]=true;
$.jPlayer.platform.mobile=!platformMatch.tablet;$.jPlayer.platform.tablet=!!platformMatch.tablet}$.jPlayer.prototype={count:0,version:{script:"2.0.15",needFlash:"2.0.9",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:0.8,muted:false,wmode:"window",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen"},fullScreen:false,idPrefix:"jp",noConflict:"jQuery",emulateHtml:false,errorAlerts:false,warningAlerts:false},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"90%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:true,format:{},formatType:"",waitForPlay:true,waitForLoad:true,srcSet:false,video:false,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:false},solution:{html:true,flash:true},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:true,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:true,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:false,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:false,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:false,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:true,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:true,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:false,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:false,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:true,media:"video"}},_init:function(){var self=this;
this.element.empty();this.status=$.extend({},this.status);this.internal=$.extend({},this.internal);this.internal.domNode=this.element.get(0);this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=this._limitValue(this.options.volume,0,1);$.each(this.options.supplied.toLowerCase().split(","),function(index1,value1){var format=value1.replace(/^\s+|\s+$/g,"");
if(self.format[format]){var dupFound=false;$.each(self.formats,function(index2,value2){if(format===value2){dupFound=true;return false}});if(!dupFound){self.formats.push(format)}}});$.each(this.options.solution.toLowerCase().split(","),function(index1,value1){var solution=value1.replace(/^\s+|\s+$/g,"");if(self.solution[solution]){var dupFound=false;$.each(self.solutions,function(index2,value2){if(solution===value2){dupFound=true;return false}});if(!dupFound){self.solutions.push(solution)}}});this.internal.instance="jp_"+this.count;
this.instances[this.internal.instance]=this.element;if(this.element.attr("id")===""){this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count)}this.internal.self=$.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=$.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:undefined});this.internal.video=$.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:undefined});this.internal.flash=$.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:undefined,swf:this.options.swfPath+((this.options.swfPath!==""&&this.options.swfPath.slice(-1)!=="/")?"/":"")+"Jplayer.swf"});
this.internal.poster=$.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:undefined});$.each($.jPlayer.event,function(eventName,eventType){if(self.options[eventName]!==undefined){self.element.bind(eventType+".jPlayer",self.options[eventName]);self.options[eventName]=undefined}});this.require.audio=false;this.require.video=false;$.each(this.formats,function(priority,format){self.require[self.format[format].media]=true});if(this.require.video){this.options=$.extend(true,{},this.optionsVideo,this.options)
}else{this.options=$.extend(true,{},this.optionsAudio,this.options)}this._setSize();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){if(!self.status.video||self.status.waitForPlay){self.internal.poster.jq.show()}};this.element.append(this.htmlElement.poster);this.internal.poster.jq=$("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();
this.html.audio.available=false;if(this.require.audio){this.htmlElement.audio=document.createElement("audio");this.htmlElement.audio.id=this.internal.audio.id;this.html.audio.available=!!this.htmlElement.audio.canPlayType}this.html.video.available=false;if(this.require.video){this.htmlElement.video=document.createElement("video");this.htmlElement.video.id=this.internal.video.id;this.html.video.available=!!this.htmlElement.video.canPlayType}this.flash.available=this._checkForFlash(10);this.html.canPlay={};this.flash.canPlay={};
$.each(this.formats,function(priority,format){self.html.canPlay[format]=self.html[self.format[format].media].available&&""!==self.htmlElement[self.format[format].media].canPlayType(self.format[format].codec);self.flash.canPlay[format]=self.format[format].flashCanPlay&&self.flash.available});this.html.desired=false;this.flash.desired=false;$.each(this.solutions,function(solutionPriority,solution){if(solutionPriority===0){self[solution].desired=true}else{var audioCanPlay=false;var videoCanPlay=false;$.each(self.formats,function(formatPriority,format){if(self[self.solutions[0]].canPlay[format]){if(self.format[format].media==="video"){videoCanPlay=true
}else{audioCanPlay=true}}});self[solution].desired=(self.require.audio&&!audioCanPlay)||(self.require.video&&!videoCanPlay)}});this.html.support={};this.flash.support={};$.each(this.formats,function(priority,format){self.html.support[format]=self.html.canPlay[format]&&self.html.desired;self.flash.support[format]=self.flash.canPlay[format]&&self.flash.desired});this.html.used=false;this.flash.used=false;$.each(this.solutions,function(solutionPriority,solution){$.each(self.formats,function(formatPriority,format){if(self[solution].support[format]){self[solution].used=true;
return false}})});this.html.active=false;this.html.audio.gate=false;this.html.video.gate=false;this.flash.active=false;this.flash.gate=false;this._cssSelectorAncestor(this.options.cssSelectorAncestor);if(!(this.html.used||this.flash.used)){this._error({type:$.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:$.jPlayer.errorMsg.NO_SOLUTION,hint:$.jPlayer.errorHint.NO_SOLUTION})}if(this.flash.used){var htmlObj,flashVars="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;
if($.browser.msie&&Number($.browser.version)<=8){var objStr='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0"></object>';var paramStr=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+flashVars+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];htmlObj=document.createElement(objStr);
for(var i=0;i<paramStr.length;i++){htmlObj.appendChild(document.createElement(paramStr[i]))}}else{var createParam=function(el,n,v){var p=document.createElement("param");p.setAttribute("name",n);p.setAttribute("value",v);el.appendChild(p)};htmlObj=document.createElement("object");htmlObj.setAttribute("id",this.internal.flash.id);htmlObj.setAttribute("data",this.internal.flash.swf);htmlObj.setAttribute("type","application/x-shockwave-flash");htmlObj.setAttribute("width","1");htmlObj.setAttribute("height","1");
createParam(htmlObj,"flashvars",flashVars);createParam(htmlObj,"allowscriptaccess","always");createParam(htmlObj,"bgcolor",this.options.backgroundColor);createParam(htmlObj,"wmode",this.options.wmode)}this.element.append(htmlObj);this.internal.flash.jq=$(htmlObj)}if(this.html.used){if(this.html.audio.available){this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio);this.element.append(this.htmlElement.audio);this.internal.audio.jq=$("#"+this.internal.audio.id)}if(this.html.video.available){this._addHtmlEventListeners(this.htmlElement.video,this.html.video);
this.element.append(this.htmlElement.video);this.internal.video.jq=$("#"+this.internal.video.id);this.internal.video.jq.css({width:"0px",height:"0px"})}}if(this.options.emulateHtml){this._emulateHtmlBridge()}if(this.html.used&&!this.flash.used){window.setTimeout(function(){self.internal.ready=true;self.version.flash="n/a";self._trigger($.jPlayer.event.ready)},100)}this._updateInterface();this._updateButtons(false);this._updateVolume(this.options.volume);this._updateMute(this.options.muted);if(this.css.jq.videoPlay.length){this.css.jq.videoPlay.hide()
}$.jPlayer.prototype.count++},destroy:function(){this._resetStatus();this._updateInterface();this._seeked();if(this.css.jq.currentTime.length){this.css.jq.currentTime.text("")}if(this.css.jq.duration.length){this.css.jq.duration.text("")}if(this.status.srcSet){this.pause()}$.each(this.css.jq,function(fn,jq){if(jq.length){jq.unbind(".jPlayer")}});if(this.options.emulateHtml){this._destroyHtmlBridge()}this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();this.instances[this.internal.instance]=undefined
},enable:function(){},disable:function(){},_addHtmlEventListeners:function(mediaElement,entity){var self=this;mediaElement.preload=this.options.preload;mediaElement.muted=this.options.muted;mediaElement.volume=this.options.volume;mediaElement.addEventListener("progress",function(){if(entity.gate&&!self.status.waitForLoad){self._getHtmlStatus(mediaElement);self._updateInterface();self._trigger($.jPlayer.event.progress)}},false);mediaElement.addEventListener("timeupdate",function(){if(entity.gate&&!self.status.waitForLoad){self._getHtmlStatus(mediaElement);
self._updateInterface();self._trigger($.jPlayer.event.timeupdate)}},false);mediaElement.addEventListener("durationchange",function(){if(entity.gate&&!self.status.waitForLoad){self.status.duration=this.duration;self._getHtmlStatus(mediaElement);self._updateInterface();self._trigger($.jPlayer.event.durationchange)}},false);mediaElement.addEventListener("play",function(){if(entity.gate&&!self.status.waitForLoad){self._updateButtons(true);self._trigger($.jPlayer.event.play)}},false);mediaElement.addEventListener("playing",function(){if(entity.gate&&!self.status.waitForLoad){self._updateButtons(true);
self._seeked();self._trigger($.jPlayer.event.playing)}},false);mediaElement.addEventListener("pause",function(){if(entity.gate&&!self.status.waitForLoad){self._updateButtons(false);self._trigger($.jPlayer.event.pause)}},false);mediaElement.addEventListener("waiting",function(){if(entity.gate&&!self.status.waitForLoad){self._seeking();self._trigger($.jPlayer.event.waiting)}},false);mediaElement.addEventListener("canplay",function(){if(entity.gate&&!self.status.waitForLoad){mediaElement.volume=self._volumeFix(self.options.volume);
self._trigger($.jPlayer.event.canplay)}},false);mediaElement.addEventListener("seeking",function(){if(entity.gate&&!self.status.waitForLoad){self._seeking();self._trigger($.jPlayer.event.seeking)}},false);mediaElement.addEventListener("seeked",function(){if(entity.gate&&!self.status.waitForLoad){self._seeked();self._trigger($.jPlayer.event.seeked)}},false);mediaElement.addEventListener("suspend",function(){if(entity.gate&&!self.status.waitForLoad){self._seeked();self._trigger($.jPlayer.event.suspend)}},false);
mediaElement.addEventListener("ended",function(){if(entity.gate&&!self.status.waitForLoad){if(!$.jPlayer.browser.webkit){self.htmlElement.media.currentTime=0}self.htmlElement.media.pause();self._updateButtons(false);self._getHtmlStatus(mediaElement,true);self._updateInterface();self._trigger($.jPlayer.event.ended)}},false);mediaElement.addEventListener("error",function(){if(entity.gate&&!self.status.waitForLoad){self._updateButtons(false);self._seeked();if(self.status.srcSet){clearTimeout(self.internal.htmlDlyCmdId);
self.status.waitForLoad=true;self.status.waitForPlay=true;if(self.status.video){self.internal.video.jq.css({width:"0px",height:"0px"})}if(self._validString(self.status.media.poster)){self.internal.poster.jq.show()}if(self.css.jq.videoPlay.length){self.css.jq.videoPlay.show()}self._error({type:$.jPlayer.error.URL,context:self.status.src,message:$.jPlayer.errorMsg.URL,hint:$.jPlayer.errorHint.URL})}}},false);$.each($.jPlayer.htmlEvent,function(i,eventType){mediaElement.addEventListener(this,function(){if(entity.gate&&!self.status.waitForLoad){self._trigger($.jPlayer.event[eventType])
}},false)})},_getHtmlStatus:function(media,override){var ct=0,d=0,cpa=0,sp=0,cpr=0;if(media.duration){this.status.duration=media.duration}ct=media.currentTime;cpa=(this.status.duration>0)?100*ct/this.status.duration:0;if((typeof media.seekable==="object")&&(media.seekable.length>0)){sp=(this.status.duration>0)?100*media.seekable.end(media.seekable.length-1)/this.status.duration:100;cpr=100*media.currentTime/media.seekable.end(media.seekable.length-1)}else{sp=100;cpr=cpa}if(override){ct=0;cpr=0;cpa=0}this.status.seekPercent=sp;
this.status.currentPercentRelative=cpr;this.status.currentPercentAbsolute=cpa;this.status.currentTime=ct;this.status.readyState=media.readyState;this.status.networkState=media.networkState;this.status.playbackRate=media.playbackRate;this.status.ended=media.ended},_resetStatus:function(){this.status=$.extend({},this.status,$.jPlayer.prototype.status)},_trigger:function(eventType,error,warning){var event=$.Event(eventType);event.jPlayer={};event.jPlayer.version=$.extend({},this.version);event.jPlayer.options=$.extend(true,{},this.options);
event.jPlayer.status=$.extend(true,{},this.status);event.jPlayer.html=$.extend(true,{},this.html);event.jPlayer.flash=$.extend(true,{},this.flash);if(error){event.jPlayer.error=$.extend({},error)}if(warning){event.jPlayer.warning=$.extend({},warning)}this.element.trigger(event)},jPlayerFlashEvent:function(eventType,status){if(eventType===$.jPlayer.event.ready&&!this.internal.ready){this.internal.ready=true;this.internal.flash.jq.css({width:"0px",height:"0px"});this.version.flash=status.version;if(this.version.needFlash!==this.version.flash){this._error({type:$.jPlayer.error.VERSION,context:this.version.flash,message:$.jPlayer.errorMsg.VERSION+this.version.flash,hint:$.jPlayer.errorHint.VERSION})
}this._trigger(eventType)}if(this.flash.gate){switch(eventType){case $.jPlayer.event.progress:this._getFlashStatus(status);this._updateInterface();this._trigger(eventType);break;case $.jPlayer.event.timeupdate:this._getFlashStatus(status);this._updateInterface();this._trigger(eventType);break;case $.jPlayer.event.play:this._seeked();this._updateButtons(true);this._trigger(eventType);break;case $.jPlayer.event.pause:this._updateButtons(false);this._trigger(eventType);break;case $.jPlayer.event.ended:this._updateButtons(false);
this._trigger(eventType);break;case $.jPlayer.event.error:this.status.waitForLoad=true;this.status.waitForPlay=true;if(this.status.video){this.internal.flash.jq.css({width:"0px",height:"0px"})}if(this._validString(this.status.media.poster)){this.internal.poster.jq.show()}if(this.css.jq.videoPlay.length){this.css.jq.videoPlay.show()}if(this.status.video){this._flash_setVideo(this.status.media)}else{this._flash_setAudio(this.status.media)}this._error({type:$.jPlayer.error.URL,context:status.src,message:$.jPlayer.errorMsg.URL,hint:$.jPlayer.errorHint.URL});
break;case $.jPlayer.event.seeking:this._seeking();this._trigger(eventType);break;case $.jPlayer.event.seeked:this._seeked();this._trigger(eventType);break;case $.jPlayer.event.ready:break;default:this._trigger(eventType)}}return false},_getFlashStatus:function(status){this.status.seekPercent=status.seekPercent;this.status.currentPercentRelative=status.currentPercentRelative;this.status.currentPercentAbsolute=status.currentPercentAbsolute;this.status.currentTime=status.currentTime;this.status.duration=status.duration;
this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=false},_updateButtons:function(playing){this.status.paused=!playing;if(this.css.jq.play.length&&this.css.jq.pause.length){if(playing){this.css.jq.play.hide();this.css.jq.pause.show()}else{this.css.jq.play.show();this.css.jq.pause.hide()}}},_updateInterface:function(){if(this.css.jq.seekBar.length){this.css.jq.seekBar.width(this.status.seekPercent+"%")}if(this.css.jq.playBar.length){this.css.jq.playBar.width(this.status.currentPercentRelative+"%")
}if(this.css.jq.currentTime.length){this.css.jq.currentTime.text($.jPlayer.convertTime(this.status.currentTime))}if(this.css.jq.duration.length){this.css.jq.duration.text($.jPlayer.convertTime(this.status.duration))}},_seeking:function(){if(this.css.jq.seekBar.length){this.css.jq.seekBar.addClass("jp-seeking-bg")}},_seeked:function(){if(this.css.jq.seekBar.length){this.css.jq.seekBar.removeClass("jp-seeking-bg")}},setMedia:function(media){var self=this;this._seeked();clearTimeout(this.internal.htmlDlyCmdId);
var audioGate=this.html.audio.gate;var videoGate=this.html.video.gate;var supported=false;$.each(this.formats,function(formatPriority,format){var isVideo=self.format[format].media==="video";$.each(self.solutions,function(solutionPriority,solution){if(self[solution].support[format]&&self._validString(media[format])){var isHtml=solution==="html";if(isVideo){if(isHtml){self.html.audio.gate=false;self.html.video.gate=true;self.flash.gate=false}else{self.html.audio.gate=false;self.html.video.gate=false;self.flash.gate=true
}}else{if(isHtml){self.html.audio.gate=true;self.html.video.gate=false;self.flash.gate=false}else{self.html.audio.gate=false;self.html.video.gate=false;self.flash.gate=true}}if(self.flash.active||(self.html.active&&self.flash.gate)||(audioGate===self.html.audio.gate&&videoGate===self.html.video.gate)){self.clearMedia()}else{if(audioGate!==self.html.audio.gate&&videoGate!==self.html.video.gate){self._html_pause();if(self.status.video){self.internal.video.jq.css({width:"0px",height:"0px"})}self._resetStatus()}}if(isVideo){if(isHtml){self._html_setVideo(media);
self.html.active=true;self.flash.active=false}else{self._flash_setVideo(media);self.html.active=false;self.flash.active=true}if(self.css.jq.videoPlay.length){self.css.jq.videoPlay.show()}self.status.video=true}else{if(isHtml){self._html_setAudio(media);self.html.active=true;self.flash.active=false}else{self._flash_setAudio(media);self.html.active=false;self.flash.active=true}if(self.css.jq.videoPlay.length){self.css.jq.videoPlay.hide()}self.status.video=false}supported=true;return false}});if(supported){return false
}});if(supported){if(this._validString(media.poster)){if(this.htmlElement.poster.src!==media.poster){this.htmlElement.poster.src=media.poster}else{this.internal.poster.jq.show()}}else{this.internal.poster.jq.hide()}this.status.srcSet=true;this.status.media=$.extend({},media);this._updateButtons(false);this._updateInterface()}else{if(this.status.srcSet&&!this.status.waitForPlay){this.pause()}this.html.audio.gate=false;this.html.video.gate=false;this.flash.gate=false;this.html.active=false;this.flash.active=false;
this._resetStatus();this._updateInterface();this._updateButtons(false);this.internal.poster.jq.hide();if(this.html.used&&this.require.video){this.internal.video.jq.css({width:"0px",height:"0px"})}if(this.flash.used){this.internal.flash.jq.css({width:"0px",height:"0px"})}this._error({type:$.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:$.jPlayer.errorMsg.NO_SUPPORT,hint:$.jPlayer.errorHint.NO_SUPPORT})}},clearMedia:function(){this._resetStatus();this._updateButtons(false);this.internal.poster.jq.hide();
clearTimeout(this.internal.htmlDlyCmdId);if(this.html.active){this._html_clearMedia()}else{if(this.flash.active){this._flash_clearMedia()}}},load:function(){if(this.status.srcSet){if(this.html.active){this._html_load()}else{if(this.flash.active){this._flash_load()}}}else{this._urlNotSetError("load")}},play:function(time){time=(typeof time==="number")?time:NaN;if(this.status.srcSet){if(this.html.active){this._html_play(time)}else{if(this.flash.active){this._flash_play(time)}}}else{this._urlNotSetError("play")
}},videoPlay:function(e){this.play()},pause:function(time){time=(typeof time==="number")?time:NaN;if(this.status.srcSet){if(this.html.active){this._html_pause(time)}else{if(this.flash.active){this._flash_pause(time)}}}else{this._urlNotSetError("pause")}},pauseOthers:function(){var self=this;$.each(this.instances,function(i,element){if(self.element!==element){if(element.data("jPlayer").status.srcSet){element.jPlayer("pause")}}})},stop:function(){if(this.status.srcSet){if(this.html.active){this._html_pause(0)}else{if(this.flash.active){this._flash_pause(0)
}}}else{this._urlNotSetError("stop")}},playHead:function(p){p=this._limitValue(p,0,100);if(this.status.srcSet){if(this.html.active){this._html_playHead(p)}else{if(this.flash.active){this._flash_playHead(p)}}}else{this._urlNotSetError("playHead")}},_muted:function(muted){this.options.muted=muted;if(this.html.used){this._html_mute(muted)}if(this.flash.used){this._flash_mute(muted)}this._updateMute(muted);this._updateVolume(this.options.volume);this._trigger($.jPlayer.event.volumechange)},mute:function(mute){mute=mute===undefined?true:!!mute;
this._muted(mute)},unmute:function(unmute){unmute=unmute===undefined?true:!!unmute;this._muted(!unmute)},_updateMute:function(mute){if(this.css.jq.mute.length&&this.css.jq.unmute.length){if(mute){this.css.jq.mute.hide();this.css.jq.unmute.show()}else{this.css.jq.mute.show();this.css.jq.unmute.hide()}}},volume:function(v){v=this._limitValue(v,0,1);this.options.volume=v;if(this.html.used){this._html_volume(v)}if(this.flash.used){this._flash_volume(v)}this._updateVolume(v);this._trigger($.jPlayer.event.volumechange)
},volumeBar:function(e){if(!this.options.muted&&this.css.jq.volumeBar.length){var offset=this.css.jq.volumeBar.offset();var x=e.pageX-offset.left;var w=this.css.jq.volumeBar.width();var v=x/w;this.volume(v)}},volumeBarValue:function(e){this.volumeBar(e)},_updateVolume:function(v){v=this.options.muted?0:v;if(this.css.jq.volumeBarValue.length){this.css.jq.volumeBarValue.width((v*100)+"%")}},_volumeFix:function(v){var rnd=0.001*Math.random();var fix=(v<0.5)?rnd:-rnd;return(v+fix)},_cssSelectorAncestor:function(ancestor){var self=this;
this.options.cssSelectorAncestor=ancestor;this._removeUiClass();this.ancestorJq=ancestor?$(ancestor):[];if(ancestor&&this.ancestorJq.length!==1){this._warning({type:$.jPlayer.warning.CSS_SELECTOR_COUNT,context:ancestor,message:$.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:$.jPlayer.warningHint.CSS_SELECTOR_COUNT})}this._addUiClass();$.each(this.options.cssSelector,function(fn,cssSel){self._cssSelector(fn,cssSel)})},_cssSelector:function(fn,cssSel){var self=this;
if(typeof cssSel==="string"){if($.jPlayer.prototype.options.cssSelector[fn]){if(this.css.jq[fn]&&this.css.jq[fn].length){this.css.jq[fn].unbind(".jPlayer")}this.options.cssSelector[fn]=cssSel;this.css.cs[fn]=this.options.cssSelectorAncestor+" "+cssSel;if(cssSel){this.css.jq[fn]=$(this.css.cs[fn])}else{this.css.jq[fn]=[]}if(this.css.jq[fn].length){var handler=function(e){self[fn](e);$(this).blur();return false};this.css.jq[fn].bind("click.jPlayer",handler)}if(cssSel&&this.css.jq[fn].length!==1){this._warning({type:$.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[fn],message:$.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[fn].length+" found for "+fn+" method.",hint:$.jPlayer.warningHint.CSS_SELECTOR_COUNT})
}}else{this._warning({type:$.jPlayer.warning.CSS_SELECTOR_METHOD,context:fn,message:$.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:$.jPlayer.warningHint.CSS_SELECTOR_METHOD})}}else{this._warning({type:$.jPlayer.warning.CSS_SELECTOR_STRING,context:cssSel,message:$.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:$.jPlayer.warningHint.CSS_SELECTOR_STRING})}},seekBar:function(e){if(this.css.jq.seekBar){var offset=this.css.jq.seekBar.offset();var x=e.pageX-offset.left;var w=this.css.jq.seekBar.width();var p=100*x/w;this.playHead(p)
}},playBar:function(e){this.seekBar(e)},currentTime:function(e){},duration:function(e){},option:function(key,value){var options=key;if(arguments.length===0){return $.extend(true,{},this.options)}if(typeof key==="string"){var keys=key.split(".");if(value===undefined){var opt=$.extend(true,{},this.options);for(var i=0;i<keys.length;i++){if(opt[keys[i]]!==undefined){opt=opt[keys[i]]}else{this._warning({type:$.jPlayer.warning.OPTION_KEY,context:key,message:$.jPlayer.warningMsg.OPTION_KEY,hint:$.jPlayer.warningHint.OPTION_KEY});
return undefined}}return opt}options={};var opts=options;for(var j=0;j<keys.length;j++){if(j<keys.length-1){opts[keys[j]]={};opts=opts[keys[j]]}else{opts[keys[j]]=value}}}this._setOptions(options);return this},_setOptions:function(options){var self=this;$.each(options,function(key,value){self._setOption(key,value)});return this},_setOption:function(key,value){var self=this;switch(key){case"volume":this.volume(value);break;case"muted":this._muted(value);break;case"cssSelectorAncestor":this._cssSelectorAncestor(value);
break;case"cssSelector":$.each(value,function(fn,cssSel){self._cssSelector(fn,cssSel)});break;case"fullScreen":if(this.options[key]!==value){this._removeUiClass();this.options[key]=value;this._refreshSize()}break;case"size":if(!this.options.fullScreen&&this.options[key].cssClass!==value.cssClass){this._removeUiClass()}this.options[key]=$.extend({},this.options[key],value);this._refreshSize();break;case"sizeFull":if(this.options.fullScreen&&this.options[key].cssClass!==value.cssClass){this._removeUiClass()}this.options[key]=$.extend({},this.options[key],value);
this._refreshSize();break;case"emulateHtml":if(this.options[key]!==value){this.options[key]=value;if(value){this._emulateHtmlBridge()}else{this._destroyHtmlBridge()}}break}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize()},_setSize:function(){if(this.options.fullScreen){this.status.width=this.options.sizeFull.width;this.status.height=this.options.sizeFull.height;this.status.cssClass=this.options.sizeFull.cssClass}else{this.status.width=this.options.size.width;this.status.height=this.options.size.height;
this.status.cssClass=this.options.size.cssClass}this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){if(this.ancestorJq.length){this.ancestorJq.addClass(this.status.cssClass)}},_removeUiClass:function(){if(this.ancestorJq.length){this.ancestorJq.removeClass(this.status.cssClass)}},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});if(!this.status.waitForPlay){if(this.html.active&&this.status.video){this.internal.video.jq.css({width:this.status.width,height:this.status.height})
}else{if(this.flash.active){this.internal.flash.jq.css({width:this.status.width,height:this.status.height})}}}},fullScreen:function(){this._setOption("fullScreen",true)},restoreScreen:function(){this._setOption("fullScreen",false)},_html_initMedia:function(){if(this.status.srcSet&&!this.status.waitForPlay){this.htmlElement.media.pause()}if(this.options.preload!=="none"){this._html_load()}this._trigger($.jPlayer.event.timeupdate)},_html_setAudio:function(media){var self=this;$.each(this.formats,function(priority,format){if(self.html.support[format]&&media[format]){self.status.src=media[format];
self.status.format[format]=true;self.status.formatType=format;return false}});this.htmlElement.media=this.htmlElement.audio;this._html_initMedia()},_html_setVideo:function(media){var self=this;$.each(this.formats,function(priority,format){if(self.html.support[format]&&media[format]){self.status.src=media[format];self.status.format[format]=true;self.status.formatType=format;return false}});this.htmlElement.media=this.htmlElement.video;this._html_initMedia()},_html_clearMedia:function(){if(this.htmlElement.media){if(this.htmlElement.media.id===this.internal.video.id){this.internal.video.jq.css({width:"0px",height:"0px"})
}this.htmlElement.media.pause();this.htmlElement.media.src="";this.htmlElement.media.load()}},_html_load:function(){if(this.status.waitForLoad){this.status.waitForLoad=false;this.htmlElement.media.src=this.status.src;this.htmlElement.media.load()}clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(time){var self=this;this._html_load();this.htmlElement.media.play();if(!isNaN(time)){try{this.htmlElement.media.currentTime=time}catch(err){this.internal.htmlDlyCmdId=setTimeout(function(){self.play(time)
},100);return}}this._html_checkWaitForPlay()},_html_pause:function(time){var self=this;if(time>0){this._html_load()}else{clearTimeout(this.internal.htmlDlyCmdId)}this.htmlElement.media.pause();if(!isNaN(time)){try{this.htmlElement.media.currentTime=time}catch(err){this.internal.htmlDlyCmdId=setTimeout(function(){self.pause(time)},100);return}}if(time>0){this._html_checkWaitForPlay()}},_html_playHead:function(percent){var self=this;this._html_load();try{if((typeof this.htmlElement.media.seekable==="object")&&(this.htmlElement.media.seekable.length>0)){this.htmlElement.media.currentTime=percent*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100
}else{if(this.htmlElement.media.duration>0&&!isNaN(this.htmlElement.media.duration)){this.htmlElement.media.currentTime=percent*this.htmlElement.media.duration/100}else{throw"e"}}}catch(err){this.internal.htmlDlyCmdId=setTimeout(function(){self.playHead(percent)},100);return}if(!this.status.waitForLoad){this._html_checkWaitForPlay()}},_html_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;if(this.css.jq.videoPlay.length){this.css.jq.videoPlay.hide()}if(this.status.video){this.internal.poster.jq.hide();
this.internal.video.jq.css({width:this.status.width,height:this.status.height})}}},_html_volume:function(v){if(this.html.audio.available){this.htmlElement.audio.volume=v}if(this.html.video.available){this.htmlElement.video.volume=v}},_html_mute:function(m){if(this.html.audio.available){this.htmlElement.audio.muted=m}if(this.html.video.available){this.htmlElement.video.muted=m}},_flash_setAudio:function(media){var self=this;try{$.each(this.formats,function(priority,format){if(self.flash.support[format]&&media[format]){switch(format){case"m4a":case"fla":self._getMovie().fl_setAudio_m4a(media[format]);
break;case"mp3":self._getMovie().fl_setAudio_mp3(media[format]);break}self.status.src=media[format];self.status.format[format]=true;self.status.formatType=format;return false}});if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(err){this._flashError(err)}},_flash_setVideo:function(media){var self=this;try{$.each(this.formats,function(priority,format){if(self.flash.support[format]&&media[format]){switch(format){case"m4v":case"flv":self._getMovie().fl_setVideo_m4v(media[format]);
break}self.status.src=media[format];self.status.format[format]=true;self.status.formatType=format;return false}});if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(err){this._flashError(err)}},_flash_clearMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});try{this._getMovie().fl_clearMedia()}catch(err){this._flashError(err)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(err){this._flashError(err)}this.status.waitForLoad=false},_flash_play:function(time){try{this._getMovie().fl_play(time)
}catch(err){this._flashError(err)}this.status.waitForLoad=false;this._flash_checkWaitForPlay()},_flash_pause:function(time){try{this._getMovie().fl_pause(time)}catch(err){this._flashError(err)}if(time>0){this.status.waitForLoad=false;this._flash_checkWaitForPlay()}},_flash_playHead:function(p){try{this._getMovie().fl_play_head(p)}catch(err){this._flashError(err)}if(!this.status.waitForLoad){this._flash_checkWaitForPlay()}},_flash_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;
if(this.css.jq.videoPlay.length){this.css.jq.videoPlay.hide()}if(this.status.video){this.internal.poster.jq.hide();this.internal.flash.jq.css({width:this.status.width,height:this.status.height})}}},_flash_volume:function(v){try{this._getMovie().fl_volume(v)}catch(err){this._flashError(err)}},_flash_mute:function(m){try{this._getMovie().fl_mute(m)}catch(err){this._flashError(err)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(version){var flashIsInstalled=false;var flash;
if(window.ActiveXObject){try{flash=new ActiveXObject(("ShockwaveFlash.ShockwaveFlash."+version));flashIsInstalled=true}catch(e){}}else{if(navigator.plugins&&navigator.mimeTypes.length>0){flash=navigator.plugins["Shockwave Flash"];if(flash){var flashVersion=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1");if(flashVersion>=version){flashIsInstalled=true}}}}return flashIsInstalled},_validString:function(url){return(url&&typeof url==="string")},_limitValue:function(value,min,max){return(value<min)?min:((value>max)?max:value)
},_urlNotSetError:function(context){this._error({type:$.jPlayer.error.URL_NOT_SET,context:context,message:$.jPlayer.errorMsg.URL_NOT_SET,hint:$.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(error){this._error({type:$.jPlayer.error.FLASH,context:this.internal.flash.swf,message:$.jPlayer.errorMsg.FLASH+error.message,hint:$.jPlayer.errorHint.FLASH})},_error:function(error){this._trigger($.jPlayer.event.error,error);if(this.options.errorAlerts){this._alert("Error!"+(error.message?"\n\n"+error.message:"")+(error.hint?"\n\n"+error.hint:"")+"\n\nContext: "+error.context)
}},_warning:function(warning){this._trigger($.jPlayer.event.warning,undefined,warning);if(this.options.warningAlerts){this._alert("Warning!"+(warning.message?"\n\n"+warning.message:"")+(warning.hint?"\n\n"+warning.hint:"")+"\n\nContext: "+warning.context)}},_alert:function(message){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+message)},_emulateHtmlBridge:function(){var self=this,methods=$.jPlayer.emulateMethods;$.each($.jPlayer.emulateMethods.split(/\s+/g),function(i,name){self.internal.domNode[name]=function(arg){self[name](arg)
}});$.each($.jPlayer.event,function(eventName,eventType){var nativeEvent=true;$.each($.jPlayer.reservedEvent.split(/\s+/g),function(i,name){if(name===eventName){nativeEvent=false;return false}});if(nativeEvent){self.element.bind(eventType+".jPlayer.jPlayerHtml",function(){self._emulateHtmlUpdate();var domEvent=document.createEvent("Event");domEvent.initEvent(eventName,false,true);self.internal.domNode.dispatchEvent(domEvent)})}})},_emulateHtmlUpdate:function(){var self=this;$.each($.jPlayer.emulateStatus.split(/\s+/g),function(i,name){self.internal.domNode[name]=self.status[name]
});$.each($.jPlayer.emulateOptions.split(/\s+/g),function(i,name){self.internal.domNode[name]=self.options[name]})},_destroyHtmlBridge:function(){var self=this;this.element.unbind(".jPlayerHtml");var emulated=$.jPlayer.emulateMethods+" "+$.jPlayer.emulateStatus+" "+$.jPlayer.emulateOptions;$.each(emulated.split(/\s+/g),function(i,name){delete self.internal.domNode[name]})}};$.jPlayer.error={FLASH:"e_flash",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};
$.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+$.jPlayer.prototype.version.script+" needs Jplayer.swf version "+$.jPlayer.prototype.version.needFlash+" but found "};
$.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};$.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};
$.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};$.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}
})(jQuery);
/*! utils.js - Core Stamped.com JS Utils
 * 
 * Copyright (c) 2011-2012 Stamped Inc.
 */
(function(){window.log=function f(){log.history=log.history||[];log.history.push(arguments);if(this.console){var args=arguments,newarr;args.callee=args.callee.caller;newarr=[].slice.call(args);if(typeof console.log==="object"){log.apply.call(console.log,console,newarr)}else{console.log.apply(console,newarr)}}};if(typeof(console.debug)==="undefined"){console.debug=console.log;
/*! Simple JavaScript Inheritance
     * By John Resig http://ejohn.org/
     * MIT Licensed.
     */
}(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz
})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret}})(name,prop[name]):prop[name]}function Class(){if(!initializing&&this.init){this.init.apply(this,arguments)
}}Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=arguments.callee;return Class}})()})();var init_social_sharing=function($scope,params){if(!!$scope&&!!params){var $tweet_buttons=$scope.find(".twitter-share-button");var $fb_like_buttons=$scope.find(".fb-like");var $google_buttons=$scope.find(".google");var text="Check out this stamp of "+params.title;$tweet_buttons.attr("data-text",text);$tweet_buttons.attr("data-url",params.url);$fb_like_buttons.attr("data-href",params.url);$google_buttons.attr("href",params.url)
}if(typeof(twttr)!=="undefined"&&!!twttr.widgets){twttr.widgets.load()}if(typeof(gapi)!=="undefined"&&!!gapi.plusone){gapi.plusone.go()}if(typeof(FB)!=="undefined"&&!!FB.XFBML){FB.XFBML.parse()}if(typeof(g_init_social_sharing)!=="undefined"){g_init_social_sharing()}};window.fbAsyncInit=function(){if(typeof(FB)!=="undefined"){FB.init({appId:"297022226980395",channelUrl:"//www.stamped.com/channel.html",status:true,cookie:true,xfbml:true})}};
/*! signup.js
 * 
 * Copyright (c) 2011-2012 Stamped Inc.
 */
(function(){$(document).ready(function(){var $body=$("body");
var get_fancybox_options=function(options){var default_options={openEffect:"elastic",openEasing:"easeOutBack",openSpeed:300,closeEffect:"elastic",closeEasing:"easeInBack",closeSpeed:300,tpl:{error:'<p class="fancybox-error">Whoops! Looks like we messed something up on our end. Our bad.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="close-button"><div class="close-button-inner"></div></a>'},helpers:{overlay:{speedIn:150,speedOut:300,opacity:0.8,css:{cursor:"pointer","background-color":"#fff"},closeClick:true}}};
var output={};for(var key in default_options){if(default_options.hasOwnProperty(key)){output[key]=default_options[key]}}if(!!options){for(var key in options){if(options.hasOwnProperty(key)){output[key]=options[key]}}}return output};var get_fancybox_popup_large_options=function(options){var output=get_fancybox_options({scrolling:"no",wrapCSS:"",padding:0});if(!!options){for(var key in options){if(options.hasOwnProperty(key)){output[key]=options[key]}}}return output};$body.on("click",".download-stamped-popup",function(event){event.preventDefault();
var popup_options=get_fancybox_popup_large_options({content:$("#popup-signup").html(),type:"html",width:480,minWidth:480});$.fancybox.open(popup_options);return false});var default_phone_number="555-555-5555";var sms_message_success="SMS Sent!";var sms_message_error="SMS Error!";$body.on("focus",".phone-number",function(event){var $this=$(this);var $sms=$this.parent();var value=$this.attr("value");if(value==default_phone_number||value==sms_message_success||value==sms_message_error){$this.attr("value","")}$sms.removeClass("error").addClass("active");
return true});$body.on("focusout",".phone-number",function(event){var $this=$(this);var $sms=$this.parent();var value=$this.attr("value").trim();if(value.length<=0){$this.attr("value",default_phone_number)}$sms.removeClass("active error");return true});var is_valid_number=function(value){if(value==default_phone_number||value==sms_message_success||value==sms_message_error||value.length<=3){return null}value=value.replace(/-/g,"");value=value.replace(/ /g,"");var len=10;if(value[0]=="+"){len=12}if(value.length!==len){return null
}return value};$(".phone-number").live("keyup change",function(event){var $this=$(this);var value=$this.attr("value").trim();var active="active";var $button=$this.parent().find(".send-button");if(is_valid_number(value)!==null){$button.addClass(active)}else{$button.removeClass(active)}return true});$body.on("submit",".sms-form",function(event){event.preventDefault();var $this=$(this);var $input=$this.find(".phone-number");var value=$input.attr("value").trim();value=is_valid_number(value);if(!value){return false
}var ajaxP=$.ajax({type:"POST",url:"/download-app",data:{phone_number:value}}).done(function(){$input.attr("value",sms_message_success)}).fail(function(){$input.attr("value",sms_message_error).parent().addClass("error")});return false})})})();
/*! profile.js
 * 
 * Copyright (c) 2011-2012 Stamped Inc.
 */
var g_update_stamps=null;(function(){$(document).ready(function(){var screen_name=STAMPED_PRELOAD.user.screen_name;var user_id=STAMPED_PRELOAD.user.user_id;var mobile=STAMPED_PRELOAD.mobile;var $body=$("body");
var selected="selected";var selected_sel="."+selected;var sdetail_popup="sdetail_popup";var sdetail_wrapper="sdetail_wrapper";var sdetail_wrapper_sel="."+sdetail_wrapper;var collapsed_header="collapsed-header";var metadata_item_expanded="metadata-item-expanded";var collapsed="collapsed";var collapsing="collapsing";var STAMP_GALLERY_PAGE_SIZE=10;var static_prefix="http://maps.gstatic.com/mapfiles/place_api/icons";var update_navbar_layout=null;var close_sdetail_func=null;var is_blacklisted_image=function(url){return(url.indexOf(static_prefix)!=-1)
};var extract_data=function($target,prefix,default_value){var classes=$target.get(0).className.split(/\s+/);var value=default_value;for(i=0;i<classes.length;++i){var c=classes[i];if(c.indexOf(prefix)===0){c=c.substring(prefix.length);if(c.length>1){value=c;break}}}return value};window.g_extract_data=extract_data;$(".stamp-gallery-nav a").each(function(){var href=$(this).attr("href");var limit_re=/([?&])limit=[\d]+/;var limit="limit="+STAMP_GALLERY_PAGE_SIZE;if(href.match(limit_re)){href=href.replace(limit_re,"$1"+limit)
}else{if(href.indexof("?")!==-1){href=href+"&"+limit}else{href=href+"?"+limit}}$(this).attr("href",href)});window.g_init_social_sharing=function(){$(".share-widget").each(function(i,elem){var $elem=$(elem);var $share=$elem.find(".share-buttons");$elem.css({display:"inline-block",width:"auto",height:"auto"});var width0=$elem.width();var height0=$elem.height();$elem.css("display","block");$share.show();var width1=$elem.width()+55;var height1=$elem.height();$share.hide();$elem.css({width:width0,height:height0});
$elem.hover(function(event){$elem.stop(true,false);$share.show();$elem.animate({width:width1,height:height1},{duration:500,specialEasing:{width:"easeOutCubic",height:"easeOutCubic"}})},function(event){$elem.stop(true,false);$share.hide();$elem.animate({width:width0,height:height0},{duration:500,specialEasing:{width:"easeOutCubic",height:"easeOutCubic"}})})})};$("a.expand-friends").click(function(event){event.preventDefault();var $this=$(this);var href=$this.attr("href");var popup_options=get_fancybox_popup_options({href:href});
$.fancybox.open(popup_options);return false});var $gallery=null;var infinite_scroll=null;var destroy_infinite_scroll=function(){if(!!infinite_scroll){if(!!$gallery){$gallery.infinitescroll("destroy");$gallery.data("infinitescroll",null)}infinite_scroll=null}};var pause_infinite_scroll=function(){if(!!infinite_scroll&&!!$gallery){$gallery.infinitescroll("pause")}};var resume_infinite_scroll=function(){if(!!infinite_scroll&&!!$gallery){$gallery.infinitescroll("resume")}};var destroy_gallery=function(){if($gallery!==null){$gallery=$(".stamp-gallery .stamps");
$gallery.stop(true,false);destroy_infinite_scroll();$gallery.isotope("destroy");$gallery=null}};var update_empty_stamps=function(){if($(".stamp-gallery-item").length===0){$(".empty-stamps").show()}else{$(".empty-stamps").hide()}};var update_gallery=function(callback){if($gallery!==null){$gallery=$(".stamp-gallery").find(".stamps");update_empty_stamps();$gallery.isotope("reLayout",callback)}};var update_timestamps=function($scope){if(typeof($scope)==="undefined"){$scope=$(document)}$scope.find(".timestamp_raw").each(function(i,elem){var expl="";
try{var $elem=$(elem);var ts=moment.utc($elem.text(),"YYYY-MM-DD HH:mm:ss.SSSS");var now=moment();if(now.diff(ts,"months")<1){expl=ts.fromNow()}else{if(now.diff(ts,"years")<=1){expl=ts.format("MMM Do")}else{expl=ts.format("MMM Do YYYY")}}}catch(e){return}$elem.removeClass("timestamp_raw").text(expl).addClass("timestamp")})};var gallery_is_visible=false;var last_layout=null;var update_gallery_layout=function(is_visible,callback,recur){var style={visibility:"visible"};is_visible=(typeof(is_visible)==="undefined"?false:is_visible);
recur=(typeof(recur)==="undefined"?false:recur);gallery_is_visible|=is_visible;var handle_recur=function(){if(recur){setTimeout(function(){update_gallery_layout(is_visible)},400)}};var set_gallery_visible=function(){$("#main-content").css(style)};update_gallery(function(){if(!!update_navbar_layout){update_navbar_layout(false)}last_layout=new Date();if(gallery_is_visible){set_gallery_visible()}if(!!callback){callback()}handle_recur()});if(gallery_is_visible&&!!last_layout){set_gallery_visible()}handle_recur();
return};var get_fancybox_options=function(options){var default_options={openEffect:"elastic",openEasing:"easeOutBack",openSpeed:300,closeEffect:"elastic",closeEasing:"easeInBack",closeSpeed:300,tpl:{error:'<p class="fancybox-error">Whoops! Looks like we messed something up on our end. Our bad.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="close-button"><div class="close-button-inner"></div></a>'},helpers:{overlay:{speedIn:150,speedOut:300,opacity:0.8,css:{cursor:"pointer","background-color":"#fff"},closeClick:true}}};
var output={};for(var key in default_options){if(default_options.hasOwnProperty(key)){output[key]=default_options[key]}}if(!!options){for(var key in options){if(options.hasOwnProperty(key)){output[key]=options[key]}}}return output};var get_fancybox_popup_options=function(options){var output=get_fancybox_options({type:"ajax",scrolling:"no",wrapCSS:"",padding:0,minWidth:366,maxWidth:366,beforeShow:function(){$(".popup-body").jScrollPane({verticalPadding:8});$("html").css("overflow","hidden")},beforeClose:function(){$("html").css("overflow-y","scroll")
}});if(!!options){for(var key in options){if(options.hasOwnProperty(key)){output[key]=options[key]}}}return output};var get_fancybox_popup_large_options=function(options){var output=get_fancybox_options({scrolling:"no",wrapCSS:"",padding:0});if(!!options){for(var key in options){if(options.hasOwnProperty(key)){output[key]=options[key]}}}return output};var find_valid_image=function($elem,selector,is_sdetail){var $elements=$elem.find(selector);$elements=$elements.filter(function(){var $this=$(this);if(is_blacklisted_image($this.attr("src"))){$this.addClass("hidden").parent().addClass("hidden");
return false}else{return !$this.hasClass("hidden")}});$elements.each(function(i,element){element.onerror=function(){var $element=$(element);$element.addClass("hidden").parent().addClass("hidden");init_stamp_preview_images($elem,is_sdetail)}});return $elements};var init_stamp_preview_images=function($elem,is_sdetail){var images=[];var $stamp_user_images=find_valid_image($elem,".stamp-user-image   img",is_sdetail);var $stamp_entity_images=find_valid_image($elem,".stamp-entity-image img",is_sdetail);var $map=$elem.find(".stamp-map");
var $icon=$elem.find(".stamp-icon");var push_images=function($elems){$elems.each(function(i,$elem){images.push($elem)})};if(is_sdetail){push_images($map);push_images($stamp_entity_images);push_images($icon);push_images($stamp_user_images)}else{push_images($stamp_user_images);push_images($map);push_images($stamp_entity_images);push_images($icon)}if(images.length>0){var preview=images[0];var $preview=$(preview);var i;if($preview.is("img")){preview.onload=function(){update_gallery_layout()}}$preview.removeClass("hidden").parent().removeClass("hidden");
$preview.show();for(i=1;i<images.length;i++){var $image=$(images[i]);$image.hide().addClass("hidden").parent().addClass("hidden")}if(is_sdetail){if(!$preview.hasClass("preview-image")){$preview=$preview.parents(".preview-image")}var width="200px";var angle="20deg";var t="perspective(600) rotateZ("+angle+") rotateX("+angle+") rotateY(-"+angle+")";$preview.css({width:width,"max-width":width,"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,"-o-transform":t,transform:t}).hover(function(){var t2="perspective(600)";
$preview.css({"-webkit-transform":t2,"-moz-transform":t2,"-ms-transform":t2,"-o-transform":t2,transform:t2})},function(){$preview.css({"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,"-o-transform":t,transform:t})})}}update_gallery_layout()};var update_stamps=function($scope){if(typeof($scope)==="undefined"){$scope=$gallery;if(!$scope){return}$scope.find(".blurb").emoji()}else{if($scope.hasClass(sdetail_wrapper)){$scope.find(".normal_blurb").emoji()}}update_timestamps($scope);$scope.find(".stamp-preview-raw").each(function(i,elem){var $this=$(this);
var is_sdetail=($this.parents(".sdetail_body").length>=1);$this.removeClass("stamp-preview-raw").addClass("stamp-preview");init_stamp_preview_images($this,is_sdetail)});$scope.find("a.lightbox").fancybox(get_fancybox_options({closeClick:true}))};var resize_sdetail_wrapper=function($sdetail_wrapper,sdetail_status,anim_callback){sdetail_status=(typeof(sdetail_status)!=="undefined"?sdetail_status:null);var anim_duration=600;if(!$sdetail_wrapper){$sdetail_wrapper=$(sdetail_wrapper_sel)}if($sdetail_wrapper.length===1){var offset=cur_header_height+15;
var hidden=window.innerHeight+"px";offset+="px";if(sdetail_status==="opening"){$body.addClass("sdetail_popup_animation").removeClass("sdetail_popup");$sdetail_wrapper.stop(true,false).css({top:hidden,}).addClass("animating").animate({top:offset,},{duration:anim_duration,specialEasing:{top:"easeInOutCubic"},complete:function(){$body.addClass("sdetail_popup").removeClass("sdetail_popup_animation");$sdetail_wrapper.removeClass("animating");$window.scrollTop(0);if(!!anim_callback){anim_callback()}}})}else{if(sdetail_status=="closing"){$sdetail_wrapper.stop(true,false).css({top:offset,}).addClass("animating").animate({top:hidden,},{duration:anim_duration,specialEasing:{top:"easeInOutCubic"},complete:function(){$body.removeClass("sdetail_popup_animation");
$sdetail_wrapper.removeClass("animating");if(!!anim_callback){anim_callback()}}})}else{if(!$sdetail_wrapper.hasClass("animating")){$body.addClass("sdetail_popup").removeClass("sdetail_popup_animation");$sdetail_wrapper.css({top:offset,})}}}var $stamp_card_header=$sdetail_wrapper.find(".stamp-card-header");var $entity_header=$stamp_card_header.find(".entity-header");var width=$stamp_card_header.width()-(96+48);$entity_header.css({width:width,"max-width":width})}};g_update_stamps=update_stamps;var infinite_scroll_next_selector="div.stamp-gallery-nav a:last";
var init_infinite_scroll=function(){if(!!$gallery&&!infinite_scroll){var $next=$(infinite_scroll_next_selector);var init=false;if($next.length===1){var href=$next.attr("href");if(!!href&&href.length>1){init=true}}if(init){infinite_scroll=$gallery.infinitescroll({bufferPx:window.innerHeight*0.2,debug:STAMPED_PRELOAD.DEBUG,navSelector:"div.stamp-gallery-nav",nextSelector:infinite_scroll_next_selector,itemSelector:"div.stamp-gallery div.stamp-gallery-item",pathParse:function(path,page){var offset_re=/([?&])offset=([\d]+)/;
var match=path.match(offset_re);if(!!match){offset=parseInt(match[2]);return{join:function(page){var cur_offset=offset+(page-2)*STAMP_GALLERY_PAGE_SIZE;cur_offset="offset="+cur_offset;return path.replace(offset_re,"$1"+cur_offset)}}}else{return[path]}},dataType:"html",loading:{finishedMsg:"No more stamps to load.",msgText:"<em>Loading more stamps...</em>",img:"/assets/img/loading.gif",selector:"div.stamp-gallery-loading"},state:{isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false}},function(new_elements){var $elements=$(new_elements);
$gallery.isotope("appended",$elements);update_stamps()});$gallery.infinitescroll("bind")}}};var layout_mode_index=0;var layout_modes=["masonry","fitRows","cellsByRow"];var init_gallery=function(){$gallery=$(".stamp-gallery .stamps");if($gallery.length<=0){$gallery=null}else{update_empty_stamps();$gallery.isotope({itemSelector:".stamp-gallery-item",layoutMode:layout_modes[layout_mode_index]});$gallery.on("click",".stamp-gallery-item",open_sdetail_click);init_infinite_scroll()}};var toggle_gallery_layout_mode=function(){if(!!$gallery){layout_mode_index=(layout_mode_index+1)%layout_modes.length;
$gallery.isotope({layoutMode:layout_modes[layout_mode_index]})}};var enable_gallery_animations=function(b){var enabled=(typeof(b)==="undefined"?true:b);if(!enabled){$(".isotope,.isotope .isotope-item").css({"-webkit-transition-duration":"0s"});if(!!$gallery){$gallery.isotope({animationOptions:{duration:0}})}}else{$(".isotope,.isotope .isotope-item").css({"-webkit-transition-duration":".8s"});if(!!$gallery){$gallery.isotope({animationOptions:{duration:800}})}}};var parse_url=function(url,title){var parts=url.split("?");
var base_url_s=parts[0];var base_uri0_s=base_url_s.split("/");var base_uri_s=base_uri0_s[base_uri0_s.length-1];var options_s={};if(parts.length===2){var opts=parts[1].match(/[a-zA-Z_][a-zA-Z0-9_]*=[^&]*/g);$.each(opts,function(i,opt){var opt_parts=opt.split("=");var key=opt_parts[0];if(opt_parts.length===2){var value=opt_parts[1];options_s[key]=value}})}return{base_url:base_url_s,options:options_s,base_uri:base_uri_s,title:title}};var url=document.URL;var title=document.title;var orig_url=parse_url(url,title);
if(STAMPED_PRELOAD.sdetail){orig_url.options={};orig_url.base_uri="/"+screen_name;orig_url.base_url=orig_url.base_uri;orig_url.title="Stamped - "+screen_name}var get_custom_params=function(params,opts){if(typeof(opts)==="undefined"){opts=orig_url.options}var custom_params={};var key,value;for(key in opts){if(opts.hasOwnProperty(key)){value=opts[key];if(value!==null){custom_params[key]=value}else{delete custom_params[key]}}}for(key in params){if(params.hasOwnProperty(key)){value=params[key];if(value!==null){custom_params[key]=value
}else{delete custom_params[key]}}}return custom_params};var get_custom_params_string=function(params,uri){if(typeof(uri)==="undefined"){uri=orig_url.base_uri}var custom_params=get_custom_params(params);var first=true;var str="/"+uri;var key;for(key in custom_params){if(custom_params.hasOwnProperty(key)){if(first){str+="?";first=false}else{str+="&"}str+=key+"="+custom_params[key]}}return str};var get_custom_url=function(params,url){if(typeof(url)==="undefined"){url=orig_url.base_url}var custom_params=get_custom_params(params);
var first=true;var key;for(key in custom_params){if(custom_params.hasOwnProperty(key)){if(first){url+="?";first=false}else{url+="&"}url+=key+"="+custom_params[key]}}return url};var $user_logo=$("header .user-logo-large");var user_logo_top=parseFloat($user_logo.css("top"));var user_logo_left=parseFloat($user_logo.css("left"));var user_logo_width=parseFloat($user_logo.css("width"));var user_logo_height=parseFloat($user_logo.css("height"));var $window=$(window);var $header=$("header .header-body");var $content=$("#main-page-content");
var header_height=$header.height();var cur_header_height=header_height||0;var min_height_ratio=1;var min_header_height=header_height*min_height_ratio;$header.height(header_height);var last_ratio=null;var update_dynamic_header=function(){var cur_ratio=0;if(last_ratio!==null){cur_ratio=Math.round(last_ratio)}if(!($body.hasClass(sdetail_popup)||$body.hasClass("sdetail_popup_animation")||$body.hasClass(collapsed_header))){cur_ratio=(header_height-$window.scrollTop())/header_height;cur_ratio=Math.min(Math.max(cur_ratio,0),1)
}if(cur_ratio!==last_ratio){last_ratio=cur_ratio;var inv_cur_ratio=1-cur_ratio;var cur_height_ratio=Math.max(cur_ratio,min_height_ratio);var cur_height=header_height*cur_height_ratio;if(cur_height!==cur_header_height){cur_header_height=cur_height;$header.height(cur_header_height)}$content.css({top:cur_header_height+15});var cur_logo_width=user_logo_width-inv_cur_ratio*(user_logo_width-166);var cur_logo_size=cur_logo_width+"px "+cur_logo_width+"px";$user_logo.css({width:cur_logo_width,height:cur_logo_width,"background-size":cur_logo_size,"-webkit-mask-size":cur_logo_size,})
}};var $nav_bar=$("#stamp-category-nav-bar");var categories="default place music book film app";var set_body_class=function(category){$body.removeClass(categories).addClass(category)};var g_category=null;if(typeof(orig_url.options.category)!=="undefined"){g_category=orig_url.options.category}else{g_category="default"}if(History&&History.enabled){var views=[{title:"sdetail",is_match_func:function(state,url,relative_url){var regexes=[/.*[\w]+\/s\/[\d]+.*/,/.*[\w]+\/stamps\/[\d]+.*/];var is_sdetail=false;$.each(regexes,function(i,re){if(relative_url.match(re)){is_sdetail=true;
return false}});return is_sdetail},apply_func:function(state,url,relative_url){open_sdetail(url)}},{title:"main",is_match_func:null,apply_func:function(state,url,relative_url){if(!!close_sdetail_func){close_sdetail_func()}var custom_params={ajax:true};var category;if(typeof(orig_url.options.category)!=="undefined"){category=orig_url.options.category}else{category="default"}for(var key in state.data){if(state.data.hasOwnProperty(key)){custom_params[key]=state.data[key]}}if(typeof(custom_params.category)!=="undefined"){category=custom_params.category
}var orig_category=category;if(category==="default"){category=null;custom_params.category=null}if(orig_category!==g_category){var params=get_custom_params(custom_params);var url=get_custom_url(params);var $items=$(".stamp-gallery-item");$gallery.css({visibility:"hidden",opacity:0});$(".stamp-gallery-nav").hide();$(".loading").show();$(".stamp-gallery-nav a").each(function(){var href=$(this).attr("href");var parsed=parse_url(href);var params=get_custom_params({category:category},parsed.options);var url=get_custom_url(params,parsed.base_url);
$(this).attr("href",url)});var sel=".header-category-"+orig_category;var $elem=$(sel);g_category=category;if($elem.length==1&&!$elem.hasClass("header-selected")){var completion_func=function(){$(".header-selected").removeClass("header-animating header-selected");$elem.removeClass("header-animating").addClass("header-selected");set_body_class(orig_category);g_init_social_sharing()};if(category===null){completion_func()}else{$elem.addClass("header-animating").stop(true,false).css({top:"-100%",}).animate({top:0,},{duration:600,specialEasing:{top:"easeOutCubic"},complete:completion_func})
}}$("body,html").stop(true,false).animate({scrollTop:0},{duration:200,specialEasing:{scrollTop:"easeInOutCubic"}});var $target=$("<div></div>");$target.load(url+" .stamp-gallery",params,function(response,status,xhr){if(category!==g_category){return}if(status=="error"){console.debug("AJAX ERROR (stamps category="+category+"): "+url);console.debug(response);console.debug(xhr);return}var $elements=$target.find(".stamp-gallery-item").remove();var s=".stamp-gallery-nav a";var href=$($target.find(s).get(0)).attr("href");
if(typeof(href)==="undefined"){href="#"}var $next=$(infinite_scroll_next_selector);if($next.length===1){$next.attr("href",href)}else{$(".stamp-gallery-nav ul").append("<li><a href='"+href+"'>Next</a></li>")}destroy_infinite_scroll();$gallery.append($elements);update_stamps();$gallery.isotope("remove",$items,function(){$(".loading").hide()});$gallery.isotope("appended",$elements,function(){init_infinite_scroll()});$gallery.stop(true,false).css({visibility:"visible"}).animate({opacity:1},{duration:200,specialEasing:{opacity:"easeInCubic"}})
})}}}];History.Adapter.bind(window,"statechange",function(){var state=History.getState();var root=History.getRootUrl();var url=state.url;var relative_url=url.replace(root,"");for(var i=0,len=views.length;i<len;i++){var view=views[i];var is_match_func=view.is_match_func;var is_match=(i>=len-1);if(!!is_match_func){is_match|=is_match_func(state,url,relative_url)}if(is_match){view.apply_func(state,url,relative_url);break}}})}$nav_bar.on("click","a.active",function(event){event.preventDefault();var $link=$(this);
var orig_category=$link.parent().attr("class");var category=orig_category;if(category==="default"){category=null}var params={category:category};if(mobile){var href=get_custom_url(params);window.location=href}else{if(History&&History.enabled){var params_str=get_custom_params_string(params);var title="Stamped - "+screen_name;if(category!==null){var text=category;if(category==="place"){text="places"}else{if(category==="music"){text="music"}else{if(category==="book"){text="books"}else{if(category==="film"){text="film and tv"
}else{if(category==="app"){text="apps"}}}}}title+=" - "+text}if(!params.category){delete params.category}History.pushState(params,title,params_str)}else{var next_url=get_custom_url(params);window.location=next_url}}return false});var fixed_width=1000;var fixed_padding=80;var min_col_width=305;var last_nav_pos_x=null;var update_navbar_count=0;update_navbar_layout=function(should_update_gallery){if(!$nav_bar||$nav_bar.length!==1){return}should_update_gallery=(typeof(should_update_gallery)!=="boolean"?true:should_update_gallery);
var nav_bar_width=$nav_bar.width();var $stamp_gallery=$(".stamp-gallery");if(typeof($stamp_gallery.get(0))==="undefined"){return}var gallery_x=$stamp_gallery.offset().left;var gallery_width=$stamp_gallery.width();var wide_body="wide-body";var wide_gallery="wide-gallery";var narrow_gallery="wide-gallery";var max_blurb_width=125;var min_blurb_width=(gallery_width-(24+58+48+148));var width=window.innerWidth;var left=gallery_x+gallery_width+fixed_padding;var right=(width-(gallery_x+fixed_width+nav_bar_width+1.5*fixed_padding));
var pos=left;var force_no_update=false;var update=false;var gallery=false;var reset_stamp_gallery_items=function(desired_width){$stamp_gallery.find(".content").each(function(i,elem){var $elem=$(elem);var desired_width_px=desired_width+"px";var desired_width_header_px;if(gallery){desired_width_header_px="232px";desired_width_px="auto"}else{desired_width_header_px=Math.max(desired_width-48,200)+"px"}$elem.find(".content_1").css({"max-width":desired_width_px});$elem.find(".entity-header").css({width:desired_width_header_px,"max-width":desired_width_header_px})
})};if(window.innerWidth<=780){if(!$stamp_gallery.hasClass(narrow_gallery)){$stamp_gallery.removeClass(wide_gallery).addClass(narrow_gallery);$body.addClass(wide_body);update=true;reset_stamp_gallery_items(max_blurb_width)}else{force_no_update=true}}else{if(right<fixed_padding/2){if($stamp_gallery.hasClass(wide_gallery)||$stamp_gallery.hasClass(narrow_gallery)){$stamp_gallery.removeClass(wide_gallery+" "+narrow_gallery);$body.removeClass(wide_body);update=true}reset_stamp_gallery_items(min_blurb_width)}else{gallery=true;
if(!$stamp_gallery.hasClass(wide_gallery)){$stamp_gallery.removeClass(narrow_gallery).addClass(wide_gallery);$body.addClass(wide_body);update=true;reset_stamp_gallery_items(max_blurb_width)}}}if(!force_no_update){if(update||last_nav_pos_x!==pos){if(!gallery){var min_fixed_width=min_col_width+nav_bar_width+fixed_padding/2;var new_fixed_width=Math.max((width-(fixed_padding+nav_bar_width)),min_fixed_width);$(".fixedwidth").width(new_fixed_width);update=true}else{var cur_fixed_width_px="75%";$(".fixedwidth").width(cur_fixed_width_px)
}}if(should_update_gallery){update_gallery_layout(update)}}var clamped="stamp-category-nav-bar-clamped";if(window.innerHeight/2-198<=250){if(!$nav_bar.hasClass(clamped)){$nav_bar.addClass(clamped)}}else{if($nav_bar.hasClass(clamped)){$nav_bar.removeClass(clamped)}}if(last_nav_pos_x!==pos){var style={left:pos+"px"};if(last_nav_pos_x===null){style.right="auto"}++update_navbar_count;if(gallery||update_navbar_count>=2){style.visibility="visible"}last_nav_pos_x=pos;$nav_bar.css(style)}};var close_sdetail=function(){if(!!close_sdetail_func){if(!mobile&&History&&History.enabled){var options={};
for(var key in orig_url.options){if(orig_url.options.hasOwnProperty(key)){options[key]=orig_url.options[key]}}if(!!g_category){if(!g_category||g_category==="default"){delete options.category}else{options.category=g_category}}History.pushState(options,orig_url.title,get_custom_url(options))}else{close_sdetail_func()}}};var open_sdetail_click=function(event){var $target=$(event.target);if($target.is("a")&&$target.hasClass("zoom")){return true}event.preventDefault();var $this=$(this);var $link=($this.is("a")?$this:$this.find("a.sdetail"));
if($link.length<=0){$link=$target.find("a.sdetail")}if($link.length<=0){return}var href=$link.attr("href");var title=$link.data("title");href=href.replace("http://www.stamped.com","");if(mobile){window.location=href}else{if(History&&History.enabled){History.pushState(null,title,href)}else{open_sdetail(href)}}return false};window.g_open_sdetail_click=open_sdetail_click;var open_sdetail=function(href,html){var sdetail_initialized=false;var sdetail_anim_loaded=false;var sdetail_ajax_loaded=false;var scroll_top=0;
var $target,$target2;$(sdetail_wrapper_sel).remove();pause_infinite_scroll();enable_gallery_animations(false);if(!!href){$target=$("<div class='"+sdetail_wrapper+" sdetail-loading'><div class='sdetail-loading-content'></div></div>");$target2=$("<div class='"+sdetail_wrapper+" sdetail-loading'></div>");scroll_top=$window.scrollTop()}else{$target=$("<div class='"+sdetail_wrapper+"'></div>").html(html);$target2=$target}$(sdetail_wrapper_sel).hide().remove();$target.insertAfter($("#main-page-content-body"));$target=$(sdetail_wrapper_sel);
update_dynamic_header();var init_sdetail_async=function(){if(sdetail_ajax_loaded&&sdetail_anim_loaded&&!sdetail_initialized){sdetail_initialized=true;setTimeout(function(){$target.replaceWith($target2);init_sdetail($target2);resize_sdetail_wrapper($target2);$target2.removeClass("sdetail-loading")},150)}};if(!!href){resize_sdetail_wrapper($target,"opening",function(){$target.removeClass("animating");sdetail_anim_loaded=true;init_sdetail_async()})}else{resize_sdetail_wrapper($target,"")}close_sdetail_func=function(){close_sdetail_func=null;
$body.addClass("sdetail_popup_animation").removeClass("sdetail_popup");if(!!$gallery){update_gallery_layout(true)}resume_infinite_scroll();update_dynamic_header();update_navbar_layout();g_init_social_sharing();$window.scrollTop(scroll_top);enable_gallery_animations(true);update_gallery_layout(true);resize_sdetail_wrapper($target2,"closing",function(){$(sdetail_wrapper_sel).removeClass("animating").hide().remove();update_gallery_layout(true);setTimeout(function(){update_gallery_layout(true,null,true)},150)})};
if(!!href){$target2.load(href,{ajax:true},function(response,status,xhr){if(status=="error"){console.debug("AJAX ERROR (sdetail): "+url);console.debug(response);console.debug(xhr);alert("TODO: handle AJAX errors gracefully\n"+url+"\n\n"+response.toString()+"\n\n"+xhr.toString());close_sdetail();return}sdetail_ajax_loaded=true;init_sdetail_async()})}else{init_sdetail($target)}};var init_sdetail=function($sdetail){if(!$sdetail){$sdetail=$(".sdetail_body")}var $comments_div=$sdetail.find(".comments");var $comments_nav=$comments_div.find(".comments-nav");
var $comments_list=$comments_div.find(".comments-list");var $comments=$comments_div.find(".comment");var comments_len=$comments.length;$comments.find(".normal_blurb").emoji();if(comments_len>2){var last_visible_pos=$($comments.get(comments_len-2)).position();var comments_height=$comments_div.height();var comments_initted=false;$comments_nav.on("click","a",function(event){event.preventDefault();$comments.show();var init_comment_defaults=function(){if(comments_initted){return}if(comments_height<=0||$comments_div.css("max-height")==="none"){last_visible_pos=$($comments.get(comments_len-2)).position();
comments_height=$comments_div.height();comments_initted=true}};if($comments_div.hasClass(collapsed)||$comments_div.hasClass(collapsing)){$comments_list.stop(true,false);$comments_div.removeClass(collapsing+" "+collapsed);init_comment_defaults();$comments_list.css({top:-last_visible_pos.top}).animate({top:0},{duration:1000,specialEasing:{top:"easeOutExpo"},step:function(now,fx){$comments_div.css("max-height",comments_height+now+"px")},complete:function(){$comments_div.css("max-height","none");resize_sdetail_wrapper()
}})}else{init_comment_defaults();$comments_list.stop(true,false);$comments_div.addClass(collapsing);$comments_list.animate({top:-last_visible_pos.top},{duration:1000,specialEasing:{top:"easeOutExpo"},step:function(now,fx){$comments_div.css("max-height",comments_height+now+"px")},complete:function(){$comments_div.removeClass(collapsing).addClass(collapsed);resize_sdetail_wrapper()}})}return false})}var $action_menu=$sdetail.find(".action-menu");if($action_menu.length==1){var $temp=$action_menu.parents(".entity-id");
var $link=$action_menu.parent("a.action-link");if($temp.length==1&&$link.length==1){$link.each(function(i,link){var $link=$(link);var entity_id=extract_data($temp,"entity-id-",null);var entity_title=$.trim($action_menu.find(".entity-title").text());if(entity_id!==null){if(entity_title===null){entity_title="Menu"}else{entity_title="Menu for "+entity_title}var link_type="ajax";var link_href="/entities/menu?entity_id="+entity_id;var popup_options=get_fancybox_popup_options({href:link_href,type:link_type,maxWidth:480,afterShow:function(){$(".menus").jScrollPane({verticalPadding:8})
}});$link.attr("href",link_href).click(function(event){event.preventDefault();$.fancybox.open(popup_options);return false}).fancybox(popup_options)}})}}var $action_listen=$sdetail.find(".action-listen");$.each($action_listen,function(i,elem){var $elem=$(elem);var $source_rdio=$elem.find(".source-rdio");var $source_itunes=$elem.find(".source-itunes");if($source_rdio.length===1){var source_id=$source_rdio.data("source-id");var $rdio=$("#rdio-api");var duration=1;var rdio_initialized=false;var rdio_initialized_callback=null;
$elem.parent(".action-link").click(function(event){event.preventDefault();var action;var play_action=function(){rdio_initialized_callback=null;$elem.removeClass("stopped playing").addClass("media-loading");$rdio.rdio().play(source_id)};var stop_action=function(){rdio_initialized_callback=null;$rdio.rdio().pause()};if($elem.hasClass("stopped")){action=play_action}else{action=stop_action}if(!rdio_initialized){$elem.removeClass("stopped playing").addClass("media-loading");rdio_initialized_callback=function(){action()
}}else{action()}return false});$rdio.bind("ready.rdio",function(){rdio_initialized=true;if(!!rdio_initialized_callback){rdio_initialized_callback()}});$rdio.bind("playingTrackChanged.rdio",function(e,playingTrack,sourcePosition){if(playingTrack){duration=playingTrack.duration}});$rdio.bind("positionChanged.rdio",function(e,position){});$rdio.bind("playStateChanged.rdio",function(e,playState){if(playState==0){$elem.removeClass("media-loading playing").addClass("stopped")}else{setTimeout(function(){$elem.removeClass("media-loading stopped").addClass("playing")
},2500)}});$rdio.rdio("GAlNi78J_____zlyYWs5ZG02N2pkaHlhcWsyOWJtYjkyN2xvY2FsaG9zdEbwl7EHvbylWSWFWYMZwfc=")}else{if($source_itunes.length===1){var itunes_initialized=false;var itunes_initialized_callback=null;var $itunes=$("#itunes-preview");var itunes_url=$itunes.attr("src");$elem.parent(".action-link").click(function(event){event.preventDefault();var action;var play_action=function(){itunes_initialized_callback=null;$elem.removeClass("stopped").addClass("playing");$itunes.jPlayer("play")};var stop_action=function(){itunes_initialized_callback=null;
$elem.removeClass("playing").addClass("stopped");$itunes.jPlayer("pause")};if($elem.hasClass("stopped")){action=play_action}else{action=stop_action}if(!itunes_initialized){itunes_initialized_callback=function(){action()}}else{action()}return false});itunes_initialized=true;$itunes.jPlayer({ready:function(){$itunes.jPlayer("setMedia",{m4a:itunes_url});itunes_initialized=true;if(!!itunes_initialized_callback){itunes_initialized_callback()}},supplied:"m4a",swfPath:"/assets/js/libs/jplayer",solution:"html,flash"})
}}});$sdetail.find("a.nav").each(function(i,elem){var $elem=$(elem);var $item=$elem.parents(".metadata-item");var $value=$item.find("p.resizable");if($value.length===1){$item.removeClass(metadata_item_expanded);var h0=$value.height();$item.addClass(metadata_item_expanded);var h1=$value.height();if(h1<=h0){$elem.hide()}else{$item.removeClass(metadata_item_expanded);$elem.click(function(event){event.preventDefault();$item.toggleClass(metadata_item_expanded);return false})}}});$sdetail.find(".stamp-card .entity-image-wrapper").each(function(i,elem){var $elem=$(elem);
var $img=$elem.find("img");if(!!$elem&&!!$img){var width=$img.width();var height=$img.height();if(width>0&&height>0){$elem.css({width:width,height:height,"max-width":width,"max-height":height})}}});$sdetail.find(".expand-popup").click(function(event){event.preventDefault();var $this=$(this);var href=$this.attr("href");var popup_options=get_fancybox_popup_options({href:href});$.fancybox.open(popup_options);return false});$sdetail.find(".close-button").click(function(event){event.preventDefault();close_sdetail();
return false});update_stamps($sdetail);var title=$sdetail.find(".pronounced-title a").text();var url=$sdetail.find(".stamp-contents").attr("data-url");var prefix="http://www.";if(url.indexOf(prefix)===0){var url2=url.substring(prefix.length);if(url2.length>0){url=url2}}init_social_sharing($sdetail,{title:title,url:url})};$(document).bind("keydown","ctrl+t",function(){toggle_gallery_layout_mode()});$window.bind("scroll",update_dynamic_header);$window.resize(update_navbar_layout);$(document).bind("keydown",function(e){if(e.which==27){if($(".fancybox-opened").length<=0){close_sdetail()
}if(typeof(g_close_map_popup)!=="undefined"&&!!g_close_map_popup){g_close_map_popup()}}});if(STAMPED_PRELOAD.sdetail){open_sdetail(null,STAMPED_PRELOAD.sdetail)}update_dynamic_header();init_gallery();update_stamps();update_navbar_layout();var __init=false;var show_initial_gallery=function(){if(!__init||$("#main-content").css("visibility")!=="visible"){__init=true;g_init_social_sharing();update_gallery_layout(true,null,true);setTimeout(show_initial_gallery,500)}};setTimeout(show_initial_gallery,150)})})();