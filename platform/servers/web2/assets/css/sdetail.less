/* sdetail.less
 * 
 * NOTE: the css version of this file is auto-generated, so only edit the original 
 * less version if you don't want your changes to be overwritten.
 * 
 * Copyright (c) 2011-2012 Stamped Inc.
 */

@import "common.less";


/* **************************************************************************
                                SDETAIL CORE
   ************************************************************************** */


@shadow: rgba(50, 50, 50, 0.75);
@shadow-light: fade(@shadow, 15%);

@text0: #666;
@text1: #999;
@text2: #444;

.shadowed {
    .box-shadow(0, 3px, 4px, 0, @shadow-light);
}

.normal_blurb {
    margin: 0;
}

.sdetail {
    .sdetail_body {
        padding: 150px 0 0;
    }
}

.profile {
    .sdetail_body {
        padding: 2em;
    }
}

.sdetail_body {
    
    
/* **************************************************************************
                            SDETAIL ENTITY SECTION
   ************************************************************************** */
    
    
    .section-entity {
        float: right;
        width: 35%;
        //border: 2px solid red;
        padding: .25em;
        
        .close-button {
            text-align: right;
            width: 100%;
        }
        
        .stamp-preview {
            margin: 1em auto;
        }
        
        .entity-data {
            font-size: 80%;
            
            .entity-padding() {
                padding: .5em 24px .5em 12px;
            }
            
            .entity-data-header {
                .entity-padding();
                
                p {
                    margin:  0 0 .3em;
                    padding: 0;
                }
                
                p.entity-title {
                    color: @text2;
                }
                
                p.entity-caption {
                    color: @text1;
                }
            }
            
            .entity-actions {
                
                @angle: 90deg;
                @c0: #f2f2f2;
                @c1: #fff;
                
                .linear-gradient2(@angle, @c0, @c1);
                
                .action {
                    .entity-padding();
                    
                    border: 1px solid #f2f2f2;
                    border-bottom: 1px solid ##dbdbdb;
                    line-height: 125%;
                    
                    &:hover, &:active {
                        background-color: @text1;
                        color: #fff;
                        //.rounded(4px);
                    }
                    
                    /*&:hover {
                        .linear-gradient2(@angle, darken(@c0, 15%), @c1);
                    }
                    
                    &:active {
                        .linear-gradient2(@angle, darken(@c0, 25%), @c1);
                    }*/
                    
                    .action-icon {
                        background: url(/assets/img/edetail-sprite.png) no-repeat;
                        display: none;
                        
                        width:  18px;
                        height: 18px;
                        
                        margin: 2px 12px 0 0;
                    }
                    
                    .action-icon-image(@x) {
                        background-position: -@x 0;
                        display: inline-block;
                    }
                    
                    .action-icon-image-hover(@x) {
                        background-position: -@x -20px;
                    }
                    
                    .action-icon-reserve {
                        .action-icon-image(0);
                    }
                    
                    .action-icon-menu {
                        .action-icon-image(20px);
                    }
                    
                    .action-icon-buy {
                        .action-icon-image(40px);
                    }
                    
                    .action-icon-add_to_instant_queue {
                        .action-icon-image(60px);
                    }
                    
                    /* TODO: fandango: 80px */
                    /* e.g., http://localhost:8000/mwsladek/stamps/10/Harry-Potter-and-the-Deathly-Hallows-Part-2 */
                    
                    .action-icon-listen {
                        .action-icon-image(100px);
                    }
                    
                    /* TODO: what is the other 'play' icon at 120px? */
                    
                    .action-icon-download {
                        .action-icon-image(140px);
                    }
                    
                    .action-icon-playlist {
                        .action-icon-image(160px);
                    }
                    
                    &:hover {
                        .action-icon-reserve {
                            .action-icon-image-hover(0);
                        }
                        
                        .action-icon-menu {
                            .action-icon-image-hover(20px);
                        }
                        
                        .action-icon-buy {
                            .action-icon-image-hover(40px);
                        }
                        
                        .action-icon-add_to_instant_queue {
                            .action-icon-image-hover(60px);
                        }
                        
                        .action-icon-listen {
                            .action-icon-image-hover(100px);
                        }
                        
                        .action-icon-download {
                            .action-icon-image-hover(140px);
                        }
                        
                        .action-icon-playlist {
                            .action-icon-image-hover(160px);
                        }
                    }
                    
                    .lhs {
                        float: left;
                        background: transparent;
                        
                        .action-name {
                            display: inline-block;
                            position: relative;
                            top: -4px;
                        }
                    }
                    
                    .rhs {
                        float: right;
                        
                        .source {
                            background: url(/assets/img/edetail-sprite.png) no-repeat;
                            display: none;
                            
                            width:  18px;
                            height: 18px;
                            
                            margin: 2px 0 0;
                            
                            .link {
                                display: none;
                            }
                        }
                        
                        .source-image(@x) {
                            background-position: -@x -39px;
                            display: inline-block;
                        }
                        
                        .source-opentable {
                            .source-image(0);
                        }
                        
                        .source-amazon {
                            .source-image(20px);
                        }
                        
                        .source-fandango {
                            .source-image(40px);
                        }
                        
                        .source-rdio {
                            .source-image(60px);
                        }
                        
                        .source-spotify {
                            .source-image(80px);
                        }
                        
                        .source-itunes {
                            .source-image(100px);
                        }
                    }
                }
                
                /* TODO: MOBILE enable phone action */
                .action-phone {
                    display: none;
                }
            }
            
            .entity-metadata {
                .metadata-item {
                    .entity-padding();
                    
                    border-bottom: 1px solid #f2f2f2;
                    
                    .key {
                        color: @text0;
                        text-align: left;
                        float: left;
                    }
                    
                    .metadata-icon {
                        max-width: 14px;
                        margin-right: 2px;
                        height: auto;
                    }
                    
                    .rhs-value {
                        display: none;
                        
                        .nav {
                            display: none;
                            color: @text1 !important;
                            cursor: pointer;
                        }
                    }
                    
                    .inner-value, .rhs-value-cast, .rhs-value-overview, .rhs-value-description {
                        display: block;
                        color: @text1;
                        text-align: right;
                        float: right;
                        
                        .expand {
                            display: block;
                        }
                        
                        p.resizable {
                            margin:  0;
                            padding: 0;
                        }
                    }
                    
                    .inner-value-cast, .inner-value-overview, .inner-value-description {
                        float: none;
                        clear: both;
                        font-size: 90%;
                        text-align: left !important;
                        margin: 2em 0 1em;
                        
                        p.resizable {
                            max-height: 4.5em;
                            overflow: hidden;
                            text-overflow: ellipsis;
                        }
                    }
                }
                
                .metadata-item-expanded {
                    .rhs-value-cast, .rhs-value-overview, .rhs-value-description {
                        .expand {
                            display: none;
                        }
                        .collapse {
                            display: block;
                        }
                    }
                    
                    .inner-value-cast, .inner-value-overview, .inner-value-description {
                        p.resizable {
                            max-height: none !important;
                        }
                    }
                }
                
                
                .metadata-item:last-child {
                    border-bottom: 0 none;
                }
            }
        }
    }
    
    
/* **************************************************************************
                            SDETAIL STAMP SECTION
   ************************************************************************** */
    
    
    .section-stamp {
        float: left;
        width: 516px;
        //border: 2px solid green;
        margin: 0;
        
        .timestamp, .timestamp_raw {
            text-align: right;
            font-size: 80%;
            color: #999999;
        }
        
        .stamp-card {
            @round: 4px;
            .box-shadow(0, 0, 16px, 0, @shadow);
            .rounded(@round);
            
            @space: 48px;
            
            .stamp-card-pre, .stamp-card-post {
                display: block;
                width:  100%;
                height: 15px;
                .rounded(@round);
            }
            
            .stamp-contents {
                .stamp-contents-upper {
                    position: relative;
                    z-index: 501;
                    
                    .stamp-inner-content {
                        margin: (@space - 8px) @space 0;
                        
                        .entity-header {
                            max-width: 280px;
                            padding: 2px;
                        }
                        
                        .profile-image-large-ish {
                            margin: 0 0 12px 0;
                            float: left;
                        }
                        
                        .user-header {
                            margin: .5em 0 .5em;
                            clear: both;
                            
                            .name {
                                float: left;
                                
                                font-size: 80%;
                                color: #999999;
                            }
                            
                            .timestamp {
                                float: right;
                            }
                        }
                        
                        .stamp-preview {
                            clear: both;
                            margin: @space / 2 0;
                            
                            @width:  420px;
                            @height: 2 * @width / 3;
                            
                            max-width: @width   !important;
                            max-height: @height !important;
                            width:  auto !important;
                            height: auto !important;
                            
                            .preview-image, img {
                                max-width: (@width - 8px) !important;
                                max-height: @height       !important;
                                width:  auto !important;
                                height: auto !important;
                                margin: 0 auto;
                            }
                            
                            img {
                                .box-shadow(0, 4px, 12px, -4px, rgba(30,30,30,0.85));
                            }
                        }
                        
                        .normal_blurb {
                            display: block;
                            margin-bottom: 1em;
                        }
                        
                        .social-feedback-expanded {
                            .social-feedback {
                                margin-bottom: .75em;
                            }
                            
                            .user-previews {
                                margin-bottom: .75em;
                                
                                .user-preview {
                                    position: relative;
                                    margin: 0 4px 4px 0;
                                    float: left;
                                    
                                    .profile-image-tiny {
                                        position: relative;
                                        z-index: 25;
                                        float: none;
                                    }
                                }
                                
                                .user-preview-icon {
                                    background: url(/assets/img/feedbackicons_sprite_large.png) no-repeat;
                                    position: absolute;
                                    z-index: 26;
                                    right:  -6px;
                                    bottom: -6px;
                                    
                                    width:  17px;
                                    height: 17px;
                                }
                                
                                .expand {
                                    display: block;
                                    
                                    width:  24px;
                                    height: 24px;
                                    
                                    background: url(/assets/img/user-gallery-expand.png) no-repeat;
                                    .profile-image-border(2px);
                                    
                                    .user-preview-icon {
                                        right:  -8px;
                                        bottom: -8px;
                                    }
                                    
                                    &:hover, &:active {
                                        .context-popup {
                                            display: block;
                                        }
                                    }
                                }
                                
                                .likes, .todos {
                                    display: inline-block;
                                }
                                .likes {
                                    margin-right: 1em;
                                }
                                
                                .likes .user-preview-icon {
                                    background-position: 0 0;
                                }
                                
                                .todos .user-preview-icon {
                                    background-position: -19px 0;
                                }
                            }
                        }
                    }
                    
                    .credits {
                        border-top: 1px solid #bbb;
                        padding: .5em @space;
                        margin: 0;
                        
                        .stamp_0 {
                            display: inline-block;
                            width:  18px;
                            height: 18px;
                        }
                        .stamp_1 {
                            display: inline-block;
                            margin: 0 0 0 -9px;
                            width:  18px;
                            height: 18px;
                        }
                        
                        .credits-detail {
                            display: none;
                        }
                    }
                }
                
                .comments {
                    //border: 1px solid green;
                    overflow-y: hidden;
                    position: relative;
                    z-index: 496;
                    
                    display: block;
                    height:  auto;
                    
                    .comments-nav {
                        border-bottom: 1px dashed #bbb;
                        text-align: center;
                        
                        position: relative;
                        z-index: 498;
                        background: #fff;
                        
                        margin:  0 24px;
                        padding: .5em 0;
                        
                        .show {
                            display: none;
                        }
                        
                        .hide {
                            display: block;
                        }
                    }
                    
                    ol.comments-list {
                        position: relative;
                        
                        text-decoration: none;
                        list-style: none;
                        text-indent: 0;
                        padding: 0;
                        margin:  0;
                        
                        li.comment {
                            display: block;
                            border-bottom: 1px solid #bbb;
                            padding: 1em @space 0;
                            opacity: 1;
                            
                            .profile-image-small {
                                float: left;
                                margin: 0 12px 12px 0;
                            }
                            
                            .comment-inner {
                                //border: 1px solid purple;
                                position: relative;
                                margin-bottom: 1em;
                                
                                p.test0 {
                                    display: block;
                                    margin:  0 0 .75em;
                                    padding: 0;
                                    line-height: 100%;
                                    
                                    .name {
                                        text-align: left;
                                    }
                                    .timestamp {
                                        position: absolute;
                                        font-size: 80%;
                                        top:   0;
                                        right: 0;
                                    }
                                }
                                
                                p.normal_blurb {
                                    font-size: 80%;
                                }
                            }
                        }
                        
                        li.comment:last-child {
                            border-bottom: 0 none;
                        }
                    }
                }
                
                .collapsed, .collapsing {
                    .comments-nav {
                        position: relative;
                        
                        .show {
                            display: block;
                        }
                        
                        .hide {
                            display: none;
                        }
                    }
                }
                
                .collapsed {
                    ol.comments-list {
                        li.comment {
                            display: none;
                        }
                        
                        li.comment:nth-last-child(-n+2) {
                            display: block;
                        }
                    }
                }
            }
        }
    }
    
    
/* **************************************************************************
                            SDETAIL SOCIAL SECTION
   ************************************************************************** */
    
    
    .section-social {
        //border: 2px solid blue;
        float: left;
        width: 50%;
        margin: .5em .5em 1em;
        
        p.share {
            font-size: 80%;
        }
        
        .share-button {
            width: auto !important;
            display: block;
            float: left;
        }
    }
}


/* **************************************************************************
                                SDETAIL MENU
   ************************************************************************** */


.entity-menu {
    max-height: 480px;
    overflow-y: scroll;
    text-align: center;
    
    .entity-title {
        .stamped-font();
        
        font-size: 250%;
        font-weight: bold;
    }
    
    .menus {
        .submenu {
            .submenu-title {
                font-size: 200%;
                font-weight: bold;
            }
            
            .submenu-desc {
                font-style: italic;
                font-size: 90%;
            }
            
            .submenu-footnote {
                font-style: italic;
                font-size: 80%;
            }
            
            .section {
                .section-title {
                    font-size: 150%;
                }
                
                .section-desc {
                    font-style: italic;
                    font-size: 90%;
                }
                
                .items {
                    .item {
                        .item-title {
                            font-weight: bold;
                        }
                        .item-prices {
                            font-size: 80%;
                        }
                        /*.item-title, .item-desc, .item-spicy, .item-prices {
                            display: inline-block;
                        }*/
                    }
                }
            }
        }
    }
    
    .attribution {
        font-style: italic;
        font-size: 70%;
    }
}


/* **************************************************************************
                                POPUP VIEWS
   ************************************************************************** */


.popup {
    max-width: 382px;
    @padding:  24px;
    
    // TODO: add large 50px drop shadow
    
    background-color: #fff;
    
    .popup-header {
        position: relative;
        z-index: 5000;
        
        padding: (@padding / 2) @padding;
        white-space: nowrap;
        
        .box-shadow(0, 3px, 3px, 0, @shadow);
        .rounded(2px);
        
        .pronounced-title {
            float: left;
        }
        
        .rhs-icon {
            background: url(/assets/img/popup_icons_sprite.png) no-repeat;
            position: relative;
            float: right;
            
            margin-top: 16px;
            width:  36px;
            height: 36px;
            
            .tongue {
                background: url(/assets/img/popup_icons_sprite.png) no-repeat -38px 0;
                position: absolute;
                
                width:  36px;
                height: 36px;
                opacity: 0;
                
                // TODO: figure out why this transform is only working in webkit
                .transform(perspective(600) scaleX(.01) scaleY(.01) rotateX(20deg));
                .transition-transform2(.2s, ease-out, opacity, .2s, ease-out);
            }
            
            &:hover .tongue {
                opacity: 1;
                .transform(perspective(600));
            }
        }
    }
    
    .popup-body {
        overflow: scroll;
        max-height: 300px;
        
        &:focus {
            outline: none;
        }
        
        .jspVerticalBar {
            margin: 0 6px 0 @padding;
            padding-top:  8px;
            
            max-height: 284px !important;
            height:     284px !important;
            
            .jspTrack {
                max-height: 284px !important;
                height:     284px !important;
            }
        }
        
        .popup-body-inner {
            .user {
                // very slight background-color transition on mouse-out
                // (immediate transition on mouse-over)
                background-color: #fff;
                .transition(background-color, 0.1s, ease-out);
                
                border-bottom: 1px solid #c2c2c2;
                white-space: nowrap;
                
                padding: (@padding / 2) @padding;
                
                .profile-image-small, .stamp, .name {
                    float: left;
                }
                
                .profile-image-small {
                    margin-right: 16px;
                }
                
                .stamp {
                    margin-right: 6px;
                }
                
                .name {
                    margin-right: 6px;
                    max-width: 136px;
                    
                    p {
                        margin:  0;
                        padding: 0;
                    }
                    
                    .fullname {
                        font-weight: 700;
                        margin: 0 0 .5em;
                        padding: 0;
                    }
                    
                    a {
                        color: #999;
                        
                        &:hover {
                            text-decoration: none !important;
                        }
                    }
                }
                
                .rhs {
                    float: right;
                }
                
                &:hover .name a {
                    color: #595959;
                }
            }
        }
    }
}
.popup-todos {
    .rhs-icon {
        background-position: -76px 0;
    }
}

