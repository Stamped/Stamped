/* styles.less - Main Stamped.com Stylesheet
 * 
 * NOTE: the css version of this file is auto-generated, so only edit the original 
 * less version if you don't want your changes to be overwritten.
 * 
 * Copyright (c) 2011-2012 Stamped Inc.
 */


/* **************************************************************************
                                    IMPORTS
   ************************************************************************** */


@import "libs/h5bp.min.css";
@import "fonts.less";
@import "common.less";


/* **************************************************************************
                            BASIC HIGH-LEVEL SETUP
   ************************************************************************** */


html {
	overflow-y: scroll;
}

body, html {
    width:  100%;
    height: 100%;
}

body {
    font-family: 'helvetica', sans-serif;
    font-size: 1em;
    
    background: #fff;
    color: #666;
}

a, a:link {
	font-style: inherit;
}

a, a:focus {
    outline: 0;
}

a, a:visited {
    color: #666; /* #3366cc; */
    text-decoration: none;
}
a:visited {
    color: #444;
}

a:hover {
    color: black;
}

ol, ul {
    text-decoration: none;
    list-style: none;
    text-indent: 0;
    padding: 0;
    margin:  0;
}

.active-link {
    color: #438FED !important;
}


/* **************************************************************************
                              GENERIC FIXED HEADER
   ************************************************************************** */


header {
    .fullwidth;
    
    position: fixed;
    z-index: 150;
    background: #fff;
     
    .header-body {
        position: relative;
        height: 64px;
        
        p {
            position: absolute;
            line-height: 42px;
            
            margin: 0;
            top:    0;
            right:  12px;
            
            .desc {
                font-size: 90%;
                margin-right: 12px;
            }
            
            .download-the-free-app-button {
                position: relative;
                display:  inline-block;
                top: 15px;
            }
        }
    }
}

.post-header {
    .fullwidth;
    .box-shadow(0, 2px, 3px, 0, rgba(50, 50, 50, 0.15));
    
    position: relative;
    display:  block;
    
    height: 15px;
}

.post-header-overlay {
    position: absolute;
    background: #fff;
    
    width:  100%;
    height: 100%;
    
    opacity: 0;
    .transition(opacity, .5s, ease);
}

.user-logo-large {
    position: absolute;
    top:  -60px;
    left: -110px;
    
    display: block;
    width:  210px;
    height: 210px;
    
    z-index: 160;
}

.user-logo-small {
    position: absolute;
    top:   0;
    right: -22px;
    
    display: inline-block;
    width:  44px;
    height: 44px;
    
    z-index: 101;
}

.user-logo-tiny {
    position: absolute;
    top:   -6px;
    right: -12px;
    
    display: inline-block;
    width:  24px;
    height: 24px;
    
    z-index: 101;
}

.ribbon-top {
    background: url(/assets/img/ribbon-top.png) repeat-x;
    height: 15px;
}

.ribbon-bottom {
    background: url(/assets/img/ribbon-bottom.png) repeat-x 0 -1px;
    height: 15px;
}

#main-page-content {
    position: relative;
    top:  70px;
    left: 0;
}

#stamped-logo, .stamped-logo {
    position: absolute;
    z-index: 10000;
    
    background: url(/assets/img/index/stamped-logo.png) no-repeat;
    
    display: block;
    width:  184px;
    height: 184px;
    
    top:   -130px;
    left:  -90px;
    
    opacity: 1;
    .transform(translateZ(0));
    .transition-transform(.3s, ease);
}

#retina {
    #stamped-logo, .stamped-logo {
        background: url(/assets/img/index/stamped-logo@2x.png) no-repeat;
        width:  368px;
        height: 368px;
        
        // TODO: test retina offsets
        top:   -130px;
        left:  -90px;
    }
}

.stamped-logo-fixed {
    position: fixed !important;
}

.fancybox-inner {
    overflow: visible !important;
}


/* **************************************************************************
                                PROFILE IMAGES
   ************************************************************************** */


.profile-image(@size: 128px, @border: 4px) {
    position: relative;
    .floatleft;
    
    display: block;
    width:  @size + @border * 2;
    height: @size + @border * 2;
    
    img {
        width:  @size;
        height: @size;
        
        .profile-image-border(@border);
    }
    
    &:hover .context-popup {
        display: block;
        cursor:  pointer;
    }
}

.profile-image-large {
    .profile-image(128px, 4px);
}

.profile-image-large-ish {
    .profile-image(96px,  3px);
}

.profile-image-medium-ish {
    .profile-image(72px,  3px);
}

.profile-image-60 {
    .profile-image(52px,  2px);
}

.profile-image-medium {
    .profile-image(54px,  2px);
}

.profile-image-small {
    .profile-image(44px,  2px);
}

.profile-image-tiny {
    .profile-image(24px,  1px);
}


/* **************************************************************************
                                USER GALLERY
   ************************************************************************** */


.user-gallery {
    display:  block;
    position: relative;
    
    .user-gallery-item {
        display: inline-block;
    }
    
    .expand-friends {
        position: absolute;
        display:  block;
        
        width:  24px;
        height: 24px;
        
        right: 8px;
        top:   50%;
        margin-top: -12px;
        
        background: url(/assets/img/user-gallery-expand.png) no-repeat;
        .profile-image-border(1px);
        
        &:hover, &:active {
            .context-popup {
                display: block;
            }
        }
    }
}

// target only Firefox
@-moz-document url-prefix() {
    .user-gallery .expand-friends {
        margin-top: -13px;
    }
}


/* **************************************************************************
                           CRINKLED STATIC GOOGLE MAP
   ************************************************************************** */


.static-map(@size: 200px, @b: 0, @angle: 45deg, @perspective: 200px) {
    position: relative;
    display:  block;
    width:   @size;
    
    @padding: 4px;
    top:    -@padding;
    left:   -@padding;
    padding: @padding;
    
    .static-map-inner {
        margin: 0 auto;
        @colsize: @size / 4;
        
        position: relative;
        top:  0;
        left: -@b;
        
        display: block;
        width:  @size;
        height: @size;
        
        /*.perspective(@perspective);*/
        /*.transform-style(preserve-3d);
        .backface-visibility(hidden);*/
        
        ._section(@x) {
            background: url('https://maps.googleapis.com/maps/api/staticmap?center=40.714728,-73.998672&zoom=12&sensor=false&scale=1&format=png&maptype=roadmap&size=144x144&key=AIzaSyAEjlMEfxmlCBQeyw_82jjobQAFjYx-Las');
            background-position: -(@x * @colsize);
            
            position: absolute;
            display:  block;
            
            width:  @colsize;
            height: @size;
            
            top: 0;
            border: @b solid #fff;
            
            //.box-shadow(0, 0, @b * 2, 0, @shadow);
            //.box-shadow(2px, 2px, 2px, 0, rgba(0, 0, 0, 0.15));
            //.transform-style(preserve-3d);
            
            .transition-transform(.1s, linear);
        }
        
        .__section(@x) when (@x > 0) {
            left: @x * @colsize + @b * 2;
        }
        .__section(@x) when (@x = 0) {
            left: @x * @colsize + @b;
        }
        
        .section(@x) {
            ._section(@x);
            .__section(@x);
        }
        
        .r0 {
            .section(0);
            
            border-width: @b 0 @b @b;
            .transform(perspective(@perspective) translate(12px, 0) rotateY(-@angle));
        }
        
        .r1 {
            .section(1);
            
            border-width: @b 0;
            .transform(perspective(@perspective) translate(7px,  0) rotateY(@angle));

        }
        
        .r2 {
            .section(2);
            
            border-width: @b 0;
            .transform(perspective(@perspective) translate(-1px, 0) rotateY(-@angle));
        }
        
        .r3 {
            .section(3);
            
            border-width: @b @b @b 0;
            .transform(perspective(@perspective) translate(-6px, 0) rotateY(@angle));
        }
        
        .dark-layer {
            display: block;
            width:  100%;
            height: 100%;
            background: #333;
            opacity: 0.1;
            
            .transition(opacity, .1s, ease-in-out);
        }
        
        .pin {
            background: url(/assets/img/pin_shadow.png);
            
            position: absolute;
            top:  50%;
            left: 50%;
            margin: -7px auto auto 0;
            
            display: block;
            width:  24px;
            height: 18px;
            
            &:hover {
                cursor: pointer;
            }
            
            .pin-inner {
                background: url(/assets/img/pin.png);
                
                position: relative;
                top:  -16px;
                left: -8px;
                
                display: block;
                width:  26px;
                height: 36px;
            }
            
            .transform(perspective(@perspective) translate(-2px, 0) scale(.8, .8));
            .transition-transform(.1s, linear);
        }
    }
    
    &:hover {
        .r0, .r1, .r2, .r3, .pin {
            .transform(perspective(@perspective));
        }
        
        .dark-layer {
            opacity: 0;
        }
    }
}

.static-map-small {
    /*.static-map(@size: 140px, @b: 2px, @angle: 35deg, @perspective: 200px)*/
    .static-map(140px, 2px, 35deg, 200px);
}


/* **************************************************************************
                             GENERIC BLUR FILTERS
   ************************************************************************** */


.blurred(@filter, @radius_px) {
    filter: url(@filter);
    -webkit-filter: blur(@radius_px);
    
    @duration: 1s;
    @ease: ease-out;
    
    transition: filter @duration @ease;
    -moz-transition: filter @duration @ease;
    -webkit-transition: -webkit-filter @duration @ease;
    
    &:hover {
        filter: none;
        -webkit-filter: blur(0);
    }
}

.blurred_ie(@radius, @radius_px) {
    margin: -@radius_px;
    filter: progid:DXImageTransform.Microsoft.blur(pixelradius=@radius);
    zoom: 1;
    
    &:hover {
        margin: 0;
        filter: none;
    }
}

.blur_0   { .blurred('blur.svg#gaussian_blur_0',   0);     } .ie { .blur_0   { .blurred_ie(0,   0);     } }
.blur_1   { .blurred('blur.svg#gaussian_blur_1',   1px);   } .ie { .blur_1   { .blurred_ie(1,   1px);   } }
.blur_2   { .blurred('blur.svg#gaussian_blur_2',   2px);   } .ie { .blur_2   { .blurred_ie(2,   2px);   } }
.blur_3   { .blurred('blur.svg#gaussian_blur_3',   3px);   } .ie { .blur_3   { .blurred_ie(3,   3px);   } }
.blur_4   { .blurred('blur.svg#gaussian_blur_4',   4px);   } .ie { .blur_4   { .blurred_ie(4,   4px);   } }
.blur_5   { .blurred('blur.svg#gaussian_blur_5',   5px);   } .ie { .blur_5   { .blurred_ie(5,   5px);   } }
.blur_6   { .blurred('blur.svg#gaussian_blur_6',   6px);   } .ie { .blur_6   { .blurred_ie(6,   6px);   } }
.blur_7   { .blurred('blur.svg#gaussian_blur_7',   7px);   } .ie { .blur_7   { .blurred_ie(7,   7px);   } }
.blur_8   { .blurred('blur.svg#gaussian_blur_8',   8px);   } .ie { .blur_8   { .blurred_ie(8,   8px);   } }
.blur_9   { .blurred('blur.svg#gaussian_blur_9',   9px);   } .ie { .blur_9   { .blurred_ie(9,   9px);   } }
.blur_10  { .blurred('blur.svg#gaussian_blur_10',  10px);  } .ie { .blur_10  { .blurred_ie(10,  10px);  } }
.blur_11  { .blurred('blur.svg#gaussian_blur_11',  11px);  } .ie { .blur_11  { .blurred_ie(11,  11px);  } }
.blur_12  { .blurred('blur.svg#gaussian_blur_12',  12px);  } .ie { .blur_12  { .blurred_ie(12,  12px);  } }
.blur_13  { .blurred('blur.svg#gaussian_blur_13',  13px);  } .ie { .blur_13  { .blurred_ie(13,  13px);  } }
.blur_14  { .blurred('blur.svg#gaussian_blur_14',  14px);  } .ie { .blur_14  { .blurred_ie(14,  14px);  } }
.blur_15  { .blurred('blur.svg#gaussian_blur_15',  15px);  } .ie { .blur_15  { .blurred_ie(15,  15px);  } }
.blur_16  { .blurred('blur.svg#gaussian_blur_16',  16px);  } .ie { .blur_16  { .blurred_ie(16,  16px);  } }
.blur_17  { .blurred('blur.svg#gaussian_blur_17',  17px);  } .ie { .blur_17  { .blurred_ie(17,  17px);  } }
.blur_18  { .blurred('blur.svg#gaussian_blur_18',  18px);  } .ie { .blur_18  { .blurred_ie(18,  18px);  } }
.blur_19  { .blurred('blur.svg#gaussian_blur_19',  19px);  } .ie { .blur_19  { .blurred_ie(19,  19px);  } }
.blur_20  { .blurred('blur.svg#gaussian_blur_20',  20px);  } .ie { .blur_20  { .blurred_ie(20,  20px);  } }
.blur_21  { .blurred('blur.svg#gaussian_blur_21',  21px);  } .ie { .blur_21  { .blurred_ie(21,  21px);  } }
.blur_22  { .blurred('blur.svg#gaussian_blur_22',  22px);  } .ie { .blur_22  { .blurred_ie(22,  22px);  } }
.blur_23  { .blurred('blur.svg#gaussian_blur_23',  23px);  } .ie { .blur_23  { .blurred_ie(23,  23px);  } }
.blur_24  { .blurred('blur.svg#gaussian_blur_24',  24px);  } .ie { .blur_24  { .blurred_ie(24,  24px);  } }
.blur_25  { .blurred('blur.svg#gaussian_blur_25',  25px);  } .ie { .blur_25  { .blurred_ie(25,  25px);  } }
.blur_26  { .blurred('blur.svg#gaussian_blur_26',  26px);  } .ie { .blur_26  { .blurred_ie(26,  26px);  } }
.blur_27  { .blurred('blur.svg#gaussian_blur_27',  27px);  } .ie { .blur_27  { .blurred_ie(27,  27px);  } }
.blur_28  { .blurred('blur.svg#gaussian_blur_28',  28px);  } .ie { .blur_28  { .blurred_ie(28,  28px);  } }
.blur_29  { .blurred('blur.svg#gaussian_blur_29',  29px);  } .ie { .blur_29  { .blurred_ie(29,  29px);  } }
.blur_30  { .blurred('blur.svg#gaussian_blur_30',  30px);  } .ie { .blur_30  { .blurred_ie(30,  30px);  } }
.blur_31  { .blurred('blur.svg#gaussian_blur_31',  31px);  } .ie { .blur_31  { .blurred_ie(31,  31px);  } }
.blur_32  { .blurred('blur.svg#gaussian_blur_32',  32px);  } .ie { .blur_32  { .blurred_ie(32,  32px);  } }
.blur_48  { .blurred('blur.svg#gaussian_blur_48',  48px);  } .ie { .blur_48  { .blurred_ie(48,  48px);  } }
.blur_64  { .blurred('blur.svg#gaussian_blur_64',  64px);  } .ie { .blur_64  { .blurred_ie(64,  64px);  } }
.blur_96  { .blurred('blur.svg#gaussian_blur_96',  96px);  } .ie { .blur_96  { .blurred_ie(96,  96px);  } }
.blur_128 { .blurred('blur.svg#gaussian_blur_128', 128px); } .ie { .blur_128 { .blurred_ie(128, 128px); } }


/* **************************************************************************
                            SOCIAL SHARING WIDGET
   ************************************************************************** */


.share-widget {
    background-color: #fff;
    padding: 7px 17px 4px;
    
    .rounded(1em);
    .box-shadow(0, 0, 18px, 0, @shadow);
    
    /* NOTE: because social sharing requires JS, sharing widgets are hidden 
       by default in CSS and only displayed on page load via JS if JS is 
       supported.
    */
    display: none;
    .transition-rounded(0.3s, ease-out);
    
    .desc {
        font-size: 80%;
        font-weight: 700;
        white-space: nowrap;
        color: #333;
    }
    
    .share-buttons {
        display: none;
        white-space: nowrap;
        
        margin: 7px auto 5px;
        
        .share-button {
            display:  inline-block;
            position: relative;
            
            min-width: 90px;
        }
        
        .facebook {
            top: -4px;
        }
    }
    
    &:hover {
        .rounded(4px);
        
        .share-buttons {
            display: block;
        }
    }
}


/* **************************************************************************
                              MISC / DEPRECATED
   ************************************************************************** */


a.sdetail, .pronounced-title a {
    &:hover, &:active {
        text-decoration: none;
    }
}

.screen-name {
    text-transform: lowercase;
}

.pronounced-title a, a.pronounced-title {
    color: #262626;
}

.pronounced-title {
    position: relative;
    
    .stamped-font();
    
    font-size: 2.8em;
    letter-spacing: .05em;
    color: #262626;
}

.context-popup {
    position: absolute;
    display:  none;
    z-index:  10001;
    
    top:  -32px;
    left: -16px;
    
    font: bold .9em;
    padding: 8px;
    line-height: 100%;
    white-space: nowrap;
    
    background: rgba(10, 10, 10, 0.75);
    color: #fff;
    
    .rounded(4px);
}

.close-button {
    position: relative;
    display:  block;
    
    /* NOTE: with the rounded corners, this ends up being roughly 36x36px */
    /* TODO: possibly replace these rounded corners with static images?   */
    width:  28px;
    height: 28px;
    
    border: 4px solid #bfbfbf;
    background: #fff;
    
    .rounded(36px);
    .box-shadow(0, 0, 6px, 0, @shadow);
    
    .close-button-inner {
        background: url(/assets/img/x_close_sprite.png) no-repeat -32px 0;
        position: absolute;
        top:  7px;
        left: 7px;
        
        width:  14px;
        height: 14px;
    }
    
    &:hover {
        border-color: #666;
        cursor: pointer;
        
        .close-button-inner {
            background-position: -48px 0;
        }
    }
}

.fancybox-wrap {
    .close-button {
        position: absolute;
        top:   -18px;
        right: -18px;
    }
}


/* **************************************************************************
                        ENTITY / STAMP CATEGORY ICONS
   ************************************************************************** */


.icon {
    background: url('/assets/img/categoryicons18px.png') no-repeat;
    display: inline-block;
    width:  18px;
    height: 18px;
}

.stamp-category-book .icon                  { background-position: -180px -20px; }
.stamp-category-book .dark-icon             { background-position: -180px 0; }

.stamp-category-film .icon                  { background-position: -140px -20px; }
.stamp-category-film .dark-icon             { background-position: -140px 0; }

.stamp-category-place .icon                 { background-position: -60px -20px; }
.stamp-category-place .dark-icon            { background-position: -60px 0; }

.stamp-category-food .icon                  { background-position: 0 -20px; }
.stamp-category-food .dark-icon             { background-position: 0 0; }

.stamp-category-music .icon                 { background-position: -80px -20px; }
.stamp-category-music .dark-icon            { background-position: -80px 0; }

.stamp-category-other .icon, 
.stamp-category- .icon                      { background-position: -220px -20px; }
.stamp-category-other .dark-icon, 
.stamp-category- .dark-icon                 { background-position: -220px 0; }

.stamp-subcategory-restaurant .icon         { background-position: 0 -20px; }
.stamp-subcategory-restaurant .dark-icon    { background-position: 0 0; }

.stamp-subcategory-bar .icon                { background-position: -20px -20px; }
.stamp-subcategory-bar .dark-icon           { background-position: -20px 0; }

.stamp-subcategory-cafe .icon               { background-position: -40px -20px; }
.stamp-subcategory-cafe .dark-icon          { background-position: -40px 0; }

.stamp-subcategory-tv .icon                 { background-position: -160px -20px; }
.stamp-subcategory-tv .dark-icon            { background-position: -160px 0; }

.stamp-subcategory-song .icon               { background-position: -100px -20px; }
.stamp-subcategory-song .dark-icon          { background-position: -100px 0; }

.stamp-subcategory-artist .icon             { background-position: -120px -20px; }
.stamp-subcategory-artist .dark-icon        { background-position: -120px 0; }

.stamp-subcategory-app .icon                { background-position: -200px -20px; }
.stamp-subcategory-app .dark-icon           { background-position: -200px 0; }


/* **************************************************************************
                                POPUP VIEWS
   ************************************************************************** */


@popup-padding:  24px;

#popup-signup {
    display: none;
}

.popup {
    position: relative;
    background-color: #fff;
    
    .popup-header {
        padding: (@popup-padding / 4) @popup-padding;
        white-space: nowrap;
    }
    
    .popup-body {
        &:focus {
            outline: none;
        }
    }
}

.popup-large {
    text-align: center;
    width: 100%;
    
    .stamped-logo {
        top:  -160px;
        left: 50%;
        
        margin-left: -92px;
    }
    
    .popup-header {
        .pronounced-title {
            line-height: 100%;
            margin-bottom: 0;
            padding-bottom: 0;
        }
    }
    
    .popup-body {
        padding: 0 @popup-padding;
        font-size: 90%;
        
        p {
            margin: .5em 0;
        }
        
        .sms {
            position: relative;
            border: 2px solid #AAA;
            margin: 0 auto;
            width: 70%;
            line-height: 31px;
            
            padding: 6px 12px;
            .rounded(4px);
            
            input {
                text-align: left;
                padding: 0;
                
                color: #AAA;
                border: 0 none;
                outline: none;
                
                &:focus {
                    border: 0 none;
                    outline: none;
                    color: #1A60C3;
                }
            }
            
            .send-button {
                float: right;
                opacity: .3;
                
                border: 0 none;
                outline: none;
                
                .transition(opacity, .3s, linear);
            }
            
            .active { opacity: 1.0; }
        }
        
        .active {
            border-color: #1A60C3;
        }
        
        .error {
            border-color: red;
            color: red;
        }
        
        .or {
            margin-top: .5em;
            
            .dotted-left, .dotted-right {
                display: inline-block;
                width: 25%;
                height: .5em;
                padding-top: .5em;
                border-bottom: 2px dotted #AAA;
            }
        }
    }
    
    .app-store-button {
        position: absolute;
        left: 50%;
        bottom: -60px;
        margin-left: -60px;
    }
}

#retina {
    .popup-large {
        .popup-body {
            .sms {
                line-height: 62px;
            }
        }
        
        .app-store-button {
            margin-left: -120px;
        }
    }
}

.index .learn-more {
    display: none;
}


/* **************************************************************************
                                   BUTTONS
   ************************************************************************** */


.download-the-app-button {
    background: url(/assets/img/index/downloadbtn_sprite.png) no-repeat;
    display: block;
    
    width:  200px;
    height: 32px;
    
    &:hover {
        background-position: -202px 0;
    }
    
    &:active {
        background-position: -404px 0;
    }
}

.app-store-button {
    background: url(/assets/img/index/appstore_sprite.png) no-repeat;
    display: block;
    
    width:  116px;
    height: 40px;
    
    &:hover, &:active {
        background-position: -118px 0;
    }
}

.send-button {
    background: url(/assets/img/sendbtn_sprite.png) no-repeat;
    display: block;
    
    width:  68px;
    height: 31px;
    
    &:hover, &:active {
        background-position: -70px 0;
    }
}

.get-the-app-button {
    background: url(/assets/img/gettheapp_btn_sprite.png) no-repeat;
    
    display: block;
    width:  120px;
    height: 32px;
    
    &:hover {
        background-position: -121px 0;
    }
    
    &:active {
        background-position: -242px 0;
    }
}

.download-the-free-app-button {
    background: url(/assets/img/downloadthefreeapp_btn_sprite.png) no-repeat;
    
    display: block;
    width:  198px;
    height: 42px;
    
    &:hover {
        background-position: -200px 0;
    }
    
    &:active {
        background-position: -400px 0;
    }
}


/* **************************************************************************
                            RETINA DISPLAY BUTTONS
   ************************************************************************** */


#retina {
    .download-the-app-button {
        background: url(/assets/img/index/downloadbtn_sprite@2x.png) no-repeat;
        width:  400px;
        height: 64px;
        
        &:hover {
            background-position: -404px 0;
        }
        
        &:active {
            background-position: -808px 0;
        }
    }
    
    .app-store-button {
        background: url(/assets/img/index/appstore_sprite@2x.png) no-repeat;
        width:  232px;
        height: 80px;
        
        &:hover, &:active {
            background-position: -236px 0;
        }
    }
    
    .send-button {
        background: url(/assets/img/sendbtn_sprite@2x.png) no-repeat;
        
        width:  137px;
        height: 62px;
        
        &:hover, &:active {
            background-position: -141px 0;
        }
    }
    
    .download-the-free-app-button {
        width:  396px;
        height: 84px;
        
        &:hover {
            background-position: -400px 0;
        }
        
        &:active {
            background-position: -800px 0;
        }
    }
}

