/* index.less
 * 
 * NOTE: the css version of this file is auto-generated, so only edit the original 
 * less version if you don't want your changes to be overwritten.
 * 
 * Copyright (c) 2011-2012 Stamped Inc.
 */


/* **************************************************************************
                                    IMPORTS
   ************************************************************************** */


@import "common.less";
@import "libs/elements.less";


/* **************************************************************************
                                  BASE LAYOUT
   ************************************************************************** */

@base-background: #f2f2f2;

body, html {
    background: @base-background;
    overflow: hidden !important;
}

body.intro {
    .main-content {
        display: none;
    }
    
    #intro {
        display: block !important;
    }
}

body.main {
    .main-content {
        display: block !important;
    }
    
    #intro {
        display: none;
    }
}


/* **************************************************************************
                                    INTRO
   ************************************************************************** */


#intro-hero {
    position: fixed;
    z-index: 100;
    
    text-align: center;
    width: 100%;
    top:   50%;
    margin-top: -140px;
    color: #b7b7b7;
    
    .text {
        display: none;
        
        .line {
            position: absolute;
            white-space: nowrap;
            display: block;
            width: 100%;
            pointer-events: none;
            z-index: 1;
            
            opacity: 0;
            .transition(opacity, .1s, ease);
            .stamped-font();
            
            .blurred {
                display: none;
            }
        }
        
        .active-line {
            pointer-events: auto;
            opacity: 1;
            z-index: 100;
        }
    }
    
    .active-text {
        display: block;
    }
}


/* **************************************************************************
                               CORE PAGE CONTENT
   ************************************************************************** */


#main-page-content {
    position: static;
    top: 0;
}

#main {
    position: absolute;
    left: 50%;
    top: -100%;
    margin-left: -350px;
    z-index: 10;
    
    .pane-body {
        position: relative;
        background: #fff;
        width: 470px;
        
        margin:  0 0 18px 12px;
        padding-bottom: 15px;
        
        .box-shadow(0, 2px, 25px, 0, @shadow);
        
        .ribbon-wrapper {
            background: #c7c7c7;
            width:  100%;
            height: 15px;
            
            .rounded(2px);
            
            .ribbon {
                .rounded(2px);
            }
        }
        
        .ribbon-wrapper-bottom {
            position: absolute;
            bottom: 0;
            left:   0;
        }
        
        #pane-wrapper {
            position: relative;
            margin: 24px 48px;
            
            .pane {
                position: absolute;
                top:  0;
                left: 0;
                height: 100%;
                
                opacity: 0;
                .transition(opacity, .3s, ease);
                
                .title {
                    .stamped-font();
                    
                    letter-spacing: 0.03em;
                    font-size: 3em;
                    line-height: 115%;
                    color: #333;
                }
                
                .desc {
                    color: #888;
                    font-weight: 200;
                    font-size: 80%;
                }
            }
            
            #pane-3 {
                position: relative !important;
                
                .continue-button {
                    margin-bottom: 0 !important;
                    margin-left: .5em;
                }
            }
        }
    }
    
    #pane-nav {
        position: absolute;
        left: -24px;
        top:   50%;
        margin-top: -50px;
        
        .pane-nav-button {
            margin-bottom: 4px;
        }
        
        #pane-nav-4 {
            margin-bottom: 0;
        }
    }
}

.hidden-main-animating {
    .transition(opacity, .4s, ease);
    .transition-delay(.4s);
}

.active-pane-0 #pane-nav-0, 
.active-pane-1 #pane-nav-1, 
.active-pane-2 #pane-nav-2, 
.active-pane-3 #pane-nav-3, 
.active-pane-4 #pane-nav-4 {
    background-position: -36px 0;
}

.active-pane-0 #pane-0, 
.active-pane-1 #pane-1, 
.active-pane-2 #pane-2, 
.active-pane-3 #pane-3, 
.active-pane-4 #pane-4 {
    opacity: 1 !important;
    z-index: 50;
}

#retina .active-pane-0 #pane-nav-0, 
#retina .active-pane-1 #pane-nav-1, 
#retina .active-pane-2 #pane-nav-2, 
#retina .active-pane-3 #pane-nav-3, 
#retina .active-pane-4 #pane-nav-4 {
    background-position: -70px 0;
    
    &:hover {
        background-position: -70px 0;
    }
}

#main-header {
    margin-bottom: 12px;
    text-align: right;
    
    .launcher-icon-button {
        position: relative;
        z-index: 99;
    }
    
    #available {
        margin: 4px 12px 0 0;
        
        .desc {
            font-size: 90%;
            margin-bottom: 4px;
        }
    }
}

#main-body {
    position: relative;
}

#stamped-logo {
    position: absolute;
    z-index: 100;
    
    background: url(/assets/img/index/stamped-logo.png) no-repeat;
    width:  184px;
    height: 184px;
    
    top:   -130px;
    left:  -90px;
    
    opacity: 1;
    .transform(translateZ(0));
    .transition-transform(.3s, ease);
}

#retina #stamped-logo {
    background: url(/assets/img/index/stamped-logo@2x.png) no-repeat;
    width:  368px;
    height: 368px;
    
    // TODO: test retina offsets
    top:   -130px;
    left:  -90px;
}

#main-footer {
    position: relative;
    left: 8px;
    
    .watch-video {
        float: left;
        margin-left: 8px;
        
        .bieber-video-preview-icon {
            display: inline-block;
            position: relative;
            top: 12px;
        }
        
        .overview-video {
            display: none;
        }
    }
    
    .app-store-button {
        position: relative;
        
        float: right;
        margin: 8px 12px;
    }
}

.watch-video-overview {
    .default-video, .bieber-video-preview-icon {
        display: none !important;
    }
    
    .overview-video {
        display: block !important;
    }
}

.speech-bubble {
    display: inline-block;
    width: 190px;
    padding: 8px;
    margin-right: 12px;
    text-align: left;
    
    background: @base-background;
    border: 1px solid #d7d7d7;
    .rounded(4px);
    
    .play-video-button-small {
        float: left;
        margin-right: 12px;
    }
    
    .desc {
        font-size: 80%;
        margin: 0;
    }
}

.user-video-preview {
    display: inline-block;
    width: 108px;
    
    .user-video-preview-image {
        position: relative;
        display:  block;
        
        width:  100%;
        height: 64px;
        margin-bottom: 8px;
        
        .box-shadow(0, 2px, 6px, 0, @shadow);
        
        .play-video-button-small {
            position: absolute;
            left: 50%;
            top:  50%;
            
            margin: -20px 0 0 -20px;
            
            display: none;
        }
        
        .play-video-button-large {
            position: absolute;
            left: 50%;
            top:  50%;
            
            margin: -32px 0 0 -32px;
        }
        
        &:hover, &:active {
            .play-video-button-small {
                display: block;
                
                background-position: -42px 0;
            }
            
            .play-video-button-large {
                background-position: -66px 0;
            }
        }
    }
    
}

#pane-4 {
    .title, .desc {
        max-width: 270px;
    }
}

#hero-video-preview {
    position: absolute;
    top:  50%;
    left: 290px;
    margin-top: -129px;
    
    display: none;
    width: 470px;
    
    .user-video-preview-image {
        background: url(/assets/img/index/user_video_preview_bieber.jpg) no-repeat;
        height: 270px;
        
        .box-shadow(0, 2px, 25px, 0, @shadow);
    }
    
    .user-video-desc {
        text-align: center;
    }
}

#maggie-video-preview {
    .user-video-preview-image {
        background: url(/assets/img/index/user_video_preview_maggie.jpg) no-repeat;
        background-size: 100% 100%;
    }
}

#tristanlisa-video-preview {
    margin-right: 1em;
    
    .screen-names {
        display: block;
    }
    
    .user-video-preview-image {
        background: url(/assets/img/index/user_video_preview_tristanlisa.jpg) no-repeat;
        background-size: 100% 100%;
    }
}

.active-pane-4 #hero-video-preview {
    display: block;
}

.intro {
    .hidden-main-animating {
        opacity: 0;
        .transition(opacity, 0s, linear);
    }
}

.main-animating {
    #stamped-logo {
        opacity: 0;
        .transform(scale(1.5, 1.5));
    }
    
    .hidden-main-animating {
        opacity: 0;
        .transition(opacity, 0s, linear);
    }
}

#tastemaker-gallery {
    margin-top: 24px;
    .tastemaker {
        position: relative;
        display:  inline-block;
        
        margin-right: 18px;
    }
    
    .tastemaker:last-child {
        margin-right: 0;
    }
}

.tastemaker-logo {
    width:  36px;
    height: 36px;
    
    top:   -18px;
    right: -18px;
}

// target webkit browsers
@media screen and (-webkit-min-device-pixel-ratio:0) {
    .tastemaker-logo {
        @mask-image: url(/assets/img/stamped_email_mask.png);
        
        -webkit-mask: @mask-image no-repeat;
        -webkit-mask-size: 100% 100%;
        mask: @mask-image no-repeat;
    }
}

#tastemaker-map-window {
    background: url(/assets/img/index/chrome.png) no-repeat;
    width:  1145px;
    height: 732px;
    
    position: absolute;
    display: none;
    z-index: 2;
    
    top: 50%;
    left: 100%;
    margin-left: 130px;
    
    margin-top: -364px;
    padding: 84px 0 0 42px;
    
    #fake-url {
        position: absolute;
        left: 128px;
        top:  62px;
        font: 10pt helvetica;
        color: #666;
    }
    
    .chrome-button {
        position: absolute;
        
        background: url(/assets/img/index/chrome_buttons_sprite.png) no-repeat;
        width:  27px;
        height: 28px;
    }
    
    #back-button {
        top:  56px;
        left: 37px;
        
        background-position: 0 0;
        background-position: -29px 0;
        
        &:hover {
            background-position: -58px 0;
        }
        
        &:active {
            background-position: -87px 0;
        }
    }
    
    #forward-button {
        top:  56px;
        left: 64px;
        
        background-position: 0 -60px;
        background-position: -29px -60px;
        
        &:hover {
            background-position: -58px -60px;
        }
        
        &:active {
            background-position: -87px -60px;
        }
    }
    
    #refresh-button {
        top:  56px;
        left: 91px;
        
        background-position: 0 -30px;
        background-position: -29px -30px;
        
        &:hover {
            background-position: -58px -30px;
        }
        
        &:active {
            background-position: -87px -30px;
        }
    }
}

#tastemaker-map-window-iframe {
    width:  100%;
    height: 100%;
}

#tastemaker-map-window-overlay {
    position: absolute;
    top:  84px;
    left: 42px;
    z-index: 3;
    
    width:  100%;
    height: 100%;
    
    pointer-events: none;
    background: #fff;
    display: none;
    
    #tastemaker-map-window-loading {
        position: absolute;
        left: 20px;
        top:  20px;
        
        background: url(/assets/img/loading.gif) no-repeat;
        width:  32px;
        height: 32px;
    }
}

.third-party-logos {
    margin: 12px auto;
    
    .third-party-logo {
        display: inline-block;
        margin-right: 20px;
    }
    
    .third-party-logo-opentable {
        margin-right: 0;
    }
}


/* **************************************************************************
                               MISC SPAN STYLES
   ************************************************************************** */


.screen-name {
    color: #438fed !important;
}

.watch {
    color: #438fED;
}

.bolded {
    font-weight: 700;
    color: #888 !important;
}

.italic {
    font-style: italic;
}

.facebook {
    color: #3B5999;
}

.twitter {
    color: #4099FF;
}


/* **************************************************************************
               NUANCE PANE TITLES TO COERCE DESIRED LINE BREAKS
   ************************************************************************** */


#pane-1 .title {
    letter-spacing: 0.05em !important;
}

#pane-2 .title {
    font-size: 2.9em !important;
}

#pane-3 .title {
    letter-spacing: 0.05em !important;
}

#pane-4 .title {
    letter-spacing: 0.05em !important;
}


/* **************************************************************************
                       HERO IPHONE IN CORE PAGE VIEWS
   ************************************************************************** */


#main-iphone {
    position: absolute;
    top:  200%;
    left: 50%;
    margin: -275px 0 0 120px;
    z-index: 98;
    
    width:  377px;
    height: 564px;
    pointer-events: none;
}

#iphone-hero {
    position: absolute;
    width:  370px;
    height: 614px;
}

.iphone-body-shadow {
    position: absolute;
    width:  100%;
    height: 100%;
    
    background: url(/assets/img/index/iphone_main_shadow_sprite.png) no-repeat;
    //background: red;
    pointer-events: none;
}

.iphone-body-shadow-0 {
    top:   20px;
    left: -40px;
}

.iphone-body-shadow-1 {
    background-position: -372px 0;
    top:  60px;
    left: 60px;
}

#retina {
    .iphone-body-shadow {
        background: url(/assets/img/index/iphone_main_shadow_sprite@2x.png) no-repeat;
    }
}

.iphone-body {
    background: url(/assets/img/index/iphone_sprite.png) no-repeat;
    position: relative;
    width:  289px;
    height: 564px;
    margin: 0 auto;
    pointer-events: auto;
}

@-webkit-keyframes -webkit-iphone-lighting-animation {
    0%   { background-position: 75px 0; }
    100% { background-position: -1245px 0; }
}

.iphone-body-lighting {
    position: absolute;
    top:  0;
    left: 50%;
    margin-left: (-144.5px);
    
    //background: url(/assets/img/index/iphone_sprite.png) no-repeat;
    background: url(/assets/img/index/iphone_main_lighting_0.png) no-repeat;
    //background-position: -466px 0;
    opacity: .15;
    
    width:  289px;
    height: 564px;
    
    //.transition(background-position, 0.3s, ease-out);
    pointer-events: none;
    
    -webkit-animation-name:             -webkit-iphone-lighting-animation;
    -webkit-animation-iteration-count:  infinite;
    -webkit-animation-timing-function:  linear;
    //-webkit-animation-direction:        alternate;
    -webkit-animation-duration:         15s;
}

.iphone-body-lighting-1 {
    -webkit-animation-delay:            7.5s;
}

.iphone-body-overlay {
    position: absolute;
    top:  0;
    left: 50%;
    margin-left: -134px;
    
    background: url(/assets/img/index/iphone_sprite.png) no-repeat;
    background-position: -300px 0;
    width:  289px;
    height: 564px;
    
    pointer-events: none;

}

.iphone-screens {
    position: absolute;
    
    top:  100px;
    left: 63px;
    
    width:  244px;
    height: 366px;
    
    overflow: hidden;
}

.iphone-screen {
    position: absolute;
    pointer-events: auto;
    
    top:  0;
    left: 0;
    
    width:  244px;
    height: 366px;
    
    overflow: hidden;
    
    .transition(left, .3s, ease-out);
}

.iphone-screen-inbox {
    .iphone-inbox-header {
        background: url(/assets/img/index/iphone_main_inbox_header.png) no-repeat;
        width:  100%;
        height: 51px;
        
        position: absolute;
        top:  0;
        left: 0;
    }
    
    .iphone-inbox-body {
        background: url(/assets/img/index/iphone_main_inbox_body.png) no-repeat;
        width:  100%;
        height: 365px;
        
        position: absolute;
        top:  0;
        left: 0;
    }
    
    .iphone-inbox-footer {
        background: url(/assets/img/index/iphone_main_inbox_footer.png) no-repeat;
        width:  100%;
        height: 42px;
        
        position: absolute;
        bottom: 0;
        left:   0;
    }
    
    .iphone-inbox-selection {
        position: absolute;
        display:  none;
        
        width: 100%;
        left: 0;
        
        background: fade(#438fED, 30%);
        pointer-events: none;
    }
}

.iphone-screen-sdetail {
    .iphone-screen-sdetail-0 {
        background: url(/assets/img/index/iphone_main_sdetail_0.png) no-repeat;
        height: 100%;
        
        display: none;
    }
    
    .iphone-screen-sdetail-1 {
        background: url(/assets/img/index/iphone_main_sdetail_1.png) no-repeat;
        height: 100%;
        
        display: none;
    }
}

.iphone-screen-guide {
    .iphone-screen-guide-0 {
        background: url(/assets/img/index/iphone_main_guide_0.png) no-repeat;
        height: 100%;
        
        display: none;
    }
}

.iphone-screen-back-button {
    position: absolute;
    
    left: 4px;
    top:  20px;
    
    width:  52px;
    height: 25px;
    
    &:hover, &:active {
        // TODO: replace with actual active state asset
        //background: red;
    }
}

.iphone-screen-sdetail-active-0 .iphone-screen-sdetail-0, 
.iphone-screen-sdetail-active-1 .iphone-screen-sdetail-1 {
    display: block;
}

.iphone-screen-guide-active-0 .iphone-screen-guide-0, 
.iphone-screen-guide-active-1 .iphone-screen-guide-1 {
    display: block;
}

.iphone-screen-active-inbox {
    .iphone-screen-inbox {
        left: 0 !important;
    }
    
    .iphone-screen-sdetail {
        left: 244px !important;
    }
    
    .iphone-screen-guide {
        left: 488px !important;
    }
}

//.iphone-screen-active-inbox + .iphone-body-lighting-0 { }

.iphone-screen-active-sdetail {
    .iphone-screen-inbox {
        left: -244px !important;
    }
    
    .iphone-screen-sdetail {
        left: 0 !important;
    }
    
    .iphone-screen-guide {
        left: 244px !important;
    }
}

//.iphone-screen-active-sdetail + .iphone-body-lighting-0 { }

.iphone-screen-active-guide {
    .iphone-screen-inbox {
        left: -244px !important;
    }
    
    .iphone-screen-sdetail {
        left: -244px !important;
    }
    
    .iphone-screen-guide {
        left: 0 !important;
    }
}

//.iphone-screen-active-guide + .iphone-body-lighting-0 { }

#retina {
    #main-iphone {
        margin: -530px 0 0 120px;
    }
    
    .iphone-hero {
        // TODO: retina iphone here!
    }
}

#main-iphone-dev {
    position: absolute;
    top:  0;
    left: 0;
    display: none;
    
    li {
        display: block;
        span {
            display: inline-block;
            min-width: 100px;
        }
    }
}


/* **************************************************************************
                                  FOOTER
   ************************************************************************** */


footer {
    position: fixed;
    z-index: 0;
    width: 100%;
    
    left:   0;
    bottom: 0;
    
    padding: 12px 24px;
}

#retina footer .app-store-button {
    margin-top: -36px;
}

#social {
    position: absolute;
    top: 50%;
    right: 72px;
    
    margin-top: -18px;
    
    .social-button {
        display: inline-block;
    }
}

#footer-nav {
    margin-top: .5em;
    font-size: 90%;
    
    .nav {
        display: inline-block;
        margin-right: 1em;
        font-size: 90%;
        color: #999;
        
        &:hover {
            color: #000;
        }
    }
}


/* **************************************************************************
                                 BUTTONS
   ************************************************************************** */


.pane-nav-button {
    background: url(/assets/img/index/navdots_sprite.png) no-repeat;
    display: block;
    width:  16px;
    height: 16px;
    
    &:hover {
        background-position: -18px 0;
    }
    
    &:active {
        background-position: -36px 0;
    }
}

.active-pane-nav-button {
    background-position: -36px 0;
    
    &:hover {
        background-position: -36px 0;
    }
}

.social-button {
    background: url(/assets/img/index/social_sprite.png) no-repeat;
    display: block;
    
    width:  20px;
    height: 20px;
}

.social-button-template(@x, @offset) {
    @x2: (@x * @offset);
    background-position: @x2 0;
    
    &:hover, &:active {
        background-position: @x2 -22px;
    }
}

.social-button-twitter {
    .social-button-template(0, -22px);
}

.social-button-facebook {
    .social-button-template(1, -22px);
}

.social-button-google {
    .social-button-template(2, -22px);
}

.app-store-button {
    background: url(/assets/img/index/appstore_sprite.png) no-repeat;
    display: block;
    
    width:  120px;
    height: 40px;
    
    &:hover, &:active {
        background-position: -122px 0;
    }
}

.download-the-app-button {
    background: url(/assets/img/index/downloadbtn_sprite.png) no-repeat;
    display: block;
    
    width:  200px;
    height: 32px;
    
    &:hover {
        background-position: -202px 0;
    }
    
    &:active {
        background-position: -404px 0;
    }
}

.launcher-icon-button {
    background: url(/assets/img/index/launchericon_sprite.png) no-repeat;
    display: block;
    
    width:  64px;
    height: 64px;
    
    &:hover, &:active {
        background-position: -66px 0;
    }
}

.play-video-button-small {
    background: url(/assets/img/index/playbutton_small_sprite.png) no-repeat;
    display: block;
    
    width:  40px;
    height: 40px;
    
    &:hover, &:active {
        background-position: -42px 0;
    }
}

.play-video-button-large {
    background: url(/assets/img/index/playbutton_large_sprite.png) no-repeat;
    display: block;
    
    width:  64px;
    height: 64px;
    
    &:hover, &:active {
        background-position: -66px 0;
    }
}

.bieber-video-preview-icon {
    background: url(/assets/img/index/bieberlittle.gif) no-repeat;
    
    width:  45px;
    height: 45px;
}

#category-illustration {
    background: url(/assets/img/index/illustration.png) no-repeat;
    width:  373px;
    height: 84px;
}

.third-party-logo {
    background: url(/assets/img/index/thirdparties_sprite.png) no-repeat;
    display: block;
    
    width:  54px;
    height: 24px;
}

.third-party-logo-template(@x, @offset) {
    @x2: (2 * @x * @offset);
    background-position: @x2 0;
    
    &:hover, &:active {
        background-position: (@x2 + @offset) 0;
    }
}

.third-party-logo-spotify {
    .third-party-logo-template(0, -56px);
}

.third-party-logo-rdio {
    .third-party-logo-template(1, -56px);
}

.third-party-logo-netflix {
    .third-party-logo-template(2, -56px);
}

.third-party-logo-fandango {
    .third-party-logo-template(3, -56px);
}

.third-party-logo-opentable {
    .third-party-logo-template(4, -56px);
}

#retina {
    .pane-nav-button {
        background: url(/assets/img/index/navdots_sprite@2x.png) no-repeat;
        width:  31px;
        height: 31px;
        
        &:hover {
            background-position: -35px 0;
        }
        
        &:active {
            background-position: -70px 0;
        }
    }
    
    .active-pane-nav-button {
        background-position: -70px 0;
        
        &:hover {
            background-position: -70px 0;
        }
    }
    
    .social-button {
        background: url(/assets/img/index/social_sprite@2x.png) no-repeat;
        width:  40px;
        height: 40px;
    }
    
    .social-button-twitter {
        .social-button-template(0, -44px);
    }
    
    .social-button-facebook {
        .social-button-template(1, -44px);
    }
    
    .social-button-google {
        .social-button-template(2, -44px);
    }
    
    .app-store-button {
        background: url(/assets/img/index/appstore_sprite@2x.png) no-repeat;
        width:  240px;
        height: 80px;
        
        &:hover, &:active {
            background-position: -244px 0;
        }
    }
    
    .download-the-app-button {
        background: url(/assets/img/index/downloadbtn_sprite@2x.png) no-repeat;
        width:  400px;
        height: 64px;
        
        &:hover {
            background-position: -404px 0;
        }
        
        &:active {
            background-position: -808px 0;
        }
    }
    
    .launcher-icon-button {
        background: url(/assets/img/index/launchericon_sprite@2x.png) no-repeat;
        width:  128px;
        height: 128px;
        
        &:hover, &:active {
            background-position: -132px 0;
        }
    }
    
    .play-video-button-small {
        background: url(/assets/img/index/playbutton_small_sprite@2x.png) no-repeat;
        display: block;
        
        width:  80px;
        height: 80px;
        
        &:hover, &:active {
            background-position: -84px 0;
        }
    }
    
    .play-video-button-large {
        background: url(/assets/img/index/playbutton_large_sprite@2x.png) no-repeat;
        display: block;
        
        width:  128px;
        height: 128px;
        
        &:hover, &:active {
            background-position: -132px 0;
        }
    }
    
    .bieber-video-preview-icon {
        background: url(/assets/img/index/bieberlittle@2x.gif) no-repeat;
        width:  90px;
        height: 90px;
    }
    
    #category-illustration {
        background: url(/assets/img/index/illustration@2x.png) no-repeat;
        width:  746px;
        height: 168px;
    }
    
    .third-party-logo {
        background: url(/assets/img/index/thirdparties_sprite@2x.png) no-repeat;
        display: block;
        
        width:  108px;
        height: 48px;
    }
    
    .third-party-logo-spotify {
        .third-party-logo-template(0, -112px);
    }

    .third-party-logo-rdio {
        .third-party-logo-template(1, -112px);
    }

    .third-party-logo-netflix {
        .third-party-logo-template(2, -112px);
    }

    .third-party-logo-fandango {
        .third-party-logo-template(3, -112px);
    }

    .third-party-logo-opentable {
        .third-party-logo-template(4, -112px);
    }
}

