{% extends "profile.html" %}
{% load stamped_tags %}
{% load ssi from future %}

<!-- Javascript dependencies
     - - - - - - - - - - - -
    
    script: libs/jquery.hotkeys.js
    script: libs/handlebars.js
    script: libs/infobox.js
    script: libs/markerclusterer.js
    
    script: map.js
-->

{% block styles %}
    {{ block.super }}
    
    <link rel="stylesheet" href="{{ STATIC_URL }}css/map.css">
{% endblock styles %}

{% block profile-header %}
{% endblock profile-header %}

{% block stamp_category_nav_bar %}
{% endblock stamp_category_nav_bar %}

{% block pre_profile_main_content %}
    <div id="main-content" class="fullwidth">
{% endblock pre_profile_main_content %}

{% block profile_main_content %}
    <div class="stamp-map">
        <div class="stamp-map-canvas"></div>
        
        <a class="my-location" href="#" title="My Location">
            <div class="inner"></div>
        </a>
        
        {% with share_widget_desc="Share this map" %}
            {% handlebars_template "share-widget" %}
        {% endwith %}
        
        <div class="fixedwidth">
            <div class="stamp-map-nav-wrapper">
                <div class="stamp-map-nav">
                    <div class="nav-header clearfix">
                        {% handlebars_template "profile-image-medium-ish" user %}
                        
                        <div class="nav-header-title">
                            <div class="name">
                                {% handlebars_template "screen-name" user %}'s
                            </div>
                            
                            <div class="stamp-map-title user-primary">Stamp Map</div>
                        </div>
                        
                        <div class="list-view-nav">
                            <a href="#" class='arrow up-arrow'   title="Collapse stamp list"></a>
                            <a href="#" class='arrow down-arrow' title="Expand stamp list"></a>
                        </div>
                    </div>
                    
                    <div class="stamp-list-view">
                        {% for stamp in stamps %}
                            <div class="stamp-list-view-item user-primary-selection stamp-id-{{stamp.stamp_id}}">
                                <div class="entity-header">
                                    <div class="stamp-category-{{stamp.entity.category}} stamp-subcategory-{{stamp.entity.subcategory}}">
                                        <div class='title clearfloat'>
                                            <div class="pronounced-title">
                                                <a class='sdetail' href="{{stamp.url}}" title="{{stamp.entity.title}}">{{stamp.entity.title}}</a>
                                            </div>
                                            
                                            <span class='user-logo-tiny'></span>
                                        </div>
                                        
                                        <div class="subtitle-line">
                                            <p>
                                                <span class="icon"></span>
                                                <span class="subtitle">{{stamp.entity.subcategory|title}} - {{stamp.entity.subtitle}}</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    
                    <div class="nav-dummy-footer">
                        <div class="content">
                            <a class="map-profile-link" href="/{{user.screen_name}}"><div class='map-profile-icon-wrapper profile-icon'><div class='map-profile-icon'><div class='inner'></div><div class='inner-shadow'></div></div></div><span class="desc"> View Full Profile</span></a>
                        </div>
                    </div>
                </div>
                
                <div class="nav-footer">
                    <div class="content">
                        <a class="map-profile-link" href="/{{user.screen_name}}"><div class='map-profile-icon-wrapper profile-icon'><div class='map-profile-icon'><div class='inner-shadow'></div><div class='inner'></div></div></div><span class="desc"> View Full Profile</span></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock profile_main_content %}

{% block scripts %}
    {{ block.super }}
     
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyD4uiuKac5adB9_bwQK9fgJx3SyZVzQsSc&sensor=true"></script>
    <script src="{{ STATIC_URL }}js/map.generated.js"></script>
{% endblock scripts %}

