{% extends "base2.html" %}
{% load stamped_tags %}

<!-- 
    NOTE: this is a workaround because the built-in ssi tag doesn't support 
    context variables as arguments. We use ssi to include other html files 
    which contain non-django templates that the django templating system 
    should not attempt to parse. Note that we would use the built-in include 
    tag if we wanted to parse an external template before inclusion.
-->
{% load ssi from future %}

{% block head %}
    {{ block.super }}
    
    <link rel="stylesheet" href="{{ STATIC_URL }}css/demo.css">
{% endblock head %}

{% block main %}
    {{ block.super }}
    
    <div class="profile-header fullwidth">
        <div class="innerbg">
            <div class="profile-header-pre">
                <div class="ribbon-top"></div>
            </div>
            
            <div class="profile-header-body fixedwidth clearfix">
                <div class="user-logo floatleft">
                    <img src="http://static.stamped.com/logos/{{ user.color_primary }}-{{user.color_secondary}}-logo-195x195.png" />
                </div>
                
                <div class="profile-image-large floatleft">
                    <!-- TODO: link to lighthouse with full-resolution profile image -->
                    
                    <img src="{{user.image_url_144}}" />
                </div>
                
                <div class="floatleft profile-section0">
                    <p>
                        <a class='pronounced-title large' href="/{{user.screen_name}}">{{user.name}}</a>
                        <a class='screen-name' href="/{{user.screen_name}}">@{{user.screen_name}}</a>{% if user.location %} / {{user.location}}{% endif %}
                    </p>
                    <p>
                        {{user.bio}}
                    </p>
                    
                    <!-- TODO: FOLLOW button -->
                </div>
                
                <div class="profile-sections">
                    <ol class="profile-nav">
                        <li><a href="#" class="up-arrow"></a></li>
                        <li><a href="#" class="down-arrow"></a></li>
                    </ol>
                    
                    <!-- # followers and # friends -->
                    <div class="profile-section profile-section-default">
                        <div class="floatleft profile-section2">
                            <p class="number">{{user.num_friends}}</p>
                            <p>following</p>
                            
                            {% with users=friends %}
                                {% custom_template "user-gallery" %}
                            {% endwith %}
                        </div>
                        
                        <div class="floatleft profile-section1">
                            <p class="number">{{user.num_followers}}</p>
                            <p>followers</p>
                            
                            {% with users=followers %}
                                {% custom_template "user-gallery" %}
                            {% endwith %}
                        </div>
                    </div>
                    
                    <!-- stamp distribution -->
                    <div class="profile-section profile-section3">
                        <!--<p class="stamp-category-{{vertical.category}}">
                            <span class="icon"></span>-->
                        
                        <ul class="user-category-distribution clearfix">
                        {% for vertical in user.distribution %}
                            <li>
                                <img src="{{vertical.icon}}" />
                                <div class="bargraph">
                                    <div class="value"></div>
                                </div>
                            </li>
                        {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="profile-header-post">
                <div class="ribbon-bottom"></div>
                <div class="inset-stamp">
                    <div class="number">{{user.num_stamps}}</div>
                    <span class="bold">STAMPS</span>
                </div>
            </div>
        </div>
    </div>
    
    <div id="data" class="fixedwidth">
        {% custom_template "stamp-gallery" %}
    </div>
    
    <div id="data2"></div>
{% endblock main %}

{% block scripts %}
    {{ block.super }}
     
    <script src="{{ STATIC_URL }}js/libs/mustache.js"></script>
    <script src="{{ STATIC_URL }}js/libs/jquery.infinitescroll{% if IS_PROD %}.min{% endif %}.js"></script>
    <script src="{{ STATIC_URL }}js/libs/jquery.isotope{% if IS_PROD %}.min{% endif %}.js"></script>
    <script src="{{ STATIC_URL }}js/libs/jquery.emoji.js"></script>
    <script src="{{ STATIC_URL }}js/client.js"></script>
    <script src="{{ STATIC_URL }}js/demo.js"></script>
    
    {% ssi STAMPED_TEMPLATE_FILE %}
{% endblock scripts %}

