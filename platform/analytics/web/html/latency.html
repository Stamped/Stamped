<!doctype html>
<html lang="en">
	<head>
	    <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        
        <title>Stamped Analytics: Enrichment</title>
        
        <meta name="description"        content="A page for monitoring key analytics for the Stamped mobile app">
        
        <meta name="author"             content="Stamped, Inc.">
        <meta name="copyright"          content="Stamped, Inc.">
        
        <script src="/assets/js/sorttable.js"></script>
	</head>
	
	<body>
	
		<h1> Stamped Analytics Dashboard</h1>
		
		<h2> All stats through {{hour}}:{{minute}} UTC</h4>
		
		<div>
			<ul style='display:inline'>
				<li><a href='/dashboard'>Daily Overview </a></li>
				<li><a href='/enrichment'>Enrichment Stats </a></li>
				<li><a href='/latency'>API Latency</a></li>
				<li><a href='/segmentation'>User Segmentation</a></li>
				<li><a href='/trending'>Trending</a></li>
				<li><a href='/custom'>Custom</a></li>
			</ul>
		</div>   
    
    <h1>Last Seven Days Latency Analysis </h1>
    
    Blacklist:
    <form action='/latency/' method='post'>
    <input type='textarea' name='blacklist' default='Blacklisted user ids, comma separated...'></input>
    <input type='submit' />
    </form>
    
    Whitelist:
    <form action='/latency/' method='post'>
    <input type='textarea' name='whitelist' default='Whitelisted user ids, comma separated...'></input>
    <input type='submit' />
    </form>
    
    {%if is_blacklist %}
    Omitting calls from {{ blacklist }}
    {%elif is_whitelist %}
    Only registering calls from {{ whitelist }}
    {%endif%}
    <table class="sortable">
    	<tr>
    		<td>API</td><td>Successes</td><td>Mean &nbsp</td><td>Median &nbsp</td><td>90th Percentile</td><td>Max</td><td>Errors(400)</td><td>Errors(500)</td>
    	</tr>
    {% for i in report.items %}
        <tr>
        	<td>{{i.0}}</td><td>{{i.1.4}}</td><td>{{i.1.0}}</td><td>{{i.1.1}}</td><td>{{i.1.2}}</td><td>{{i.1.3}}</td><td>{{i.1.5}}</td><td>{{i.1.6}}</td>
        </tr>
   	{% endfor %}
